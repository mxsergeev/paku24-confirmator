(this["webpackJsonppaku24-confirmator-front"]=this["webpackJsonppaku24-confirmator-front"]||[]).push([[0],{132:function(e){e.exports=JSON.parse('{"1":{"name":"Lavender","hex":"#7986cb"},"2":{"name":"Sage","hex":"#33b679"},"3":{"name":"Grape","hex":"#8e24aa"},"4":{"name":"Flamingo","hex":"#e67c73"},"5":{"name":"Banana","hex":"#f6c026"},"6":{"name":"Tangerine","hex":"#f5511d"},"7":{"name":"Peacock","hex":"#039be5"},"8":{"name":"Graphite","hex":"#616161"},"9":{"name":"Blueberry","hex":"#3f51b5"},"10":{"name":"Basil","hex":"#0b8043"},"11":{"name":"Tomato","hex":"#d60000"}}')},192:function(e){e.exports=JSON.parse('{"insideCapital":"insideCapital","outsideCapital":"outsideCapital","fromCapitalToOutside":"fromCapitalToOutside","fromOutsideToCapital":"fromOutsideToCapital"}')},219:function(e,t,n){},225:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){},326:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(17),c=n.n(i),s=n(39),o=n(27),l=n(199),u=n.n(l),d=n(8),m=n.n(d),j=n(12),h=n(9),p=n(10),b=n(72),f=n(26),x=n(198),O=n(118),v=(n(219),n(1));function g(){var e=Object(f.g)();function t(t){e.push(t.currentTarget.name)}return Object(v.jsxs)("div",{className:"hub",children:[Object(v.jsx)(O.a,{onClick:t,name:"confirmator",variant:"contained",className:"hub-block",children:"Confirmator"}),Object(v.jsx)(O.a,{onClick:t,name:"statistics",variant:"contained",className:"hub-block",children:"Statistics"})]})}n(225);var y=n(402),k=n(179),w=n(335),C=n(95),S=n(88),N=n.n(S),T=n(24),D=n(397),E=n(50),I=n(83),P=n(387),L=n(401),F=n(180),z=n.n(F),A=n(386),Y=n(20),M=n.n(Y),R=n(58),U=n(200),B=n(381),W=n(177),H=n.n(W);function J(e){var t=e.open,n=e.clickable,a=void 0===n||n,i=e.label,c=e.icon,s=e.style,o=e.containerStyle,l=e.children,u=Object(r.useState)(!1),d=Object(h.a)(u,2),m=d[0],j=d[1],b="object"===typeof i?function(){return i}:function(){return Object(v.jsx)(O.a,{style:{marginLeft:0,paddingLeft:"0.5rem",marginRight:0,paddingRight:"0.5rem"},variant:"text",size:"small",label:i})};return Object(v.jsxs)("div",{style:o,children:[Object(v.jsxs)("div",{style:Object(p.a)({display:"flex",alignItems:"center",cursor:a?"pointer":"auto",pointerEvents:a?"all":"none"},s),onClick:function(){return j(!m)},children:[c,Object(v.jsx)(b,{}),a&&Object(v.jsx)(U.a,{style:{padding:0},size:"small",onClick:function(){return j(!m)},children:Object(v.jsx)(H.a,{style:{transform:m?"rotate(0.5turn)":""}})})]}),Object(v.jsx)(B.a,{in:t||m,children:l})]})}for(var X=[0],V=R.minAmount;V<=R.maxAmount;V+=R.step)X.push(V);function K(e){var t=e.order,n=void 0===t?{}:t,a=e.handleChange,i=e.style,c=Object(r.useState)(!0),s=Object(h.a)(c,2),o=s[0],l=s[1],u=Object(r.useState)(!0),d=Object(h.a)(u,2),m=d[0],j=d[1],b=o?D.a:A.a,f=m?D.a:A.a;Object(r.useEffect)((function(){l(n.boxesDeliveryDate.includes("T")),j(n.boxesPickupDate.includes("T"))}),[n.boxesDeliveryDate,n.boxesPickupDate]);var x=Object(r.useState)(!1),O=Object(h.a)(x,2),g=O[0],y=O[1],w=Object(r.useState)(!1),S=Object(h.a)(w,2),E=S[0],I=S[1];Object(r.useEffect)((function(){var e,t;y(null!==(e=n.selfPickup)&&void 0!==e&&e),I(null!==(t=n.selfReturn)&&void 0!==t&&t)}),[n.selfPickup,n.selfReturn]);var F=function(e,t,n){return a({target:{name:e,value:n?new Date(t).toISOString():M()(t).format().split("T")[0]}})};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(J,{style:{width:"100%",gap:"0.25rem"},containerStyle:Object(p.a)({width:"100%",border:"1px solid lightgray",padding:"0.5rem",borderRadius:"0.25rem"},i),label:Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem"},children:[Object(v.jsx)(z.a,{})," Boxes"]}),children:Object(v.jsxs)("div",{style:{margin:"1.25rem 0.5rem 0.5rem"},children:[Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(T.a,{utils:C.a,locale:N.a,children:Object(v.jsx)(b,{ampm:!1,format:o?"DD.MM.YYYY HH:mm":"DD.MM.YYYY",minutesStep:15,value:n.boxesDeliveryDate,onChange:function(e){return F("boxesDeliveryDate",new Date(e),o)},DialogProps:{disableScrollLock:!0}})}),Object(v.jsx)(P.a,{size:"small",style:{display:"block",marginLeft:0},control:Object(v.jsx)(L.a,{checked:o,onChange:function(){var e=!o;l(e),F("boxesDeliveryDate",n.boxesDeliveryDate,e)},color:"primary"}),label:"Include time",labelPlacement:"start"})]}),Object(v.jsx)("div",{style:{fontSize:"1.25rem"},children:"\u2013"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(T.a,{utils:C.a,locale:N.a,children:Object(v.jsx)(f,{ampm:!1,format:m?"DD.MM.YYYY HH:mm":"DD.MM.YYYY",minutesStep:15,value:n.boxesPickupDate,onChange:function(e){return F("boxesPickupDate",new Date(e),m)},DialogProps:{disableScrollLock:!0}})}),Object(v.jsx)(P.a,{size:"small",style:{display:"block",marginLeft:0},control:Object(v.jsx)(L.a,{checked:m,onChange:function(){var e=!m;j(e),F("boxesPickupDate",n.boxesPickupDate,e)},color:"primary"}),label:"Include time",labelPlacement:"start"})]})]}),Object(v.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[Object(v.jsx)(k.a,{className:"time-duration",style:{maxWidth:"9rem",marginTop:"0.5rem"},name:"boxesAmount",value:null===n||void 0===n?void 0:n.boxesAmount,onChange:a,variant:"filled",children:X.map((function(e){return Object(v.jsx)("option",{value:e,children:e},e)}))}),Object(v.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[Object(v.jsx)(P.a,{size:"small",style:{display:"block",marginLeft:0},control:Object(v.jsx)(L.a,{checked:g,onChange:function(){var e=!g;y(e),a({target:{name:"selfPickup",value:e}})},color:"primary"}),label:"Self pickup",labelPlacement:"start"}),Object(v.jsx)(P.a,{size:"small",style:{display:"block",marginLeft:0},control:Object(v.jsx)(L.a,{checked:E,onChange:function(){var e=!E;I(e),a({target:{name:"selfReturn",value:e}})},color:"primary"}),label:"Self return",labelPlacement:"start"})]})]})]})})})}function q(e){var t=e.order,n=e.handleChange,r={marginTop:5},a={marginLeft:5,marginRight:5};return N.a.weekStart=1,Object(v.jsxs)("div",{className:"basic-flex",style:{marginTop:"5px"},children:[Object(v.jsxs)("div",{className:"flex-100-space-between flex-item",style:a,children:[Object(v.jsx)(T.a,{utils:C.a,locale:N.a,children:Object(v.jsx)(D.a,{ampm:!1,format:"DD-MM-YYYY HH:mm",minutesStep:15,style:a,className:"time-duration",value:t.dateTime,onChange:function(e){return t="dateTime",r=new Date(e),n({target:{name:t,value:r}});var t,r},DialogProps:{disableScrollLock:!0}})}),Object(v.jsxs)(k.a,{className:"time-duration",style:Object(p.a)(Object(p.a)({},a),{},{paddingLeft:10}),name:"duration",value:null===t||void 0===t?void 0:t.duration,onChange:n,children:[Object(v.jsx)("option",{value:1,children:"1h"}),Object(v.jsx)("option",{value:1.5,children:"1.5h"}),Object(v.jsx)("option",{value:2,children:"2h"}),Object(v.jsx)("option",{value:2.5,children:"2.5h"}),Object(v.jsx)("option",{value:3,children:"3h"}),Object(v.jsx)("option",{value:3.5,children:"3.5h"}),Object(v.jsx)("option",{value:4,children:"4h"}),Object(v.jsx)("option",{value:4.5,children:"4.5h"}),Object(v.jsx)("option",{value:5,children:"5h"}),Object(v.jsx)("option",{value:5.5,children:"5.5h"}),Object(v.jsx)("option",{value:6,children:"6h"}),Object(v.jsx)("option",{value:6.5,children:"6.5h"}),Object(v.jsx)("option",{value:7,children:"7h"}),Object(v.jsx)("option",{value:7.5,children:"7.5h"}),Object(v.jsx)("option",{value:8,children:"8h"}),Object(v.jsx)("option",{value:8.5,children:"8.5h"}),Object(v.jsx)("option",{value:9,children:"9h"}),Object(v.jsx)("option",{value:9.5,children:"9.5h"}),Object(v.jsx)("option",{value:10,children:"10h"})]})]}),Object(v.jsx)(k.a,{fullWidth:!0,style:a,className:"flex-item",name:"serviceName",value:null===t||void 0===t?void 0:t.serviceName,onChange:n,children:E.map((function(e){return Object(v.jsx)("option",{value:e.name,children:e.name},e.id)}))}),Object(v.jsx)(k.a,{fullWidth:!0,style:a,className:"flex-item",name:"paymentType",value:null===t||void 0===t?void 0:t.paymentType,onChange:n,children:I.map((function(e){var t=e.name,n=e.id;return Object(v.jsx)("option",{value:t,children:t},n)}))}),Object(v.jsx)(y.a,{fullWidth:!0,style:r,className:"flex-item",required:!0,name:"address",value:null===t||void 0===t?void 0:t.address,onChange:n,label:"Address",variant:"outlined",size:"small"}),Object(v.jsx)(y.a,{fullWidth:!0,multiline:!0,style:r,className:"flex-item",name:"destination",value:null===t||void 0===t?void 0:t.destination,onChange:n,label:"Destination",variant:"outlined",size:"small"}),Object(v.jsx)(y.a,{fullWidth:!0,required:!0,style:r,className:"flex-item",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:n,label:"Name",variant:"outlined",size:"small"}),Object(v.jsx)(y.a,{fullWidth:!0,style:r,className:"flex-item",name:"email",value:null===t||void 0===t?void 0:t.email,onChange:n,type:"email",label:"Email",variant:"outlined",size:"small"}),Object(v.jsx)(y.a,{fullWidth:!0,style:r,className:"flex-item",required:!0,name:"phone",value:null===t||void 0===t?void 0:t.phone,onChange:n,label:"Phonenumber",variant:"outlined",size:"small"}),Object(v.jsx)(K,{style:{marginTop:r.marginTop},order:t,handleChange:n}),Object(v.jsx)(w.a,{style:r,className:"flex-item textarea-2",rowsMin:3,cols:27,name:"comment",value:null===t||void 0===t?void 0:t.comment,placeholder:"Additional information.",onChange:n})]})}var _=n(385),G=n(384),$=n(400),Q=n(404),Z=n(398),ee=n(405),te=n(132);function ne(e){var t=e.handleChange,n=e.order;return Object(v.jsxs)("div",{className:"checkbox-container",children:[Object(v.jsxs)(G.a,{className:"checkbox-distance flex-item",hiddenLabel:!1,size:"small",children:[Object(v.jsx)(_.a,{component:"legend",children:"Pick one:"}),Object(v.jsxs)(Q.a,{value:n.distance,onChange:t,children:[Object(v.jsx)(P.a,{name:"distance",value:"insideCapital",control:Object(v.jsx)($.a,{color:"default"}),label:"\ud83c\udfd9 Inside capital"}),Object(v.jsx)(P.a,{name:"distance",value:"outsideCapital",control:Object(v.jsx)($.a,{color:"default"}),label:"\ud83c\udfde Outside capital"}),Object(v.jsx)(P.a,{name:"distance",value:"fromCapitalToOutside",control:Object(v.jsx)($.a,{color:"default"}),label:"\ud83c\udfd9->\ud83c\udfde From capital"}),Object(v.jsx)(P.a,{name:"distance",value:"fromOutsideToCapital",control:Object(v.jsx)($.a,{color:"default"}),label:"\ud83c\udfde->\ud83c\udfd9 To capital"})]})]}),Object(v.jsxs)(G.a,{className:"basic-flex",size:"small",style:{alignItems:"flex-end"},children:[Object(v.jsxs)("div",{className:"color-selector",children:[Object(v.jsx)("div",{children:"Event color"}),Object(v.jsx)(Z.a,{variant:"filled",name:"eventColor",value:null===n||void 0===n?void 0:n.eventColor,onChange:t,label:"Event color",renderValue:function(e){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("span",{style:{backgroundColor:te[e].hex},className:"color-option",children:"\xa0\xa0\xa0\xa0\xa0"})})},children:Object.entries(te).map((function(e){var t=Object(h.a)(e,2),n=t[0],r=t[1];return Object(v.jsxs)(ee.a,{value:n,children:[Object(v.jsx)("span",{style:{backgroundColor:r.hex,marginRight:"0.5rem"},className:"color-option"}),r.name]},n)}))})]}),Object(v.jsx)(P.a,{size:"small",className:"flex-item",control:Object(v.jsx)(L.a,{checked:n.hsy,onChange:t,color:"primary"}),name:"hsy",label:"\u267b HSY",labelPlacement:"start"}),Object(v.jsx)(P.a,{style:{display:"none"},className:"flex-item",control:Object(v.jsx)(L.a,{checked:n.XL,onChange:t,color:"primary"}),name:"XL",label:"XL",labelPlacement:"start"})]})]})}var re=n(96),ae=n.n(re),ie=n(181),ce=n.n(ie);function se(e){var t=e.validationArray,n={color:"red"};return Object(v.jsx)(v.Fragment,{children:t.map((function(e){return e.isError?Object(v.jsxs)("div",{children:[Object(v.jsxs)("span",{style:n,children:[e.name," "]}),e.message]},e.id):null}))})}function oe(e){var t=e.order,n=e.shouldValidate,a=Object(r.useState)([]),i=Object(h.a)(a,2),c=i[0],s=i[1];Object(r.useEffect)((function(){if(n){var e=[{id:1,name:"Date and time",isError:ae.a.isBefore(t.dateTime.toISOString(),(new Date).toISOString()),message:"might have some problems. Check to be sure: ".concat("".concat(t.confirmationDateString," ").concat(t.time)||"---")},{id:2,name:"Address",isError:ae.a.isEmpty(t.address),message:"is missing"},{id:3,name:"Phonenumber",isError:!ae.a.isMobilePhone(t.phone,["fi-FI","es-ES","sv-SE"]),message:"is missing or is incorrect: ".concat(t.phone||"---")},{id:4,name:"Email",isError:!ae.a.isEmail(t.email),message:"is missing or is incorrect: ".concat(t.email||"---")}];s(e)}}),[t.dateTime,t.phone,t.address,t.email,n]);var o=c.some((function(e){return e.isError}));return Object(v.jsx)(v.Fragment,{children:n&&o&&Object(v.jsx)("div",{style:{borderTop:"1px solid gray",borderBottom:"1px solid gray",padding:"15px 0 15px 0",margin:"10px 0 10px 0"},className:"flex-100-space-between",children:Object(v.jsxs)("div",{children:[Object(v.jsx)(ce.a,{}),Object(v.jsx)(se,{validationArray:c})]})})})}var le=n(182),ue=n.n(le),de=(n(306),function(e,t){return function(n){var a=n.content,i=n.handleUpdate,c=Object(b.a)(n,["content","handleUpdate"]),s=Object(r.useState)(!1),o=Object(h.a)(s,2),l=o[0],u=o[1],d=Object(r.useState)(a),m=Object(h.a)(d,2),j=m[0],f=m[1],x=Object(r.useState)(j),g=Object(h.a)(x,2),y=g[0],k=g[1];function w(e){k(e.target.value)}function C(){k(j),u(!l)}function S(){f(y),i(y),u(!l)}function N(){u(!l)}return Object(v.jsx)(v.Fragment,{children:l?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(e,Object(p.a)({content:y,handleChange:w},c)),Object(v.jsxs)("div",{className:"buttons-block",children:[Object(v.jsx)(O.a,{size:"small",onClick:C,children:"Cancel"}),Object(v.jsx)(O.a,{className:"primary",size:"small",onClick:S,children:"Save"})]})]}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(t,Object(p.a)({content:a,button:Object(v.jsx)("span",{children:Object(v.jsx)(U.a,{size:"small",onClick:N,children:Object(v.jsx)(ue.a,{style:{width:"20px"}})})})},c))})})}});function me(e){var t=e.handleClick,n=e.rawOrderText,r=e.elementRef,a=de((function(e){var t=e.handleChange,n=e.content;return Object(v.jsx)(w.a,{onChange:t,value:n,style:{marginTop:"10px"},className:"width-100",rowsMin:5,cols:40,placeholder:"Raw order here."})}),(function(e){var t=e.button;return Object(v.jsxs)("div",{ref:r,className:"not-editable-container",children:["Raw order",t]})}));return Object(v.jsx)(a,{style:{width:"max-content"},handleUpdate:t,content:n})}n(307);function je(e){var t=e.elementRef,n=e.handleClick,r=e.transformedOrderText,a=de((function(e){var n=e.handleChange,r=e.content;return Object(v.jsx)(w.a,{onChange:n,value:r,ref:t,style:{marginTop:"10px"},className:"width-100",rowsMin:5,cols:40,placeholder:"Transformed order."})}),(function(e){var n=e.content,a=e.button;return Object(v.jsxs)("div",{ref:t,style:{width:r&&"100%",marginTop:"12px"},className:"not-editable-container",children:[0===n.length?"Transformed order":Object(v.jsx)("div",{className:"text-container-with-scroll",children:n.split("\n").map((function(e,t){return Object(v.jsx)("div",{children:e},t)}))}),a]})}));return Object(v.jsx)(a,{handleUpdate:n,content:r})}var he=n(183),pe=n.n(he);function be(e){var t=e.handleClick,n=e.text,r=void 0===n?"Transform":n,a=Object(b.a)(e,["handleClick","text"]);return Object(v.jsxs)(O.a,Object(p.a)(Object(p.a)({className:"button-one-third flex-item",variant:"outlined",size:"small",style:{fontSize:"0.8rem",padding:"1px"},onClick:function(){return t()}},a),{},{children:[Object(v.jsx)(pe.a,{}),r]}))}var fe=n(184),xe=n.n(fe);function Oe(e){var t=e.elementRef,n=e.disabled;return Object(v.jsxs)(O.a,{disabled:n,className:"button-one-third flex-item",variant:"outlined",size:"small",onClick:function(){!function(){var e=document.createElement("textarea");document.body.appendChild(e),e.value=t.current.innerText||t.current.defaultValue,e.select(),document.execCommand("copy"),document.body.removeChild(e)}(),Object(o.b)("Copied!",{autoHideDuration:750})},children:["Copy ",Object(v.jsx)(xe.a,{})]})}function ve(e){var t=e.handleOrderTransformFromText,n=e.handleOrderTransformFromEditor,r=e.transformDisabled,a=e.copyDisabled,i=e.elementRef;return Object(v.jsx)("div",{className:"order-operations",children:Object(v.jsxs)("div",{className:"block",children:[Object(v.jsx)(Oe,{disabled:a,elementRef:i}),Object(v.jsx)(be,{text:"from text",disabled:r,handleClick:t}),Object(v.jsx)(be,{text:"from editor",handleClick:n})]})})}var ge=n(46),ye=n(185),ke=n.n(ye);function we(e){var t=e.handleClick,n=e.className;return Object(v.jsxs)(O.a,{className:n,variant:"contained",size:"small",onClick:t,children:["New order ",Object(v.jsx)(ke.a,{})]})}function Ce(e){var t=e.className,n=e.orderPoolUrl,r=Object(f.g)();return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{size:"small",className:t,variant:"contained",onClick:function(){r.push(n)},children:"Order Pool"})})}function Se(e){var t=e.text,n=e.className,r=Object(b.a)(e,["text","className"]);return Object(v.jsx)("div",Object(p.a)(Object(p.a)({className:"message ".concat(n)},r),{},{children:t}))}var Ne=n(186),Te=n.n(Ne);function De(e){var t=e.handleClick,n=e.isDisabled,r=e.grayScale,a=e.content,i=e.className,c=r&&{color:"grey"};return Object(v.jsx)(O.a,{disabled:n,className:i,variant:"contained",size:"small",onClick:t,children:Object(v.jsx)("span",{style:Object(p.a)({display:"flex"},c),children:a})})}var Ee=n(55),Ie=n.n(Ee),Pe="/api/token";function Le(){return(Le=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.axiosInstance.post(Pe);case 2:return e.next=4,Ae.axiosInstance.post("".concat(Pe,"/is-new"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fe={refreshTokens:function(){return Le.apply(this,arguments)}},ze=Ie.a.create();var Ae={axiosInstance:ze,setupInterceptor:function(e){ze.interceptors.response.use((function(e){return e}),function(){var t=Object(j.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.config,"access token expired"!==n.response.data.error){t.next=5;break}return t.next=4,Fe.refreshTokens();case 4:return t.abrupt("return",ze(r));case 5:if("access token missing"!==n.response.data.error&&"invalid access token"!==n.response.data.error&&"refresh token expired"!==n.response.data.error&&"invalid refresh token"!==n.response.data.error&&"refresh token missing"!==n.response.data.error){t.next=9;break}throw e.notificate(),e.logout(),new Error("logout");case 9:return 429===n.response.status&&setTimeout((function(){return null}),1500),t.abrupt("return",Promise.reject(n));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},Ye="/api/email";function Me(){return(Me=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.axiosInstance.post("".concat(Ye,"/send-confirmation"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re="email";function Ue(e){var t=e.email,n=e.order,r=e.transformedOrderText,a=e.statusText,i=e.isDisabled,c=e.changeStatus,s=e.className;var l=a||Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"Send"})," ",Object(v.jsx)(Te.a,{})]});return Object(v.jsx)(De,{className:s,isDisabled:i,grayScale:null!==a,handleClick:function(){return t&&r?(c(Re,"Working",!0),function(e){return Me.apply(this,arguments)}({orderDetails:r,order:n,email:t}).then((function(e){c(Re,"Done",!0),Object(o.b)(e.message)})).catch((function(e){"logout"!==e.message&&(c(Re,"Error",!1),Object(o.b)(e.response.data.error,{variant:"error"}))}))):Object(o.b)("No confirmation found or recipients defined.",{variant:"warning"})},content:l})}var Be=n(187),We=n.n(Be),He="/api/sms";function Je(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.axiosInstance.post(He,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ve="sms";function Ke(e){var t=e.phone,n=e.transformedOrderText,r=e.statusText,a=e.isDisabled,i=e.changeStatus,c=e.className;function s(){return(s=Object(j.a)(m.a.mark((function e(){var r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=n)||!t){e.next=9;break}return i(Ve,"Working",!0),e.next=6,Je({msg:r,phone:t});case 6:a=e.sent,i(Ve,"Done",!0),Object(o.b)("".concat(a.message));case 9:e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(0),"logout"!==e.t0.message){e.next=15;break}return e.abrupt("return");case 15:i(Ve,"Error",!1),Object(o.b)(null===(c=e.t0.response)||void 0===c?void 0:c.data.error,{variant:"error"});case 17:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var l=r||Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"Send"})," ",Object(v.jsx)(We.a,{})]});return Object(v.jsx)(De,{className:c,isDisabled:a,grayScale:null!==r,handleClick:function(){return s.apply(this,arguments)},content:l})}var qe=n(188),_e=n.n(qe),Ge="/api/calendar";function $e(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.axiosInstance.post(Ge,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ze="/api/order-pool";function et(e,t){return t.map((function(n,r){var a=r===t.length-1;return"".concat(e,"[]=").concat(n).concat(a?"":"&")})).join("")}function tt(e){var t=e.query,n=e.orders;return new Promise((function(e){return e(sessionStorage.setItem("order-pool/".concat(t),JSON.stringify({validUntil:Date.now()+3e5,orders:n})))}))}function nt(e){return Promise.resolve().then((function(){return JSON.parse(sessionStorage.getItem("order-pool/".concat(e)))}))}function rt(e){return Promise.resolve(function(){try{return JSON.parse(sessionStorage.getItem("order-pool/".concat(e))).validUntil>Date.now()}catch(t){return!1}}())}function at(){return(at=Object(j.a)(m.a.mark((function e(){var t,n,r,a,i,c,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:[1],n=s.length>1&&void 0!==s[1]?s[1]:{deleted:!1,forceUpdate:!1},r=n.deleted,a=n.forceUpdate,i="".concat(r?"deleted=true":"deleted=false","&").concat(et("pages",t)),e.t0=!a,!e.t0){e.next=9;break}return e.next=8,rt(i);case 8:e.t0=e.sent;case 9:if(!e.t0){e.next=11;break}return e.abrupt("return",nt(i).then((function(e){return e.orders})));case 11:return c="".concat(Ze,"/?").concat(i),e.abrupt("return",Ae.axiosInstance.get(c).then(function(){var e=Object(j.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t?void 0:t.data,r=n.orders,e.next=3,tt({query:i,orders:r});case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return(it=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.axiosInstance.delete("".concat(Ze,"/delete/").concat(t));case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return(ct=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.axiosInstance.put("".concat(Ze,"/retrieve/").concat(t));case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var st={get:function(){return at.apply(this,arguments)},confirm:function(e){return Ae.axiosInstance.put("".concat(Ze,"/confirm/").concat(e)).then((function(e){return null===e||void 0===e?void 0:e.data}))},remove:function(e){return it.apply(this,arguments)},retrieve:function(e){return ct.apply(this,arguments)},getConfirmedOrders:function(e){var t=e.periodFrom,n=e.periodTo;return Ae.axiosInstance.get("".concat(Ze,"/confirmed-by-user/?periodFrom=").concat(t,"&periodTo=").concat(n)).then((function(e){return e.data}))},add:function(e){var t=e.order,n=e.key;return Ae.axiosInstance.post("".concat(Ze,"/add"),{order:t,key:n}).then((function(e){return null===e||void 0===e?void 0:e.data}))}},ot="calendar";function lt(e){var t=e.order,n=e.orderId,r=e.statusText,a=e.isDisabled,i=e.changeStatus,c=e.className;function s(){return(s=Object(j.a)(m.a.mark((function e(){var r,a,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(ot,"Working",!0),e.next=4,$e({order:t.prepareForSending(),calendarEntries:t.makeCalendarEntries()});case 4:if(r=e.sent,n){e.next=11;break}return e.next=8,st.add({order:JSON.stringify(t.prepareForSending()),key:"supersecretorderpoolkey"});case 8:a=e.sent,c=a.id,n=c;case 11:return e.next=13,st.confirm(n);case 13:i(ot,"Done",!0),Object(o.b)("".concat(null===r||void 0===r?void 0:r.message,"\n").concat(null===r||void 0===r?void 0:r.createdEvent)),e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(0),"logout"!==e.t0.message){e.next=21;break}return e.abrupt("return");case 21:i(ot,"Error",!1),Object(o.b)((null===(s=e.t0.response)||void 0===s?void 0:s.data.error)||(null===e.t0||void 0===e.t0?void 0:e.t0.toString()),{variant:"error"});case 23:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}var l=r||Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"Add"})," ",Object(v.jsx)(_e.a,{})]});return Object(v.jsx)(De,{className:c,isDisabled:a,grayScale:null!==r,handleClick:function(){return s.apply(this,arguments)},content:l})}n(326);function ut(e){var t=e.order,n=e.orderId,a=e.transformedOrder,i=e.handleResetClick,c=e.orderPoolUrl,s={email:{status:null,disable:!1},sms:{status:null,disable:!1},calendar:{status:null,disable:!1}},o=Object(r.useState)(s),l=Object(h.a)(o,2),u=l[0],d=l[1];function m(e,t,n){d(Object(p.a)(Object(p.a)({},u),{},Object(ge.a)({},e,{status:t,disable:n})))}return Object(v.jsxs)("div",{className:"order-operations",children:[function(){var e=u.email.disable||!(t.email&&a.text);return Object(v.jsxs)("div",{className:"block",children:[Object(v.jsx)(Se,{className:"width-75 ".concat(e&&"grayedFont"),text:"Email to: ".concat(t.email)}),Object(v.jsx)(Ue,{className:"width-25",email:t.email,order:t,statusText:u.email.status,isDisabled:e,transformedOrderText:a.text,changeStatus:m})]})}(),function(){var e=u.sms.disable||!(t.phone&&a.text);return Object(v.jsxs)("div",{className:"block",children:[Object(v.jsx)(Se,{className:"width-75 ".concat(e&&"grayedFont"),text:"Sms to: ".concat(t.phone)}),Object(v.jsx)(Ke,{className:"width-25",statusText:u.sms.status,isDisabled:e,phone:t.phone,transformedOrderText:a.text,changeStatus:m})]})}(),function(){var e=u.calendar.disable||!a.text;return Object(v.jsxs)("div",{className:"block",children:[Object(v.jsx)(we,{className:"share-space",handleClick:function(){d(s),i()}}),Object(v.jsx)(Ce,{className:"share-space",orderPoolUrl:c}),Object(v.jsx)(lt,{className:"width-25",statusText:u.calendar.status,isDisabled:e,order:t,orderId:n,transformedOrderText:a.text,changeStatus:m})]})}()]})}var dt=n(340),mt=n(338),jt=n(337),ht=n(388),pt=n(44);function bt(e){var t=e.children,n=e.handleClose,r=Object(pt.a)(),a=Object(ht.a)(r.breakpoints.down("sm"));return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(dt.a,{fullScreen:a,open:!0,onClose:n,"aria-labelledby":"responsive-dialog-title",children:[Object(v.jsx)(jt.a,{children:t}),Object(v.jsx)(mt.a,{children:Object(v.jsx)(O.a,{style:{backgroundColor:"white"},variant:"text",onClick:n,children:"Close"})})]})})}var ft=n(80),xt=n(189),Ot=n.n(xt),vt=n(191),gt=n.n(vt),yt=n(190),kt=n.n(yt);function wt(e){var t=e.loading,n=e.redirectComponent,r=void 0===n?null:n,a=e.children;return Object(v.jsxs)(v.Fragment,{children:[t&&Object(v.jsx)("p",{children:"Loading..."}),r,!t&&!r&&a]})}var Ct=n(117);function St(e){var t=e.orders,n=e.handleExport,a=e.handleDeletion,i=e.handleLoadingMoreOrders,c=e.labelForDeletion,s=Object(r.useState)([]),o=Object(h.a)(s,2),l=o[0],u=o[1];function d(e,t){return e.split("\n").map((function(e,n){return Object(v.jsx)("div",{children:e},"".concat(t).concat(n).concat(e))}))}return Object(r.useEffect)((function(){u(t.map((function(e){return{order:Object(p.a)({},e),isNew:new Date(e.date).toDateString()===new Date(Date.now()).toDateString(),className:e.confirmed?"basic-order-style confirmed-order-style":"basic-order-style",hidden:e.confirmed}})))}),[t]),0===t.length?Object(v.jsx)("p",{children:"Nothing found"}):Object(v.jsxs)(v.Fragment,{children:[l.map((function(e){return Object(v.jsxs)("div",{className:"order-pool-list",children:[Object(v.jsxs)("div",{className:"order-top-bar",children:[Object(v.jsxs)("div",{className:"order-status-icons-container",children:[e.isNew&&Object(v.jsx)("span",{className:"order-status-new-order order-status-icon",children:"NEW"}),Object(v.jsxs)("span",{className:"order-status-icon ".concat(e.order.confirmed?"order-status-icon order-status-confirmed":"order-status-icon order-status-notification"),children:[e.order.confirmed?"\u2714":"\u2755"," "]})]}),Object(v.jsxs)("div",{className:"order-actions",children:[Object(v.jsx)(O.a,{style:{padding:0,fontSize:"0.9rem"},variant:"text",size:"small",onClick:function(){return a(e.order.id)},children:c}),Object(v.jsx)(O.a,{style:{padding:0,fontSize:"0.8rem",color:e.order.confirmed&&"var(--brand-color-dark)"},onClick:function(){n(e.order)},variant:"text",size:"small",children:"Export"}),Object(v.jsx)(O.a,{style:{padding:0},variant:"text",size:"small",onClick:function(){return function(e){u(Object(ft.a)(l.map((function(t){return t.order.id===e.order.id?Object(p.a)(Object(p.a)({},e),{},{hidden:!t.hidden,className:t.hidden?"basic-order-style":"basic-order-style confirmed-order-style"}):t}))))}(e)},children:e.hidden?"Show \u2795":"Hide \u2796"})]})]}),Object(v.jsx)("div",{className:e.className,children:Object(Ct.a)(e.order.text)?(t=e.order.text,r=e.order.id,Object.entries(JSON.parse(t)).map((function(e,t){var n=Object(h.a)(e,2),a=n[0],i=n[1];return Object(v.jsxs)("div",{style:{minHeight:"1.2rem",backgroundColor:t%2!==0&&"var(--brand-color-very-light)"},children:[Object(v.jsx)("span",{style:{fontWeight:"bold"},children:a}),":"," ","dateTime"===a?"".concat(new Date(i).toLocaleDateString()," ").concat(new Date(i).toLocaleTimeString().slice(0,5)):i]},"".concat(a).concat(i).concat(r))}))):d(e.order.text,e.order.id)})]},e.order.id);var t,r})),Object(v.jsx)(O.a,{onClick:i,size:"small",children:"Load more"})]})}n(327);var Nt="inbox",Tt="trashcan";function Dt(e){var t=e.handleExport,n=Object(r.useState)([]),a=Object(h.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(!0),o=Object(h.a)(s,2),l=o[0],u=o[1],d=Object(r.useState)(Nt),b=Object(h.a)(d,2),f=b[0],x=b[1],g=Object(r.useState)({inbox:{pages:[1],searchText:"",showOnlyNotConfirmed:!1},trashcan:{pages:[1],searchText:"",showOnlyNotConfirmed:!1}}),k=Object(h.a)(g,2),w=k[0],C=k[1],S=Object(r.useState)(i),N=Object(h.a)(S,2),T=N[0],D=N[1],E=Object(r.useState)({hasToUpdate:!1,trigger:0}),I=Object(h.a)(E,2),P=I[0],L=I[1],F=Object(r.useState)({inbox:[1],trashcan:[1]}),z=Object(h.a)(F,2),A=z[0],Y=z[1],M=i.length,R=i.filter((function(e){return!e.confirmed})).length;function B(e,t,n){var r;return function(e,t){return t?e.filter((function(e){return!1===(null===e||void 0===e?void 0:e.confirmed)})):e}((r=e,n.filter((function(e){return e.text.toLowerCase().includes(null===r||void 0===r?void 0:r.toLowerCase().trim())}))),t)}function W(){return(W=Object(j.a)(m.a.mark((function e(){var t,n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[A[f].length+1],Y(Object(p.a)(Object(p.a)({},A),{},Object(ge.a)({},f,[].concat(Object(ft.a)(A[f]),t)))),f!==Nt){e.next=8;break}return e.next=5,st.get(t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,st.get(t,{deleted:!0});case 10:e.t0=e.sent;case 11:n=e.t0,r=i.concat(n),c(r),a=B(w[f].searchText,w[f].showOnlyNotConfirmed,r),D(a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){x(e.target.dataset.tabname)}function J(){return(J=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.remove(t);case 2:c(i.filter((function(e){return e.id!==t}))),D(T.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.retrieve(t);case 2:c(i.filter((function(e){return e.id!==t}))),D(T.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)(Object(j.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),e.prev=1,f!==Nt){e.next=8;break}return e.next=5,st.get(A[f],{forceUpdate:P.hasToUpdate});case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,st.get(A[f],{deleted:!0,forceUpdate:P.hasToUpdate});case 10:e.t0=e.sent;case 11:return t=e.t0,c(t),n=B(w[f].searchText,w[f].showOnlyNotConfirmed,t),D(n),e.abrupt("return",u(!1));case 18:return e.prev=18,e.t1=e.catch(1),e.abrupt("return",e.t1);case 21:case"end":return e.stop()}}),e,null,[[1,18]])}))),[f,P.trigger]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"tab-panel",children:[Object(v.jsx)(O.a,{onClick:H,className:"p-0",variant:"text",size:"small",children:Object(v.jsx)("h3",{"data-tabname":Nt,className:f===Nt?"tab-panel-item tab-panel-item-selected":"tab-panel-item",children:"Inbox"})}),Object(v.jsx)(O.a,{onClick:H,className:"p-0",variant:"text",size:"small",children:Object(v.jsx)("h3",{"data-tabname":Tt,className:f===Tt?"tab-panel-item tab-panel-item-selected":"tab-panel-item",children:"Trashcan"})}),Object(v.jsx)(U.a,{style:{marginLeft:"auto",marginRight:"12px"},onClick:function(){L(Object(p.a)(Object(p.a)({},P),{},{trigger:P.trigger+1,hasToUpdate:!0})),setTimeout((function(){return L(Object(p.a)(Object(p.a)({},P),{},{hasToUpdate:!1}))}))},className:"p-0",variant:"text",size:"small",children:Object(v.jsx)(Ot.a,{})})]}),Object(v.jsxs)("div",{className:"filters-tab",children:[Object(v.jsxs)("span",{className:"filters-tab-orders-count",children:[T.length,"/",i.length]}),Object(v.jsx)(y.a,{className:"flex-item",type:"text",name:"searchText",placeholder:"Search",value:w[f].searchText,onChange:function(e){var t=w[f];C(Object(p.a)(Object(p.a)({},w),{},Object(ge.a)({},f,Object(p.a)(Object(p.a)({},t),{},{searchText:e.target.value}))));var n=B(e.target.value,t.showOnlyNotConfirmed,i);D(n)}}),R>0&&Object(v.jsxs)(O.a,{className:"p-0 filters-tab-orders-status-icon",size:"small",onClick:function(){return function(e){var t=w[f];C(Object(p.a)(Object(p.a)({},w),{},Object(ge.a)({},f,Object(p.a)(Object(p.a)({},t),{},{showOnlyNotConfirmed:e}))));var n=B(t.searchText,e,i);D(n)}(!w[f].showOnlyNotConfirmed)},children:[Object(v.jsx)("span",{style:{fontSize:"1rem"},children:w[f].showOnlyNotConfirmed?M:R}),Object(v.jsx)("span",{className:"order-status-icon order-status-notification ".concat(w[f].showOnlyNotConfirmed&&"order-status-icon-selected"),children:w[f].showOnlyNotConfirmed?"\u2714&\u2755":"\u2755"})]})]}),Object(v.jsx)(wt,{loading:l,children:Object(v.jsx)(St,{orders:T,handleExport:t,labelForDeletion:f===Tt?Object(v.jsx)(kt.a,{}):Object(v.jsx)(gt.a,{}),handleDeletion:f===Tt?function(e){return X.apply(this,arguments)}:function(e){return J.apply(this,arguments)},handleLoadingMoreOrders:function(){return W.apply(this,arguments)}})})]})}function Et(e){var t=e.handleExport,n=Object(f.g)(),r=function(){n.goBack()};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(bt,{handleClose:r,children:Object(v.jsx)(Dt,{handleExport:function(e){t(e),r()}})})})}var It=n(133),Pt=n(114),Lt=n(115),Ft=n(90);function zt(e){return"Cannot find ".concat(e)}function At(e){return e.replace(/(?<=\d+)(th|rd|st|nd)/,"")}var Yt=function(){function e(t){Object(Pt.a)(this,e),this.textOrder=e.initialCleanup(t)}return Object(Lt.a)(e,[{key:"dateTime",get:function(){var e=/(?<=Date and time: \w+, )\w+ \d+(th|rd|st|nd)? \w+/.exec(this.textOrder);if(!e)throw new Error(zt("date"));var t=new Date("".concat(At(e[0]),"Z")),n=/\d+:\d+/.exec(this.textOrder)[0];return new Date("\n    ".concat(t.getFullYear(),"\n    ").concat(t.getMonth()+1,"\n    ").concat(t.getDate(),"\n    ").concat(n))}},{key:"duration",get:function(){var e=/\d+(\.\d+)?(?=\sh.)/.exec(this.textOrder);if(!e)throw new Error(zt("duration"));return e[0]}},{key:"paymentType",get:function(){var e="Payment Type: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("PRICE"),r=this.textOrder.slice(t,n).trim(),a=r.match(/\W+/g).filter((function(e){return"/"!==e&&" "!==e&&"\xe4"!==e})),i=r.indexOf(a[0].trim()),c=r.slice(0,i).trim();if(!c)throw new Error(zt("payment type"));if(!I.map((function(e){return e.name})).includes(c))throw new Error("Unrecognized payment type");return c}},{key:"boxesAmount",get:function(){var e=this.textOrder.indexOf("\u2014 Amount: "),t=this.textOrder.indexOf("\u2014 Price"),n=this.textOrder.slice(e,t);return n&&n.match(/\d+/)[0]}},{key:"boxesDeliveryDate",get:function(){var e=this.textOrder.indexOf("\u2014 Booking time starts: ");if(-1===e)return null;var t=e+"\u2014 Booking time starts: ".length,n=this.textOrder.indexOf("\u2014 Booking time ends"),r=this.textOrder.slice(t,n).replace();return new Date(At(r)).toISOString()}},{key:"boxesPickupDate",get:function(){var e=this.textOrder.indexOf("\u2014 Booking time ends: ");if(-1===e)return null;var t=e+"\u2014 Booking time ends: ".length,n=this.textOrder.indexOf("\u2014 Self pickup"),r=this.textOrder.slice(t,n).replace();return new Date(At(r)).toISOString()}},{key:"selfPickup",get:function(){var e="Self pickup: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("\u2014 Self return");return"Yes"===this.textOrder.slice(t,n).trim()}},{key:"selfReturn",get:function(){var e="Self return: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("Payment Type");return"Yes"===this.textOrder.slice(t,n).trim()}},{key:"movingBoxesPrice",get:function(){var e=this.textOrder.indexOf("\u2014 Price: "),t=this.textOrder.indexOf("\u2014 Booking time start"),n=this.textOrder.slice(e,t);return n&&n.match(/\d+/)[0]}},{key:"serviceName",get:function(){var e="Service: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("Accessories"),r=this.textOrder.slice(t,n).trim();if(!r)throw new Error(zt("service name"));if(!E.find((function(e){return e.name===r})))throw new Error("Unrecognized service name");return r}},{key:"addresses",get:function(){var e=this,t=["End location","Name"],n=[];return["Start location:","End location:"].forEach((function(r,a){var i=e.textOrder.indexOf(r)+r.length,c=e.textOrder.indexOf(t[a]),s=e.textOrder.slice(i,c).replaceAll(",","").trim(),o=s.slice(0,s.indexOf(" / ")),l=s.match(/\d{5}/);l=l&&l[0]||"";var u=s.slice(s.indexOf(" / ")+" / ".length),d=o.match(/\D+/);d=d&&d[0];var m=u.replace(l,"");if(m=m||null,(!/\d+/.test(u)||u.includes(l)&&u.length<15)&&(m=o.replace(l,""),d=(d=u.match(/\D+/))&&d[0]),m.includes(d)&&(m=m.replace(d,"")),0===a&&!m)throw new Error(zt("address"));n.push("".concat(m,", ").concat(l," ").concat(d).replace(/\s+/g," ").trim())})),n}},{key:"address",get:function(){return this.addresses[0]}},{key:"destination",get:function(){return Object(h.a)(this.addresses,2)[1]}},{key:"name",get:function(){var e="Name: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("Email"),r=this.textOrder.slice(t,n).trim();if(!r)throw new Error(zt("name"));return r}},{key:"email",get:function(){var e=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.exec(this.textOrder);if(!e)throw new Error(zt("email"));return e[0]}},{key:"phone",get:function(){var e=/(?<=Phone: )[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*/.exec(this.textOrder);if(!e)throw new Error(zt("phone"));return e[0].trim()}},{key:"comment",get:function(){var e=/(?<=Comment: )(.*\s*)*/.exec(this.textOrder);e=e?e[0]:"";var t=/\n\n\-\-\nT\xe4m\xe4 viesti l\xe4hetettiin sivustolta Paku24\.fi \(https:\/\/paku24\.fi\)/;return t.exec(e)&&(e=e.replace(t,"")),e}}],[{key:"initialCleanup",value:function(e){var t=e.split("\n"),n=[];return t.forEach((function(e){return n.push(e.trim())})),n.join("\n").replaceAll("\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014","").replaceAll("------------------------","")}}]),e}(),Mt=n(192),Rt=n(74),Ut={dateTime:new Date,duration:1,service:E[0],serviceName:E[0].name,paymentType:I[0].name,address:"",destination:"",name:"",email:"",phone:"",boxesDeliveryDate:(new Date).toISOString(),boxesPickupDate:(new Date).toISOString(),boxesAmount:0,selfPickup:!1,selfReturn:!1,comment:"",distance:Mt.insideCapital,hsy:!1,XL:!1,eventColor:null},Bt=Object.keys(Ut),Wt=function(){function e(t){Object(Pt.a)(this,e);var n,r=Object(It.a)(Bt);try{for(r.s();!(n=r.n()).done;){var a,i=n.value;this[i]=null!==(a=t[i])&&void 0!==a?a:Ut[i]}}catch(c){r.e(c)}finally{r.f()}this.dateTime=new Date(t.dateTime)}return Object(Lt.a)(e,[{key:"time",get:function(){return this.dateTime.toTimeString().slice(0,5)}},{key:"servicePrice",get:function(){var e=this,t=E.find((function(t){return t.name===e.serviceName}));return this.XL?t.priceXL:t.price}},{key:"boxesPrice",get:function(){var e=M()(this.boxesPickupDate).diff(M()(this.boxesDeliveryDate),R.timeUnit),t=this.boxesAmount*R.price*e;return this.selfPickup||(t+=R.deliveryFee),this.selfReturn||(t+=R.pickupFee),t}},{key:"ISODateString",get:function(){return"".concat(this.dateTime.toISOString().split("T")[0],"T").concat(this.time)}},{key:"confirmationDateString",get:function(){var e=this.dateTime.getDate(),t=this.dateTime.getMonth()+1,n=this.dateTime.getFullYear();return e<10&&(e="0".concat(e)),t<10&&(t="0".concat(t)),"".concat(e,"-").concat(t,"-").concat(n)}},{key:"fees",get:function(){var e=1*this.time.split(":")[0],t=this.dateTime.getDay(),n=this.dateTime.getDate(),r=[new Date(this.dateTime.getFullYear(),this.dateTime.getMonth()+1,0).getDate(),1],a=6===t||0===t,i=!a&&r.includes(n),c=e<8,s=e>=20,o="Lasku"===this.paymentType||"Lasku/Osamaksu"===this.paymentType||"Invoice/Instalment payment"===this.paymentType;return[a&&Ft.weekend,i&&Ft.firstOrLastDayOfTheMonth,c&&Ft.morning,s&&Ft.night,o&&Ft.bill].filter((function(e){return!1!==e}))}},{key:"eventColor",get:function(){var e=this;return this.color?this.color:this.serviceName?E.find((function(t){return t.name===e.serviceName})).eventColor:null},set:function(e){this.color=e}},{key:"serviceName",get:function(){return this.service.name},set:function(e){var t;this.service=E.find((function(t){return t.name===e})),this.eventColor=null===(t=E.find((function(t){return t.name===e})))||void 0===t?void 0:t.eventColor,this.hsy=Boolean(this.service.hsy)}},{key:"printFees",value:function(){var e="\n@feeName\n@feeAmount".repeat(this.fees.length);return this.fees.forEach((function(t){e=(e=e.replace("@feeName",t.name.toUpperCase())).replace("@feeAmount","".concat(t.amount,"\u20ac"))})),e}},{key:"prepareForSending",value:function(){for(var e={},t=0,n=Object.keys(Ut);t<n.length;t++){var r=n[t];"service"!==r&&(e[r]=this[r])}return e}},{key:"makeIcons",value:function(){var e=this.XL?Rt.size.XL:"",t=Rt.misc[this.distance]||"",n=this.fees.map((function(e){return"Laskulis\xe4"===e.name?"":Rt.fees[e.name]})).reduce((function(e,t){return e+t}),""),r=Rt.service[this.serviceName],a=Rt.payment[this.paymentType];return{move:"".concat(e).concat(t).concat(n).concat(r).concat(a),boxesDelivery:Rt.boxes.delivery,boxesPickup:Rt.boxes.pickup}}},{key:"makeCalendarEntries",value:function(){var e="".concat(this.makeIcons().move).concat(this.time,"(").concat(this.duration,"h)"),t="".concat(this.boxesAmount," ").concat(this.makeIcons().boxesDelivery," ").concat(this.boxesDeliveryDate.includes("T")?"".concat(M()(this.boxesDeliveryDate).format("HH:mm")," "):""),n="NOUTO ".concat(this.boxesAmount," ").concat(this.makeIcons().boxesPickup," ").concat(this.boxesPickupDate.includes("T")?"".concat(M()(this.boxesPickupDate).format("HH:mm")," "):"");return{move:{title:"".concat(e," ").concat(this.name),description:"".concat(e).concat(this.format({title:0,date:0,time:0,duration:0,paymentType:0},{removeFirstHeading:!0}))},boxesDelivery:{title:"".concat(t).concat(this.name),description:"".concat(t).concat(this.format({address:1,name:1,email:1,phone:1,boxes:1},{removeFirstHeading:!0}))},boxesPickup:{title:"".concat(n).concat(this.name),description:"".concat(n).concat(this.format({destination:1,name:1,email:1,phone:1,boxes:1},{removeFirstHeading:!0}))}}}},{key:"format",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.removeFirstHeading,r=void 0!==n&&n,a={title:1,date:1,time:1,duration:1,paymentType:1,address:1,destination:1,name:1,email:1,phone:1,boxes:1,comment:1},i=a;Object.keys(e).length>0&&Object.values(e).includes(1)?i=e:Object.values(e).includes(0)&&(i=Object(p.a)(Object(p.a)({},a),e));var c="";try{if(i.title&&(c+="VARAUKSEN TIEDOT\n"),i.date&&(c+="".concat(this.confirmationDateString,"\n")),i.time&&(c+="ALKAMISAIKA\n",c+="Klo ".concat(this.time," (+/-15min)\n")),i.duration&&(c+="ARVIOITU KESTO\n",c+="".concat(this.duration,"h (").concat(this.servicePrice,"\u20ac/h, ").concat(this.serviceName,")\n")),i.paymentType&&(c+="MAKSUTAPA\n",c+="".concat(this.paymentType).concat(this.printFees(),"\n")),i.address&&(c+="L\xc4HT\xd6PAIKKA\n",c+="".concat(this.address,"\n")),i.destination&&this.destination.length>5&&(c+="M\xc4\xc4R\xc4NP\xc4\xc4\n",c+="".concat(this.destination,"\n")),i.name&&(c+="NIMI\n",c+="".concat(this.name,"\n")),i.email&&this.email&&(c+="S\xc4HK\xd6POSTI\n",c+="".concat(this.email,"\n")),i.phone&&(c+="PUHELIN\n",c+="".concat(this.phone,"\n")),i.boxes&&this.boxesAmount>0){var s=M()(this.boxesDeliveryDate).format("DD-MM-YYYY ".concat(this.boxesDeliveryDate.includes("T")?"HH:mm":"")),o=M()(this.boxesPickupDate).format("DD-MM-YYYY ".concat(this.boxesPickupDate.includes("T")?"HH:mm":""));c+="MUUTTOLAATIKOT\n",c+="".concat(s," - ").concat(o,"\n"),this.selfPickup&&(c+="Itse nouto\n"),this.selfReturn&&(c+="Itse palautus\n"),c+="M\xe4\xe4r\xe4: ".concat(this.boxesAmount," kpl\n"),c+="Hinta: ".concat(this.boxesPrice,"\u20ac\n")}if(i.comment&&this.comment&&(c+="LIS\xc4TIETOJA\n",c+="".concat(this.comment,"\n")),r){var l=c.split("\n");l.shift(),c=l.join("\n")}}catch(u){console.error(u)}return c}}],[{key:"getEventForCalendar",value:function(e,t){return e.slice(e.indexOf(t))}},{key:"setupOrderFromText",value:function(t){return new Promise((function(n){var r,a={};r=Object(Ct.a)(t)?new e(JSON.parse(t)):new Yt(t);var i,c=Object(It.a)(Bt);try{for(c.s();!(i=c.n()).done;){var s=i.value;try{a[s]=r[s]}catch(l){Object(o.b)(l.message,{variant:"error"}),a[s]=null}}}catch(l){c.e(l)}finally{c.f()}return n(new e(a))}))}},{key:"default",value:function(){return new e(Ut)}}]),e}();function Ht(){var e=Object(r.useState)({text:"",id:null}),t=Object(h.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)({text:"",id:null}),c=Object(h.a)(i,2),s=c[0],l=c[1],u=Object(r.useState)(Wt.default()),d=Object(h.a)(u,2),m=d[0],j=d[1];Object(r.useEffect)((function(){var e=localStorage.getItem("confirmator_order"),t=localStorage.getItem("confirmator_rawOrder");e&&j(new Wt(JSON.parse(e))),t&&a(JSON.parse(t))}),[]),Object(r.useEffect)((function(){localStorage.setItem("confirmator_order",JSON.stringify(m.prepareForSending()))}),[m]),Object(r.useEffect)((function(){localStorage.setItem("confirmator_rawOrder",JSON.stringify(n))}),[n]);var b=Object(r.useRef)(null),x=Object(r.useRef)(null);function O(e){return m[e.target.name]="checkbox"===e.target.type?e.target.checked:e.target.value,j(new Wt(m))}function g(e){a(Object(p.a)(Object(p.a)({},n),{},{id:e.id||null,text:e.text||e}))}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;Wt.setupOrderFromText(e.text).then((function(t){return j(t),l({id:e.id,text:t.format()})})).catch((function(e){return Object(o.b)(e.message,{variant:"error"})}))}return Object(v.jsxs)("div",{className:"flex-container",children:[Object(v.jsx)(me,{elementRef:b,rawOrderText:n.text,handleClick:g}),Object(v.jsx)(q,{order:m,handleChange:O}),Object(v.jsx)(ve,{elementRef:x,transformDisabled:!n.text,copyDisabled:!s.text,handleOrderTransformFromText:y,handleOrderTransformFromEditor:function(){return l({id:n.id,text:m.format()})}}),Object(v.jsx)(je,{elementRef:x,transformedOrderText:s.text,handleClick:function(e){l(Object(p.a)(Object(p.a)({},s),{},{text:e}))}}),Object(v.jsx)(ne,{handleChange:O,order:m}),Object(v.jsx)(oe,{order:m,shouldValidate:s.text}),Object(v.jsx)(ut,{order:m,orderId:n.id,transformedOrder:s,handleResetClick:function(){a({text:"",id:null}),l({text:"",id:null}),j(Wt.default())},orderPoolUrl:"/confirmator/order-pool"}),Object(v.jsx)(f.b,{path:"/confirmator/order-pool",children:Object(v.jsx)(Et,{handleExport:function(e){g(e),y(e),setTimeout((function(){return b.current.scrollIntoView({smooth:!0})}),700)}})})]})}var Jt=n(395),Xt=n(390),Vt=n(394),Kt=n(393),qt=n(389),_t=n(391),Gt=n(392),$t=n(396),Qt=n(382),Zt=n(193),en=n.n(Zt),tn=n(194),nn=n.n(tn);n(328);function rn(e){var t=e.periodFrom,n=e.periodTo,r=Math.ceil(n.diff(t,"week",!0)),a=Array(r).fill(t.isoWeek()).map((function(e,t){return e+t})),i=t.startOf("isoWeek").year();return a.map((function(e){return{periodFrom:M()().year(i).isoWeek(e).startOf("isoWeek").toISOString(),periodTo:M()().year(i).isoWeek(e+1).startOf("isoWeek").toISOString()}}))}function an(e,t){var n=[];return t.forEach((function(t){var r=e.filter((function(e){return M()(e.confirmedAt).isSameOrAfter(M()(t.periodFrom))&&M()(e.confirmedAt).isBefore(M()(t.periodTo))}));n.push(r)})),n}function cn(e,t){return t.map((function(t,n){return{name:e[n],orderCount:t}}))}function sn(e,t){return cn(e.map((function(e,n){return"Week ".concat(M()(t[n].periodFrom).isoWeek())})),e.map((function(e){return e.length})))}function on(){var e=M()().startOf("month"),t=e.add(1,"month").startOf("month"),n=Object(r.useState)({periodFrom:e,periodTo:t}),a=Object(h.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)({}),o=Object(h.a)(s,2),l=o[0],u=o[1],d=Object(r.useState)(null),b=Object(h.a)(d,2),f=b[0],x=b[1],O=Object(r.useState)([]),g=Object(h.a)(O,2),k=g[0],w=g[1],C=Object(r.useState)([]),S=Object(h.a)(C,2),N=S[0],T=S[1];function D(e){c(Object(p.a)(Object(p.a)({},i),{},Object(ge.a)({},e.target.name,M()(e.target.value))))}function E(e){x(e.currentTarget);var t=k[e.currentTarget.dataset.rownumber],n={};t.forEach((function(e){var t=new Date(e.confirmedAt).toLocaleDateString("en-US",{weekday:"long"});null==n[t]&&(n[t]=[]),n[t].push(e)})),u(n)}Object(r.useEffect)(Object(j.a)(m.a.mark((function e(){var t,n,r,a,c,s,o,l,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=rn(i),n=t[0],r=t[t.length-1],e.next=5,st.getConfirmedOrders({periodFrom:n.periodFrom,periodTo:r.periodTo});case 5:a=e.sent,c=a.confirmedOrders,s=an(c,t),o=an(c,[i]),l=sn(s,t),u=cn(["Total during specified period"],o.map((function(e){return e.length}))),w(s),T([].concat(Object(ft.a)(l),Object(ft.a)(u)));case 13:case"end":return e.stop()}}),e)}))),[i]);var I=Boolean(f),P=function(e){return e.orderCount>0&&!e.name.includes("Total")};return Object(v.jsxs)("div",{className:"statistics",children:[Object(v.jsxs)("div",{className:"row-flex-start gap-1 dates",children:[Object(v.jsx)(y.a,{onChange:D,name:"periodFrom",label:"Start of period",type:"date",value:i.periodFrom.format("YYYY-MM-DD")}),Object(v.jsx)(y.a,{onChange:D,name:"periodTo",label:"End of period",type:"date",value:i.periodTo.format("YYYY-MM-DD")})]}),Object(v.jsx)(qt.a,{component:Qt.a,children:Object(v.jsxs)(Xt.a,{"aria-label":"statistics table",children:[Object(v.jsx)(_t.a,{children:Object(v.jsxs)(Gt.a,{children:[Object(v.jsx)(Kt.a,{children:"Statistics"}),Object(v.jsx)(Kt.a,{align:"right",children:"Confirmed orders"})]})}),Object(v.jsx)(Vt.a,{children:N.map((function(e,t){return Object(v.jsxs)(Gt.a,{children:[Object(v.jsx)(Kt.a,{component:"th",scope:"row",children:e.name}),Object(v.jsxs)(Kt.a,{align:"right",children:[Object(v.jsx)(Jt.a,{style:{padding:10},placement:"left",open:I,anchorEl:f,children:Object(v.jsx)($t.a,{mouseEvent:"onMouseDown",touchEvent:"onTouchStart",onClickAway:function(){return x(null)},children:Object(v.jsx)(Qt.a,{children:Object(v.jsx)("div",{style:{padding:10},children:Object.entries(l).map((function(e){var t=Object(h.a)(e,2),n=t[0],r=t[1];return Object(v.jsxs)("div",{children:[n,": ",r.length]},n)}))})})})}),Object(v.jsx)(U.a,{"data-rownumber":t,size:"small",onClick:P(e)?E:null,children:e.orderCount})]})]},e.name)}))})]})})]})}M.a.extend(nn.a),M.a.extend(en.a);n(329);var ln=n.p+"static/media/paku24-logo.7602fc02.png";function un(e){var t=e.isLogged;return Object(v.jsx)("div",{className:"logo",children:Object(v.jsxs)("div",{children:[Object(v.jsx)(s.b,{to:t?"/":"/login",children:Object(v.jsx)("img",{src:ln,alt:"Logo",width:"125px"})}),Object(v.jsx)("span",{className:"text",children:"CONFIRMATOR"})]})})}var dn="/api/login",mn=Ie.a.create();function jn(){return(jn=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mn.post(dn,t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hn(){return(hn=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn.post("".concat(dn,"/token"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}mn.interceptors.response.use((function(e){return e}),function(){var e=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,"access token expired"!==t.response.data.error){e.next=13;break}return e.prev=2,e.next=5,Ie.a.post("/api/token");case 5:return e.next=7,Ie.a.post("/api/token/is-new");case 7:return e.abrupt("return",mn(n));case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",e.t0);case 13:return e.abrupt("return",Promise.reject(t));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}());var pn={loginWithCredentials:function(e){return jn.apply(this,arguments)},loginWithAccessToken:function(){return hn.apply(this,arguments)}},bn=n(196),fn=n.n(bn),xn=function(e){var t=e.notification,n="black";return t.toLowerCase().includes("error")&&(n="red"),Object(v.jsx)(v.Fragment,{children:t?Object(v.jsxs)("div",{style:{backgroundColor:"white",color:n,padding:"10px",width:"80%",borderBottom:"3px solid darkgrey",fontSize:"small",display:"flex",alignItems:"center",marginBottom:"10px"},children:[Object(v.jsx)(fn.a,{}),Object(v.jsx)("span",{style:{marginLeft:"10px"},children:t})]}):null})};function On(e){var t,n=e.updateUser,a={marginBottom:"7px",backgroundColor:"white"},i=Object(f.g)(),c=null===i||void 0===i||null===(t=i.location.state)||void 0===t?void 0:t.referrer,o=Object(r.useState)(""),l=Object(h.a)(o,2),u=l[0],d=l[1],p=Object(r.useState)(""),b=Object(h.a)(p,2),x=b[0],g=b[1],k=Object(r.useState)(!1),w=Object(h.a)(k,2),C=w[0],S=w[1],N=Object(r.useState)(!1),T=Object(h.a)(N,2),D=T[0],E=T[1],I=Object(r.useState)(""),P=Object(h.a)(I,2),L=P[0],F=P[1];function z(){return(z=Object(j.a)(m.a.mark((function e(t){var r,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),F("Working..."),e.prev=2,e.next=5,pn.loginWithCredentials({username:u,password:x});case 5:r=e.sent,a=r.user,F("Done"),i.push((null===c||void 0===c?void 0:c.length)>1?c:"/confirmator"),n(a),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),E(!0),S(!0),setTimeout((function(){return S(!1)}),2e3),F("Error: ".concat((null===(s=e.t0.response)||void 0===s?void 0:s.data.error)||"Mystery \ud83d\udc7b"));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return Object(v.jsx)("div",{style:{margin:"30px 5px"},children:Object(v.jsxs)("div",{style:{width:"95%",margin:"0 auto",padding:20,backgroundColor:"lightgrey",borderBottom:"4px solid darkgrey"},children:[Object(v.jsxs)("div",{style:{color:"black",fontSize:"1.3rem",letterSpacing:"0.7px",marginTop:"10px",marginBottom:"15px"},children:["LOGIN",Object(v.jsxs)("span",{style:{color:"black",fontSize:"1.0rem",letterSpacing:"0.2px"},children:[" ","or ",Object(v.jsx)(s.b,{to:"/register",children:"request access"})]})]}),Object(v.jsx)(xn,{notification:L}),Object(v.jsxs)("form",{onSubmit:function(e){return z.apply(this,arguments)},style:{paddingBottom:"10px",height:"80%",display:"flex",flexFlow:"column wrap",justifyContent:"space-evenly"},children:[Object(v.jsx)(y.a,{className:"flex-item",style:a,error:D,required:!0,name:"username",value:u,onChange:function(e){var t=e.target;return d(t.value)},label:"Username",variant:"filled",size:"small"}),Object(v.jsx)(y.a,{className:"flex-item",style:a,error:D,type:"password",required:!0,value:x,name:"password",onChange:function(e){var t=e.target;return g(t.value)},label:"Password",variant:"filled",size:"small"}),Object(v.jsx)(O.a,{className:"flex-item",style:a,type:"submit",disabled:C,variant:"contained",size:"small",children:"Login"})]})]})})}function vn(){var e={marginBottom:"7px",backgroundColor:"white"},t=Object(r.useState)(""),n=Object(h.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(""),o=Object(h.a)(c,2),l=o[0],u=o[1],d=Object(r.useState)(""),p=Object(h.a)(d,2),b=p[0],f=p[1],x=Object(r.useState)(""),g=Object(h.a)(x,2),k=g[0],w=g[1],C=Object(r.useState)(!1),S=Object(h.a)(C,2),N=S[0],T=S[1];function D(e){return E.apply(this,arguments)}function E(){return(E=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ie.a.post("/api/registration/request-access",t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(j.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),T(!0),w("Working..."),e.prev=3,e.next=6,D({name:a,email:l,purpose:b});case 6:n=e.sent,w(null===n||void 0===n?void 0:n.message),i(""),u(""),f(""),T(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),T(!1),w("Error: ".concat((null===e.t0||void 0===e.t0||null===(r=e.t0.response.data)||void 0===r?void 0:r.error)||"Mystery \ud83d\udc7b"));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}return Object(v.jsx)("div",{style:{margin:"30px 5px"},children:Object(v.jsxs)("div",{style:{width:"95%",padding:20,margin:"0 auto",backgroundColor:"lightgrey",borderBottom:"4px solid darkgrey"},children:[Object(v.jsxs)("div",{style:{color:"black",fontSize:"1.3rem",letterSpacing:"0.7px",marginTop:"10px",marginBottom:"15px"},children:["REQUEST ACCESS",Object(v.jsxs)("span",{style:{color:"black",fontSize:"1.0rem",letterSpacing:"0.2px"},children:[" ","or ",Object(v.jsx)(s.b,{to:"/login",children:"login"})]})]}),Object(v.jsx)(xn,{notification:k}),Object(v.jsxs)("form",{onSubmit:function(e){return I.apply(this,arguments)},style:{paddingBottom:"10px",height:"80%",display:"flex",flexFlow:"column wrap",justifyContent:"space-evenly"},children:[Object(v.jsx)(y.a,{style:e,required:!0,name:"name",value:a,onChange:function(e){var t=e.target;return i(t.value)},label:"Name",variant:"filled",size:"small"}),Object(v.jsx)(y.a,{style:e,type:"email",required:!0,value:l,name:"email",onChange:function(e){var t=e.target;return u(t.value)},label:"Email",variant:"filled",size:"small"}),Object(v.jsx)(y.a,{style:e,type:"text",required:!0,multiline:!0,rows:"3",value:b,name:"purpose",onChange:function(e){var t=e.target;return f(t.value)},label:"Why do you want to use this application?",variant:"filled",size:"small"}),Object(v.jsx)(O.a,{style:e,type:"submit",disabled:N,variant:"contained",size:"small",children:"Send request"})]})]})})}n(330);var gn="/api/logout";function yn(){return(yn=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ie.a.post(gn).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kn={logout:function(){return yn.apply(this,arguments)}},wn=n(197),Cn=n.n(wn);function Sn(e){var t=e.handleClick;return Object(v.jsxs)(O.a,{style:{backgroundColor:"lightgrey"},variant:"outlined",size:"small",onClick:t,children:["Logout ",Object(v.jsx)(Cn.a,{})]})}function Nn(e){var t=e.user,n=e.logoutUser;return Object(v.jsxs)("div",{style:{backgroundColor:"darkgrey",padding:"15px",display:"flex",justifyContent:"space-between",borderTop:"3.5px solid lightgrey",marginTop:"auto"},children:[Object(v.jsx)("div",{style:{paddingTop:"2px",marginRight:"20px"},children:Object(v.jsxs)("span",{style:{fontFamily:"monospace"},children:[" ",t.username,Object(v.jsx)("br",{}),t.name]})}),Object(v.jsx)(Sn,{handleClick:function(){return kn.logout().then(n)}})]})}function Tn(e){var t=e.error;return Object(v.jsxs)("div",{role:"alert",children:[Object(v.jsx)("p",{children:"Something went wrong:"}),Object(v.jsx)("pre",{style:{color:"red"},children:t.message})]})}function Dn(e){var t,n=e.dependsOn,r=e.path,a=e.children,i=Object(b.a)(e,["dependsOn","path","children"]),c=Object(f.g)();null!==n&&"Loading"!==n||(t=c.location.pathname);var s="Loading"===n,o=null===n&&Object(v.jsx)(f.a,{to:{pathname:"/login",state:{referrer:t}}});return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(wt,{loading:s,redirectComponent:o,children:Object(v.jsx)(f.b,Object(p.a)(Object(p.a)({},i),{},{path:r,children:a}))})})}var En=function(){var e,t=Object(r.useState)("Loading"),n=Object(h.a)(t,2),a=n[0],i=n[1],c=Object(f.g)();return null!==a&&"Loading"!==a||(e=c.location.pathname),Object(r.useEffect)(Object(j.a)(m.a.mark((function t(){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ae.setupInterceptor({logout:function(){return i(null)},notificate:function(){return Object(o.b)("You were logged out for security reasons. Your work has been saved. Login to continue.",{variant:"warning",autoHideDuration:1e4})}}),t.prev=1,t.next=4,pn.loginWithAccessToken();case 4:return n=t.sent,r=n.user,c.push(e),t.abrupt("return",i(r));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",i(null));case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(un,{isLogged:null!==a&&"Loading"!==a}),Object(v.jsxs)(x.ErrorBoundary,{FallbackComponent:Tn,children:[Object(v.jsxs)(f.d,{children:[Object(v.jsx)(f.b,{path:"/register",children:Object(v.jsx)(vn,{})}),Object(v.jsx)(f.b,{path:"/login",children:null===a?Object(v.jsx)(On,{updateUser:i}):Object(v.jsx)(f.a,{to:"/"})}),Object(v.jsx)(Dn,{dependsOn:a,path:"/confirmator",children:Object(v.jsx)(Ht,{})}),Object(v.jsx)(Dn,{dependsOn:a,path:"/statistics",children:Object(v.jsx)(on,{})}),Object(v.jsx)(Dn,{dependsOn:a,exact:!0,path:"/",children:Object(v.jsx)(g,{})})]}),Object(v.jsx)(Dn,{dependsOn:a,path:"/",children:Object(v.jsx)(Nn,{user:a,logoutUser:function(){return i(null)}})})]})]})},In=(n(331),a.a.createRef());c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsxs)(s.a,{basename:"/app",children:[Object(v.jsx)(o.a,{action:function(e){return Object(v.jsx)(u.a,{onClick:function(){In.current.closeSnackbar(e)}})},ref:In,maxSnack:3,dense:!0,autoHideDuration:5e3,anchorOrigin:{horizontal:"left",vertical:"top"}}),Object(v.jsx)(En,{})]})}),document.getElementById("root"))},50:function(e){e.exports=JSON.parse('[{"id":1,"name":"Pakettiauto ja kuljettaja","price":50,"priceXL":50,"eventColor":"1"},{"id":2,"name":"Pakettiauto ja muuttomies","price":70,"priceXL":70,"eventColor":"7"},{"id":3,"name":"Pakettiauto ja kaksi muuttomiest\xe4","price":90,"priceXL":90,"eventColor":"9"},{"id":4,"name":"Nouto/tyhjennyspalvelu yhdell\xe4 kantajalla","price":70,"priceXL":70,"eventColor":"7","hsy":true},{"id":5,"name":"Nouto/tyhjennyspalvelu kahdella kantajalla","price":90,"priceXL":90,"eventColor":"9","hsy":true},{"id":6,"name":"Van and driver (doesn\'t assist in carrying)","price":50,"priceXL":50,"eventColor":"1"},{"id":7,"name":"Van and mover","price":70,"priceXL":70,"eventColor":"7"},{"id":8,"name":"Van and two movers","price":90,"priceXL":90,"eventColor":"9"},{"id":9,"name":"Recycle service with one carrier","price":70,"priceXL":70,"eventColor":"7","hsy":true},{"id":10,"name":"Recycle service with two carriers","price":100,"priceXL":100,"eventColor":"9","hsy":true}]')},58:function(e){e.exports=JSON.parse('{"minAmount":10,"maxAmount":50,"step":5,"minPeriod":7,"maxPeriod":null,"price":0.1,"timeUnit":"day","deliveryFee":14,"pickupFee":14}')},74:function(e){e.exports=JSON.parse('{"payment":{"Maksukortti":"\ud83d\udcb3","Bank card":"\ud83d\udcb3","K\xe4teinen":"\ud83c\udf81","Cash":"\ud83c\udf81","Lasku":"\ud83d\udcdc","Lasku/Osamaksu":"\ud83d\udcdc","Invoice/Instalment payment":"\ud83d\udcdc"},"service":{"Pakettiauto ja kuljettaja":"\ud83d\ude9a","Pakettiauto ja muuttomies":"\ud83d\ude9b","Pakettiauto ja kaksi muuttomiest\xe4":"\ud83d\ude9b\ud83d\ude9b","Nouto/tyhjennyspalvelu yhdell\xe4 kantajalla":"\ud83d\uded2","Nouto/tyhjennyspalvelu kahdella kantajalla":"\ud83d\uded2\ud83d\uded2","Van and driver (doesn\'t assist in carrying)":"\ud83d\ude9a","Van and mover":"\ud83d\ude9b","Van and two movers":"\ud83d\ude9b\ud83d\ude9b","Recycle service with one carrier":"\ud83d\uded2","Recycle service with two carriers":"\ud83d\uded2\ud83d\uded2"},"fees":{"Viikonloppulis\xe4":"\ud83c\udf89","Pyh\xe4lis\xe4":"\ud83c\udf89","Kuunvaihdelis\xe4":"\ud83c\udf89","Aamulis\xe4":"\ud83c\udf1e","Y\xf6lis\xe4":"\ud83c\udf1a"},"misc":{"outsideCapital":"\ud83d\udea7","fromOutsideToCapital":"\ud83d\udea7"},"size":{"XL":"XL"},"boxes":{"delivery":"\ud83d\udce6","pickup":"\ud83d\udce6"}}')},83:function(e){e.exports=JSON.parse('[{"id":1,"name":"Maksukortti"},{"id":2,"name":"K\xe4teinen"},{"id":3,"name":"Lasku/Osamaksu"},{"id":4,"name":"Bank card"},{"id":5,"name":"Cash"},{"id":6,"name":"Invoice/Instalment payment"}]')},90:function(e){e.exports=JSON.parse('{"morning":{"name":"Aamulis\xe4","amount":20},"night":{"name":"Y\xf6lis\xe4","amount":20},"holiday":{"name":"Pyh\xe4lis\xe4","amount":15},"weekend":{"name":"Viikonloppulis\xe4","amount":15},"firstOrLastDayOfTheMonth":{"name":"Kuunvaihdelis\xe4","amount":15},"bill":{"name":"Laskulis\xe4","amount":14}}')}},[[332,1,2]]]);
//# sourceMappingURL=main.9fee7429.chunk.js.map