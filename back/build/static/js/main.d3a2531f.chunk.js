(this["webpackJsonppaku24-confirmator-front"]=this["webpackJsonppaku24-confirmator-front"]||[]).push([[0],{190:function(e){e.exports=JSON.parse('{"insideCapital":"insideCapital","outsideCapital":"outsideCapital","fromCapitalToOutside":"fromCapitalToOutside","fromOutsideToCapital":"fromOutsideToCapital"}')},215:function(e,t,n){},221:function(e,t,n){},302:function(e,t,n){},303:function(e,t,n){},322:function(e,t,n){},323:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(18),c=n.n(i),s=n(40),o=n(27),l=n(197),d=n.n(l),u=n(8),m=n.n(u),j=n(12),p=n(10),h=n(9),b=n(70),f=n(26),x=n(196),O=n(116),v=(n(215),n(1));function g(){var e=Object(f.g)();function t(t){e.push(t.currentTarget.name)}return Object(v.jsxs)("div",{className:"hub",children:[Object(v.jsx)(O.a,{onClick:t,name:"confirmator",variant:"contained",className:"hub-block",children:"Confirmator"}),Object(v.jsx)(O.a,{onClick:t,name:"statistics",variant:"contained",className:"hub-block",children:"Statistics"})]})}var y=n(37),k=(n(221),n(392)),w=n(177),S=n(332),C=n(94),T=n(88),N=n.n(T),D=n(24),E=n(393),P=n(76),I=n(82),L=n(382),z=n(396),F=n(178),A=n.n(F),Y=n(381),M=n(20),R=n.n(M),U=n(57),W=n(198),H=n(377),B=n(175),X=n.n(B);function J(e){var t=e.open,n=e.clickable,r=void 0===n||n,i=e.label,c=e.icon,s=e.style,o=e.containerStyle,l=e.children,d=Object(a.useState)(!1),u=Object(p.a)(d,2),m=u[0],j=u[1],b="object"===typeof i?function(){return i}:function(){return Object(v.jsx)(O.a,{style:{marginLeft:0,paddingLeft:"0.5rem",marginRight:0,paddingRight:"0.5rem"},variant:"text",size:"small",label:i})};return Object(v.jsxs)("div",{style:o,children:[Object(v.jsxs)("div",{style:Object(h.a)({display:"flex",alignItems:"center",cursor:r?"pointer":"auto",pointerEvents:r?"all":"none"},s),onClick:function(){return j(!m)},children:[c,Object(v.jsx)(b,{}),r&&Object(v.jsx)(W.a,{style:{padding:0},size:"small",onClick:function(){return j(!m)},children:Object(v.jsx)(X.a,{style:{transform:m?"rotate(0.5turn)":""}})})]}),Object(v.jsx)(H.a,{in:t||m,children:l})]})}for(var K=[0],V=U.minAmount;V<=U.maxAmount;V+=U.step)K.push(V);function q(e){var t=e.order,n=void 0===t?{}:t,r=e.handleChange,i=e.style,c=Object(a.useState)(!0),s=Object(p.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)(!0),u=Object(p.a)(d,2),m=u[0],j=u[1],b=o?E.a:Y.a,f=m?E.a:Y.a;Object(a.useEffect)((function(){l(n.boxesDeliveryDate.includes("T")),j(n.boxesPickupDate.includes("T"))}),[n.boxesDeliveryDate,n.boxesPickupDate]);var x=Object(a.useState)(!1),O=Object(p.a)(x,2),g=O[0],y=O[1],k=Object(a.useState)(!1),S=Object(p.a)(k,2),T=S[0],P=S[1];Object(a.useEffect)((function(){var e,t;y(null!==(e=n.selfPickup)&&void 0!==e&&e),P(null!==(t=n.selfReturn)&&void 0!==t&&t)}),[n.selfPickup,n.selfReturn]);var I=function(e,t,n){return r({target:{name:e,value:n?new Date(t).toISOString():R()(t).format().split("T")[0]}})};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(J,{style:{width:"100%",gap:"0.25rem"},containerStyle:Object(h.a)({width:"100%",border:"1px solid lightgray",padding:"0.5rem",borderRadius:"0.25rem"},i),label:Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.3rem"},children:[Object(v.jsx)(A.a,{})," Boxes"]}),children:Object(v.jsxs)("div",{style:{margin:"1.25rem 0.5rem 0.5rem"},children:[Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(D.a,{utils:C.a,locale:N.a,children:Object(v.jsx)(b,{ampm:!1,format:o?"DD.MM.YYYY HH:mm":"DD.MM.YYYY",minutesStep:15,value:n.boxesDeliveryDate,onChange:function(e){return I("boxesDeliveryDate",new Date(e),o)},DialogProps:{disableScrollLock:!0}})}),Object(v.jsx)(L.a,{size:"small",style:{display:"block",marginLeft:0},control:Object(v.jsx)(z.a,{checked:o,onChange:function(){var e=!o;l(e),I("boxesDeliveryDate",n.boxesDeliveryDate,e)},color:"primary"}),label:"Include time",labelPlacement:"start"})]}),Object(v.jsx)("div",{style:{fontSize:"1.25rem"},children:"\u2013"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(D.a,{utils:C.a,locale:N.a,children:Object(v.jsx)(f,{ampm:!1,format:m?"DD.MM.YYYY HH:mm":"DD.MM.YYYY",minutesStep:15,value:n.boxesPickupDate,onChange:function(e){return I("boxesPickupDate",new Date(e),m)},DialogProps:{disableScrollLock:!0}})}),Object(v.jsx)(L.a,{size:"small",style:{display:"block",marginLeft:0},control:Object(v.jsx)(z.a,{checked:m,onChange:function(){var e=!m;j(e),I("boxesPickupDate",n.boxesPickupDate,e)},color:"primary"}),label:"Include time",labelPlacement:"start"})]})]}),Object(v.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[Object(v.jsx)(w.a,{className:"time-duration",style:{maxWidth:"9rem",marginTop:"0.5rem"},name:"boxesAmount",value:null===n||void 0===n?void 0:n.boxesAmount,onChange:r,variant:"filled",children:K.map((function(e){return Object(v.jsx)("option",{value:e,children:e},e)}))}),Object(v.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[Object(v.jsx)(L.a,{size:"small",style:{display:"block",marginLeft:0},control:Object(v.jsx)(z.a,{checked:g,onChange:function(){var e=!g;y(e),r({target:{name:"selfPickup",value:e}})},color:"primary"}),label:"Self pickup",labelPlacement:"start"}),Object(v.jsx)(L.a,{size:"small",style:{display:"block",marginLeft:0},control:Object(v.jsx)(z.a,{checked:T,onChange:function(){var e=!T;P(e),r({target:{name:"selfReturn",value:e}})},color:"primary"}),label:"Self return",labelPlacement:"start"})]})]})]})})})}function _(e){var t=e.order,n=e.handleChange,a={marginTop:5},r={marginLeft:5,marginRight:5};return N.a.weekStart=1,Object(v.jsxs)("div",{className:"basic-flex",style:{marginTop:"5px"},children:[Object(v.jsxs)("div",{className:"flex-100-space-between flex-item",style:r,children:[Object(v.jsx)(D.a,{utils:C.a,locale:N.a,children:Object(v.jsx)(E.a,{ampm:!1,format:"DD-MM-YYYY HH:mm",minutesStep:15,style:r,className:"time-duration",value:t.dateTime,onChange:function(e){return t="dateTime",a=new Date(e),n({target:{name:t,value:a}});var t,a},DialogProps:{disableScrollLock:!0}})}),Object(v.jsxs)(w.a,{className:"time-duration",style:Object(h.a)(Object(h.a)({},r),{},{paddingLeft:10}),name:"duration",value:null===t||void 0===t?void 0:t.duration,onChange:n,children:[Object(v.jsx)("option",{value:1,children:"1h"}),Object(v.jsx)("option",{value:1.5,children:"1.5h"}),Object(v.jsx)("option",{value:2,children:"2h"}),Object(v.jsx)("option",{value:2.5,children:"2.5h"}),Object(v.jsx)("option",{value:3,children:"3h"}),Object(v.jsx)("option",{value:3.5,children:"3.5h"}),Object(v.jsx)("option",{value:4,children:"4h"}),Object(v.jsx)("option",{value:4.5,children:"4.5h"}),Object(v.jsx)("option",{value:5,children:"5h"}),Object(v.jsx)("option",{value:5.5,children:"5.5h"}),Object(v.jsx)("option",{value:6,children:"6h"}),Object(v.jsx)("option",{value:6.5,children:"6.5h"}),Object(v.jsx)("option",{value:7,children:"7h"}),Object(v.jsx)("option",{value:7.5,children:"7.5h"}),Object(v.jsx)("option",{value:8,children:"8h"}),Object(v.jsx)("option",{value:8.5,children:"8.5h"}),Object(v.jsx)("option",{value:9,children:"9h"}),Object(v.jsx)("option",{value:9.5,children:"9.5h"}),Object(v.jsx)("option",{value:10,children:"10h"})]})]}),Object(v.jsx)(w.a,{fullWidth:!0,style:r,className:"flex-item",name:"serviceName",value:null===t||void 0===t?void 0:t.serviceName,onChange:n,children:P.map((function(e){return Object(v.jsx)("option",{value:e.name,children:e.name},e.id)}))}),Object(v.jsx)(w.a,{fullWidth:!0,style:r,className:"flex-item",name:"paymentType",value:null===t||void 0===t?void 0:t.paymentType,onChange:n,children:I.map((function(e){var t=e.name,n=e.id;return Object(v.jsx)("option",{value:t,children:t},n)}))}),Object(v.jsx)(k.a,{fullWidth:!0,style:a,className:"flex-item",required:!0,name:"address",value:null===t||void 0===t?void 0:t.address,onChange:n,label:"Address",variant:"outlined",size:"small"}),Object(v.jsx)(k.a,{fullWidth:!0,multiline:!0,style:a,className:"flex-item",name:"destination",value:null===t||void 0===t?void 0:t.destination,onChange:n,label:"Destination",variant:"outlined",size:"small"}),Object(v.jsx)(k.a,{fullWidth:!0,required:!0,style:a,className:"flex-item",name:"name",value:null===t||void 0===t?void 0:t.name,onChange:n,label:"Name",variant:"outlined",size:"small"}),Object(v.jsx)(k.a,{fullWidth:!0,style:a,className:"flex-item",name:"email",value:null===t||void 0===t?void 0:t.email,onChange:n,type:"email",label:"Email",variant:"outlined",size:"small"}),Object(v.jsx)(k.a,{fullWidth:!0,style:a,className:"flex-item",required:!0,name:"phone",value:null===t||void 0===t?void 0:t.phone,onChange:n,label:"Phonenumber",variant:"outlined",size:"small"}),Object(v.jsx)(q,{style:{marginTop:a.marginTop},order:t,handleChange:n}),Object(v.jsx)(S.a,{style:a,className:"flex-item textarea-2",rowsMin:3,cols:27,name:"comment",value:null===t||void 0===t?void 0:t.comment,placeholder:"Additional information.",onChange:n})]})}var $=n(380),G=n(379),Q=n(395),Z=n(397);function ee(e){var t=e.handleChange,n=e.order;return Object(v.jsxs)("div",{className:"checkbox-container",children:[Object(v.jsxs)(G.a,{className:"checkbox-distance flex-item",hiddenLabel:!1,size:"small",children:[Object(v.jsx)($.a,{component:"legend",children:"Pick one:"}),Object(v.jsxs)(Z.a,{value:n.distance,onChange:t,children:[Object(v.jsx)(L.a,{name:"distance",value:"insideCapital",control:Object(v.jsx)(Q.a,{color:"default"}),label:"\ud83c\udfd9 Inside capital"}),Object(v.jsx)(L.a,{name:"distance",value:"outsideCapital",control:Object(v.jsx)(Q.a,{color:"default"}),label:"\ud83c\udfde Outside capital"}),Object(v.jsx)(L.a,{name:"distance",value:"fromCapitalToOutside",control:Object(v.jsx)(Q.a,{color:"default"}),label:"\ud83c\udfd9->\ud83c\udfde From capital"}),Object(v.jsx)(L.a,{name:"distance",value:"fromOutsideToCapital",control:Object(v.jsx)(Q.a,{color:"default"}),label:"\ud83c\udfde->\ud83c\udfd9 To capital"})]})]}),Object(v.jsxs)(G.a,{className:"basic-flex",size:"small",children:[Object(v.jsx)(L.a,{size:"small",className:"flex-item",control:Object(v.jsx)(z.a,{checked:n.hsy,onChange:t,color:"primary"}),name:"hsy",label:"\u267b HSY",labelPlacement:"start"}),Object(v.jsx)(L.a,{className:"flex-item",control:Object(v.jsx)(z.a,{checked:n.altColorPalette,onChange:t,color:"primary"}),name:"altColorPalette",label:"Second car",labelPlacement:"start"}),Object(v.jsx)(L.a,{className:"flex-item",control:Object(v.jsx)(z.a,{checked:n.XL,onChange:t,color:"primary"}),name:"XL",label:"XL",labelPlacement:"start"})]})]})}var te=n(95),ne=n.n(te),ae=n(179),re=n.n(ae);function ie(e){var t=e.validationArray,n={color:"red"};return Object(v.jsx)(v.Fragment,{children:t.map((function(e){return e.isError?Object(v.jsxs)("div",{children:[Object(v.jsxs)("span",{style:n,children:[e.name," "]}),e.message]},e.id):null}))})}function ce(e){var t=e.order,n=e.shouldValidate,r=Object(a.useState)([]),i=Object(p.a)(r,2),c=i[0],s=i[1];Object(a.useEffect)((function(){if(n){var e=[{id:1,name:"Date and time",isError:ne.a.isBefore(t.dateTime.toISOString(),(new Date).toISOString()),message:"might have some problems. Check to be sure: ".concat("".concat(t.confirmationDateString," ").concat(t.time)||"---")},{id:2,name:"Address",isError:ne.a.isEmpty(t.address),message:"is missing"},{id:3,name:"Phonenumber",isError:!ne.a.isMobilePhone(t.phone,["fi-FI","es-ES","sv-SE"]),message:"is missing or is incorrect: ".concat(t.phone||"---")},{id:4,name:"Email",isError:!ne.a.isEmail(t.email),message:"is missing or is incorrect: ".concat(t.email||"---")}];s(e)}}),[t.dateTime,t.phone,t.address,t.email,n]);var o=c.some((function(e){return e.isError}));return Object(v.jsx)(v.Fragment,{children:n&&o&&Object(v.jsx)("div",{style:{borderTop:"1px solid gray",borderBottom:"1px solid gray",padding:"15px 0 15px 0",margin:"10px 0 10px 0"},className:"flex-100-space-between",children:Object(v.jsxs)("div",{children:[Object(v.jsx)(re.a,{}),Object(v.jsx)(ie,{validationArray:c})]})})})}var se=n(180),oe=n.n(se),le=(n(302),function(e,t){return function(n){var r=n.content,i=n.handleUpdate,c=Object(b.a)(n,["content","handleUpdate"]),s=Object(a.useState)(!1),o=Object(p.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)(r),m=Object(p.a)(u,2),j=m[0],f=m[1],x=Object(a.useState)(j),g=Object(p.a)(x,2),y=g[0],k=g[1];function w(e){k(e.target.value)}function S(){k(j),d(!l)}function C(){f(y),i(y),d(!l)}function T(){d(!l)}return Object(v.jsx)(v.Fragment,{children:l?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(e,Object(h.a)({content:y,handleChange:w},c)),Object(v.jsxs)("div",{className:"buttons-block",children:[Object(v.jsx)(O.a,{size:"small",onClick:S,children:"Cancel"}),Object(v.jsx)(O.a,{className:"primary",size:"small",onClick:C,children:"Save"})]})]}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(t,Object(h.a)({content:r,button:Object(v.jsx)("span",{children:Object(v.jsx)(W.a,{size:"small",onClick:T,children:Object(v.jsx)(oe.a,{style:{width:"20px"}})})})},c))})})}});function de(e){var t=e.handleClick,n=e.rawOrderText,a=e.elementRef,r=le((function(e){var t=e.handleChange,n=e.content;return Object(v.jsx)(S.a,{onChange:t,value:n,style:{marginTop:"10px"},className:"width-100",rowsMin:5,cols:40,placeholder:"Raw order here."})}),(function(e){var t=e.button;return Object(v.jsxs)("div",{ref:a,className:"not-editable-container",children:["Raw order",t]})}));return Object(v.jsx)(r,{style:{width:"max-content"},handleUpdate:t,content:n})}n(303);function ue(e){var t=e.elementRef,n=e.handleClick,a=e.transformedOrderText,r=le((function(e){var n=e.handleChange,a=e.content;return Object(v.jsx)(S.a,{onChange:n,value:a,ref:t,style:{marginTop:"10px"},className:"width-100",rowsMin:5,cols:40,placeholder:"Transformed order."})}),(function(e){var n=e.content,r=e.button;return Object(v.jsxs)("div",{ref:t,style:{width:a&&"100%",marginTop:"12px"},className:"not-editable-container",children:[0===n.length?"Transformed order":Object(v.jsx)("div",{className:"text-container-with-scroll",children:n.split("\n").map((function(e,t){return Object(v.jsx)("div",{children:e},t)}))}),r]})}));return Object(v.jsx)(r,{handleUpdate:n,content:a})}var me=n(181),je=n.n(me);function pe(e){var t=e.handleClick,n=e.text,a=void 0===n?"Transform":n,r=Object(b.a)(e,["handleClick","text"]);return Object(v.jsxs)(O.a,Object(h.a)(Object(h.a)({className:"button-one-third flex-item",variant:"outlined",size:"small",style:{fontSize:"0.8rem",padding:"1px"},onClick:function(){return t()}},r),{},{children:[Object(v.jsx)(je.a,{}),a]}))}var he=n(182),be=n.n(he);function fe(e){var t=e.elementRef,n=e.disabled;return Object(v.jsxs)(O.a,{disabled:n,className:"button-one-third flex-item",variant:"outlined",size:"small",onClick:function(){!function(){var e=document.createElement("textarea");document.body.appendChild(e),e.value=t.current.innerText||t.current.defaultValue,e.select(),document.execCommand("copy"),document.body.removeChild(e)}(),Object(o.b)("Copied!",{autoHideDuration:750})},children:["Copy ",Object(v.jsx)(be.a,{})]})}function xe(e){var t=e.handleOrderTransformFromText,n=e.handleOrderTransformFromEditor,a=e.transformDisabled,r=e.copyDisabled,i=e.elementRef;return Object(v.jsx)("div",{className:"order-operations",children:Object(v.jsxs)("div",{className:"block",children:[Object(v.jsx)(fe,{disabled:r,elementRef:i}),Object(v.jsx)(pe,{text:"from text",disabled:a,handleClick:t}),Object(v.jsx)(pe,{text:"from editor",handleClick:n})]})})}var Oe=n(183),ve=n.n(Oe);function ge(e){var t=e.handleClick,n=e.className;return Object(v.jsxs)(O.a,{className:n,variant:"contained",size:"small",onClick:t,children:["New order ",Object(v.jsx)(ve.a,{})]})}function ye(e){var t=e.className,n=e.orderPoolUrl,a=Object(f.g)();return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{size:"small",className:t,variant:"contained",onClick:function(){a.push(n)},children:"Order Pool"})})}function ke(e){var t=e.text,n=e.className,a=Object(b.a)(e,["text","className"]);return Object(v.jsx)("div",Object(h.a)(Object(h.a)({className:"message ".concat(n)},a),{},{children:t}))}var we=n(184),Se=n.n(we);function Ce(e){var t=e.handleClick,n=e.isDisabled,a=e.grayScale,r=e.content,i=e.className,c=a&&{color:"grey"};return Object(v.jsx)(O.a,{disabled:n,className:i,variant:"contained",size:"small",onClick:t,children:Object(v.jsx)("span",{style:Object(h.a)({display:"flex"},c),children:r})})}var Te=n(54),Ne=n.n(Te),De="/api/token";function Ee(){return(Ee=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.axiosInstance.post(De);case 2:return e.next=4,Le.axiosInstance.post("".concat(De,"/is-new"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pe={refreshTokens:function(){return Ee.apply(this,arguments)}},Ie=Ne.a.create();var Le={axiosInstance:Ie,setupInterceptor:function(e){Ie.interceptors.response.use((function(e){return e}),function(){var t=Object(j.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.config,"access token expired"!==n.response.data.error){t.next=5;break}return t.next=4,Pe.refreshTokens();case 4:return t.abrupt("return",Ie(a));case 5:if("access token missing"!==n.response.data.error&&"invalid access token"!==n.response.data.error&&"refresh token expired"!==n.response.data.error&&"invalid refresh token"!==n.response.data.error&&"refresh token missing"!==n.response.data.error){t.next=9;break}throw e.notificate(),e.logout(),new Error("logout");case 9:return 429===n.response.status&&setTimeout((function(){return null}),1500),t.abrupt("return",Promise.reject(n));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},ze="/api/email";function Fe(){return(Fe=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.axiosInstance.post("".concat(ze,"/send-confirmation"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae="email";function Ye(e){var t=e.email,n=e.order,a=e.transformedOrderText,r=e.statusText,i=e.isDisabled,c=e.changeStatus,s=e.className;var l=r||Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"Send"})," ",Object(v.jsx)(Se.a,{})]});return Object(v.jsx)(Ce,{className:s,isDisabled:i,grayScale:null!==r,handleClick:function(){return t&&a?(c(Ae,"Working",!0),function(e){return Fe.apply(this,arguments)}({orderDetails:a,order:n,email:t}).then((function(e){c(Ae,"Done",!0),Object(o.b)(e.message)})).catch((function(e){"logout"!==e.message&&(c(Ae,"Error",!1),Object(o.b)(e.response.data.error,{variant:"error"}))}))):Object(o.b)("No confirmation found or recipients defined.",{variant:"warning"})},content:l})}var Me=n(185),Re=n.n(Me),Ue="/api/sms";function We(e){return He.apply(this,arguments)}function He(){return(He=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.axiosInstance.post(Ue,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Be="sms";function Xe(e){var t=e.phone,n=e.transformedOrderText,a=e.statusText,r=e.isDisabled,i=e.changeStatus,c=e.className;function s(){return(s=Object(j.a)(m.a.mark((function e(){var a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=n)||!t){e.next=9;break}return i(Be,"Working",!0),e.next=6,We({msg:a,phone:t});case 6:r=e.sent,i(Be,"Done",!0),Object(o.b)("".concat(r.message));case 9:e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(0),"logout"!==e.t0.message){e.next=15;break}return e.abrupt("return");case 15:i(Be,"Error",!1),Object(o.b)(null===(c=e.t0.response)||void 0===c?void 0:c.data.error,{variant:"error"});case 17:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var l=a||Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"Send"})," ",Object(v.jsx)(Re.a,{})]});return Object(v.jsx)(Ce,{className:c,isDisabled:r,grayScale:null!==a,handleClick:function(){return s.apply(this,arguments)},content:l})}var Je=n(186),Ke=n.n(Je),Ve="/api/calendar";function qe(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.axiosInstance.post(Ve,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $e="/api/order-pool";function Ge(e,t){return t.map((function(n,a){var r=a===t.length-1;return"".concat(e,"[]=").concat(n).concat(r?"":"&")})).join("")}function Qe(e){var t=e.query,n=e.orders;return new Promise((function(e){return e(sessionStorage.setItem("order-pool/".concat(t),JSON.stringify({validUntil:Date.now()+3e5,orders:n})))}))}function Ze(e){return Promise.resolve().then((function(){return JSON.parse(sessionStorage.getItem("order-pool/".concat(e)))}))}function et(e){return Promise.resolve(function(){try{return JSON.parse(sessionStorage.getItem("order-pool/".concat(e))).validUntil>Date.now()}catch(t){return!1}}())}function tt(){return(tt=Object(j.a)(m.a.mark((function e(){var t,n,a,r,i,c,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:[1],n=s.length>1&&void 0!==s[1]?s[1]:{deleted:!1,forceUpdate:!1},a=n.deleted,r=n.forceUpdate,i="".concat(a?"deleted=true":"deleted=false","&").concat(Ge("pages",t)),e.t0=!r,!e.t0){e.next=9;break}return e.next=8,et(i);case 8:e.t0=e.sent;case 9:if(!e.t0){e.next=11;break}return e.abrupt("return",Ze(i).then((function(e){return e.orders})));case 11:return c="".concat($e,"/?").concat(i),e.abrupt("return",Le.axiosInstance.get(c).then(function(){var e=Object(j.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t?void 0:t.data,a=n.orders,e.next=3,Qe({query:i,orders:a});case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(){return(nt=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.axiosInstance.delete("".concat($e,"/delete/").concat(t));case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(){return(at=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.axiosInstance.put("".concat($e,"/retrieve/").concat(t));case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rt={get:function(){return tt.apply(this,arguments)},confirm:function(e){return Le.axiosInstance.put("".concat($e,"/confirm/").concat(e)).then((function(e){return null===e||void 0===e?void 0:e.data}))},remove:function(e){return nt.apply(this,arguments)},retrieve:function(e){return at.apply(this,arguments)},getConfirmedOrders:function(e){var t=e.periodFrom,n=e.periodTo;return Le.axiosInstance.get("".concat($e,"/confirmed-by-user/?periodFrom=").concat(t,"&periodTo=").concat(n)).then((function(e){return e.data}))},add:function(e){var t=e.order,n=e.key;return Le.axiosInstance.post("".concat($e,"/add"),{order:t,key:n}).then((function(e){return null===e||void 0===e?void 0:e.data}))}},it="calendar";function ct(e){var t=e.order,n=e.orderId,a=e.statusText,r=e.isDisabled,i=e.changeStatus,c=e.className;function s(){return(s=Object(j.a)(m.a.mark((function e(){var a,r,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(it,"Working",!0),e.next=4,qe({order:t,calendarEntries:t.makeCalendarEntries()});case 4:if(a=e.sent,n){e.next=11;break}return e.next=8,rt.add({order:t.prepareForSending(),key:"supersecretorderpoolkey"});case 8:r=e.sent,c=r.id,n=c;case 11:return e.next=13,rt.confirm(n);case 13:i(it,"Done",!0),Object(o.b)("".concat(null===a||void 0===a?void 0:a.message,"\n").concat(null===a||void 0===a?void 0:a.createdEvent)),e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(0),"logout"!==e.t0.message){e.next=21;break}return e.abrupt("return");case 21:i(it,"Error",!1),Object(o.b)((null===(s=e.t0.response)||void 0===s?void 0:s.data.error)||(null===e.t0||void 0===e.t0?void 0:e.t0.toString()),{variant:"error"});case 23:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}var l=a||Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"Add"})," ",Object(v.jsx)(Ke.a,{})]});return Object(v.jsx)(Ce,{className:c,isDisabled:r,grayScale:null!==a,handleClick:function(){return s.apply(this,arguments)},content:l})}n(322);function st(e){var t=e.order,n=e.orderId,r=e.transformedOrder,i=e.handleResetClick,c=e.orderPoolUrl,s={email:{status:null,disable:!1},sms:{status:null,disable:!1},calendar:{status:null,disable:!1}},o=Object(a.useState)(s),l=Object(p.a)(o,2),d=l[0],u=l[1];function m(e,t,n){u(Object(h.a)(Object(h.a)({},d),{},Object(y.a)({},e,{status:t,disable:n})))}return Object(v.jsxs)("div",{className:"order-operations",children:[function(){var e=d.email.disable||!(t.email&&r.text);return Object(v.jsxs)("div",{className:"block",children:[Object(v.jsx)(ke,{className:"width-75 ".concat(e&&"grayedFont"),text:"Email to: ".concat(t.email)}),Object(v.jsx)(Ye,{className:"width-25",email:t.email,order:t,statusText:d.email.status,isDisabled:e,transformedOrderText:r.text,changeStatus:m})]})}(),function(){var e=d.sms.disable||!(t.phone&&r.text);return Object(v.jsxs)("div",{className:"block",children:[Object(v.jsx)(ke,{className:"width-75 ".concat(e&&"grayedFont"),text:"Sms to: ".concat(t.phone)}),Object(v.jsx)(Xe,{className:"width-25",statusText:d.sms.status,isDisabled:e,phone:t.phone,transformedOrderText:r.text,changeStatus:m})]})}(),function(){var e=d.calendar.disable||!r.text;return Object(v.jsxs)("div",{className:"block",children:[Object(v.jsx)(ge,{className:"share-space",handleClick:function(){u(s),i()}}),Object(v.jsx)(ye,{className:"share-space",orderPoolUrl:c}),Object(v.jsx)(ct,{className:"width-25",statusText:d.calendar.status,isDisabled:e,order:t,orderId:n,transformedOrderText:r.text,changeStatus:m})]})}()]})}var ot=n(337),lt=n(335),dt=n(334),ut=n(383),mt=n(45);function jt(e){var t=e.children,n=e.handleClose,a=Object(mt.a)(),r=Object(ut.a)(a.breakpoints.down("sm"));return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(ot.a,{fullScreen:r,open:!0,onClose:n,"aria-labelledby":"responsive-dialog-title",disableScrollLock:!0,children:[Object(v.jsx)(dt.a,{children:t}),Object(v.jsx)(lt.a,{children:Object(v.jsx)(O.a,{style:{backgroundColor:"white"},variant:"text",onClick:n,children:"Close"})})]})})}var pt=n(79),ht=n(187),bt=n.n(ht),ft=n(189),xt=n.n(ft),Ot=n(188),vt=n.n(Ot);function gt(e){var t=e.loading,n=e.redirectComponent,a=void 0===n?null:n,r=e.children;return Object(v.jsxs)(v.Fragment,{children:[t&&Object(v.jsx)("p",{children:"Loading..."}),a,!t&&!a&&r]})}var yt=n(115);function kt(e){var t=e.orders,n=e.handleExport,r=e.handleDeletion,i=e.handleLoadingMoreOrders,c=e.labelForDeletion,s=Object(a.useState)([]),o=Object(p.a)(s,2),l=o[0],d=o[1];function u(e,t){return e.split("\n").map((function(e,n){return Object(v.jsx)("div",{children:e},"".concat(t).concat(n).concat(e))}))}return Object(a.useEffect)((function(){d(t.map((function(e){return{order:Object(h.a)({},e),isNew:new Date(e.date).toDateString()===new Date(Date.now()).toDateString(),className:e.confirmed?"basic-order-style confirmed-order-style":"basic-order-style",hidden:e.confirmed}})))}),[t]),0===t.length?Object(v.jsx)("p",{children:"Nothing found"}):Object(v.jsxs)(v.Fragment,{children:[l.map((function(e){return Object(v.jsxs)("div",{className:"order-pool-list",children:[Object(v.jsxs)("div",{className:"order-top-bar",children:[Object(v.jsxs)("div",{className:"order-status-icons-container",children:[e.isNew&&Object(v.jsx)("span",{className:"order-status-new-order order-status-icon",children:"NEW"}),Object(v.jsxs)("span",{className:"order-status-icon ".concat(e.order.confirmed?"order-status-icon order-status-confirmed":"order-status-icon order-status-notification"),children:[e.order.confirmed?"\u2714":"\u2755"," "]})]}),Object(v.jsxs)("div",{className:"order-actions",children:[Object(v.jsx)(O.a,{style:{padding:0,fontSize:"0.9rem"},variant:"text",size:"small",onClick:function(){return r(e.order.id)},children:c}),Object(v.jsx)(O.a,{style:{padding:0,fontSize:"0.8rem",color:e.order.confirmed&&"var(--brand-color-dark)"},onClick:function(){n(e.order)},variant:"text",size:"small",children:"Export"}),Object(v.jsx)(O.a,{style:{padding:0},variant:"text",size:"small",onClick:function(){return function(e){d(Object(pt.a)(l.map((function(t){return t.order.id===e.order.id?Object(h.a)(Object(h.a)({},e),{},{hidden:!t.hidden,className:t.hidden?"basic-order-style":"basic-order-style confirmed-order-style"}):t}))))}(e)},children:e.hidden?"Show \u2795":"Hide \u2796"})]})]}),Object(v.jsx)("div",{className:e.className,children:Object(yt.a)(e.order.text)?(t=e.order.text,a=e.order.id,Object.entries(JSON.parse(t)).map((function(e,t){var n=Object(p.a)(e,2),r=n[0],i=n[1];return Object(v.jsxs)("div",{style:{minHeight:"1.2rem",backgroundColor:t%2!==0&&"var(--brand-color-very-light)"},children:[Object(v.jsx)("span",{style:{fontWeight:"bold"},children:r}),":"," ","dateTime"===r?"".concat(new Date(i).toLocaleDateString()," ").concat(new Date(i).toLocaleTimeString().slice(0,5)):i]},"".concat(r).concat(i).concat(a))}))):u(e.order.text,e.order.id)})]},e.order.id);var t,a})),Object(v.jsx)(O.a,{onClick:i,size:"small",children:"Load more"})]})}n(323);var wt="inbox",St="trashcan";function Ct(e){var t=e.handleExport,n=Object(a.useState)([]),r=Object(p.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(!0),o=Object(p.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)(wt),b=Object(p.a)(u,2),f=b[0],x=b[1],g=Object(a.useState)({inbox:{pages:[1],searchText:"",showOnlyNotConfirmed:!1},trashcan:{pages:[1],searchText:"",showOnlyNotConfirmed:!1}}),w=Object(p.a)(g,2),S=w[0],C=w[1],T=Object(a.useState)(i),N=Object(p.a)(T,2),D=N[0],E=N[1],P=Object(a.useState)({hasToUpdate:!1,trigger:0}),I=Object(p.a)(P,2),L=I[0],z=I[1],F=Object(a.useState)({inbox:[1],trashcan:[1]}),A=Object(p.a)(F,2),Y=A[0],M=A[1],R=i.length,U=i.filter((function(e){return!e.confirmed})).length;function H(e,t,n){var a;return function(e,t){return t?e.filter((function(e){return!1===(null===e||void 0===e?void 0:e.confirmed)})):e}((a=e,n.filter((function(e){return e.text.toLowerCase().includes(null===a||void 0===a?void 0:a.toLowerCase().trim())}))),t)}function B(){return(B=Object(j.a)(m.a.mark((function e(){var t,n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[Y[f].length+1],M(Object(h.a)(Object(h.a)({},Y),{},Object(y.a)({},f,[].concat(Object(pt.a)(Y[f]),t)))),f!==wt){e.next=8;break}return e.next=5,rt.get(t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,rt.get(t,{deleted:!0});case 10:e.t0=e.sent;case 11:n=e.t0,a=i.concat(n),c(a),r=H(S[f].searchText,S[f].showOnlyNotConfirmed,a),E(r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){x(e.target.dataset.tabname)}function J(){return(J=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt.remove(t);case 2:c(i.filter((function(e){return e.id!==t}))),E(D.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt.retrieve(t);case 2:c(i.filter((function(e){return e.id!==t}))),E(D.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)(Object(j.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!0),e.prev=1,f!==wt){e.next=8;break}return e.next=5,rt.get(Y[f],{forceUpdate:L.hasToUpdate});case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,rt.get(Y[f],{deleted:!0,forceUpdate:L.hasToUpdate});case 10:e.t0=e.sent;case 11:return t=e.t0,c(t),n=H(S[f].searchText,S[f].showOnlyNotConfirmed,t),E(n),e.abrupt("return",d(!1));case 18:return e.prev=18,e.t1=e.catch(1),e.abrupt("return",e.t1);case 21:case"end":return e.stop()}}),e,null,[[1,18]])}))),[f,L.trigger]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"tab-panel",children:[Object(v.jsx)(O.a,{onClick:X,className:"p-0",variant:"text",size:"small",children:Object(v.jsx)("h3",{"data-tabname":wt,className:f===wt?"tab-panel-item tab-panel-item-selected":"tab-panel-item",children:"Inbox"})}),Object(v.jsx)(O.a,{onClick:X,className:"p-0",variant:"text",size:"small",children:Object(v.jsx)("h3",{"data-tabname":St,className:f===St?"tab-panel-item tab-panel-item-selected":"tab-panel-item",children:"Trashcan"})}),Object(v.jsx)(W.a,{style:{marginLeft:"auto",marginRight:"12px"},onClick:function(){z(Object(h.a)(Object(h.a)({},L),{},{trigger:L.trigger+1,hasToUpdate:!0})),setTimeout((function(){return z(Object(h.a)(Object(h.a)({},L),{},{hasToUpdate:!1}))}))},className:"p-0",variant:"text",size:"small",children:Object(v.jsx)(bt.a,{})})]}),Object(v.jsxs)("div",{className:"filters-tab",children:[Object(v.jsxs)("span",{className:"filters-tab-orders-count",children:[D.length,"/",i.length]}),Object(v.jsx)(k.a,{className:"flex-item",type:"text",name:"searchText",placeholder:"Search",value:S[f].searchText,onChange:function(e){var t=S[f];C(Object(h.a)(Object(h.a)({},S),{},Object(y.a)({},f,Object(h.a)(Object(h.a)({},t),{},{searchText:e.target.value}))));var n=H(e.target.value,t.showOnlyNotConfirmed,i);E(n)}}),U>0&&Object(v.jsxs)(O.a,{className:"p-0 filters-tab-orders-status-icon",size:"small",onClick:function(){return function(e){var t=S[f];C(Object(h.a)(Object(h.a)({},S),{},Object(y.a)({},f,Object(h.a)(Object(h.a)({},t),{},{showOnlyNotConfirmed:e}))));var n=H(t.searchText,e,i);E(n)}(!S[f].showOnlyNotConfirmed)},children:[Object(v.jsx)("span",{style:{fontSize:"1rem"},children:S[f].showOnlyNotConfirmed?R:U}),Object(v.jsx)("span",{className:"order-status-icon order-status-notification ".concat(S[f].showOnlyNotConfirmed&&"order-status-icon-selected"),children:S[f].showOnlyNotConfirmed?"\u2714&\u2755":"\u2755"})]})]}),Object(v.jsx)(gt,{loading:l,children:Object(v.jsx)(kt,{orders:D,handleExport:t,labelForDeletion:f===St?Object(v.jsx)(vt.a,{}):Object(v.jsx)(xt.a,{}),handleDeletion:f===St?function(e){return K.apply(this,arguments)}:function(e){return J.apply(this,arguments)},handleLoadingMoreOrders:function(){return B.apply(this,arguments)}})})]})}function Tt(e){var t=e.handleExport,n=Object(f.g)(),a=function(){n.goBack()};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(jt,{handleClose:a,children:Object(v.jsx)(Ct,{handleExport:function(e){t(e),a()}})})})}var Nt=n(131),Dt=n(112),Et=n(113),Pt=n(89);function It(e){return"Cannot find ".concat(e)}function Lt(e){return e.replace(/(?<=\d+)(th|rd|st|nd)/,"")}var zt=function(){function e(t){Object(Dt.a)(this,e),this.textOrder=e.initialCleanup(t)}return Object(Et.a)(e,[{key:"dateTime",get:function(){var e=/(?<=Date and time: \w+, )\w+ \d+(th|rd|st|nd)? \w+/.exec(this.textOrder);if(!e)throw new Error(It("date"));var t=new Date("".concat(Lt(e[0]),"Z")),n=/\d+:\d+/.exec(this.textOrder)[0];return new Date("\n    ".concat(t.getFullYear(),"\n    ").concat(t.getMonth()+1,"\n    ").concat(t.getDate(),"\n    ").concat(n))}},{key:"duration",get:function(){var e=/\d+(\.\d+)?(?=\sh.)/.exec(this.textOrder);if(!e)throw new Error(It("duration"));return e[0]}},{key:"paymentType",get:function(){var e="Payment Type: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("PRICE"),a=this.textOrder.slice(t,n).trim(),r=a.match(/\W+/g).filter((function(e){return"/"!==e&&" "!==e&&"\xe4"!==e})),i=a.indexOf(r[0].trim()),c=a.slice(0,i).trim();if(!c)throw new Error(It("payment type"));if(!I.map((function(e){return e.name})).includes(c))throw new Error("Unrecognized payment type");return c}},{key:"boxesAmount",get:function(){var e=this.textOrder.indexOf("\u2014 Amount: "),t=this.textOrder.indexOf("\u2014 Price"),n=this.textOrder.slice(e,t);return n&&n.match(/\d+/)[0]}},{key:"boxesDeliveryDate",get:function(){var e=this.textOrder.indexOf("\u2014 Booking time starts: ");if(-1===e)return null;var t=e+"\u2014 Booking time starts: ".length,n=this.textOrder.indexOf("\u2014 Booking time ends"),a=this.textOrder.slice(t,n).replace();return new Date(Lt(a)).toISOString()}},{key:"boxesPickupDate",get:function(){var e=this.textOrder.indexOf("\u2014 Booking time ends: ");if(-1===e)return null;var t=e+"\u2014 Booking time ends: ".length,n=this.textOrder.indexOf("\u2014 Self pickup"),a=this.textOrder.slice(t,n).replace();return new Date(Lt(a)).toISOString()}},{key:"selfPickup",get:function(){var e="Self pickup: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("\u2014 Self return");return"Yes"===this.textOrder.slice(t,n).trim()}},{key:"selfReturn",get:function(){var e="Self return: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("Payment Type");return"Yes"===this.textOrder.slice(t,n).trim()}},{key:"movingBoxesPrice",get:function(){var e=this.textOrder.indexOf("\u2014 Price: "),t=this.textOrder.indexOf("\u2014 Booking time start"),n=this.textOrder.slice(e,t);return n&&n.match(/\d+/)[0]}},{key:"serviceName",get:function(){var e="Service: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("Accessories"),a=this.textOrder.slice(t,n).trim();if(!a)throw new Error(It("service name"));if(!P.find((function(e){return e.name===a})))throw new Error("Unrecognized service name");return a}},{key:"addresses",get:function(){var e=this,t=["End location","Name"],n=[];return["Start location:","End location:"].forEach((function(a,r){var i=e.textOrder.indexOf(a)+a.length,c=e.textOrder.indexOf(t[r]),s=e.textOrder.slice(i,c).replaceAll(",","").trim(),o=s.slice(0,s.indexOf(" / ")),l=s.match(/\d{5}/);l=l&&l[0]||"";var d=s.slice(s.indexOf(" / ")+" / ".length),u=o.match(/\D+/);u=u&&u[0];var m=d.replace(l,"");if(m=m||null,(!/\d+/.test(d)||d.includes(l)&&d.length<15)&&(m=o.replace(l,""),u=(u=d.match(/\D+/))&&u[0]),m.includes(u)&&(m=m.replace(u,"")),0===r&&!m)throw new Error(It("address"));n.push("".concat(m,", ").concat(l," ").concat(u).replace(/\s+/g," ").trim())})),n}},{key:"address",get:function(){return this.addresses[0]}},{key:"destination",get:function(){return Object(p.a)(this.addresses,2)[1]}},{key:"name",get:function(){var e="Name: ",t=this.textOrder.indexOf(e)+e.length,n=this.textOrder.indexOf("Email"),a=this.textOrder.slice(t,n).trim();if(!a)throw new Error(It("name"));return a}},{key:"email",get:function(){var e=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.exec(this.textOrder);if(!e)throw new Error(It("email"));return e[0]}},{key:"phone",get:function(){var e=/(?<=Phone: )[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*/.exec(this.textOrder);if(!e)throw new Error(It("phone"));return e[0].trim()}},{key:"comment",get:function(){var e=/(?<=Comment: )(.*\s*)*/.exec(this.textOrder);e=e?e[0]:"";var t=/\n\n\-\-\nT\xe4m\xe4 viesti l\xe4hetettiin sivustolta Paku24\.fi \(https:\/\/paku24\.fi\)/;return t.exec(e)&&(e=e.replace(t,"")),e}}],[{key:"initialCleanup",value:function(e){var t=e.split("\n"),n=[];return t.forEach((function(e){return n.push(e.trim())})),n.join("\n").replaceAll("\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014","").replaceAll("------------------------","")}}]),e}(),Ft=n(190),At=n(72),Yt={dateTime:new Date,duration:1,serviceName:P[0].name,paymentType:I[0].name,address:"",destination:"",name:"",email:"",phone:"",boxesDeliveryDate:(new Date).toISOString(),boxesPickupDate:(new Date).toISOString(),boxesAmount:0,selfPickup:!1,selfReturn:!1,comment:"",distance:Ft.insideCapital,hsy:!1,altColorPalette:!1,XL:!1},Mt=Object.keys(Yt),Rt=function(){function e(t){Object(Dt.a)(this,e);var n,a=Object(Nt.a)(Mt);try{for(a.s();!(n=a.n()).done;){var r,i=n.value;this[i]=null!==(r=t[i])&&void 0!==r?r:Yt[i]}}catch(c){a.e(c)}finally{a.f()}this.dateTime=new Date(t.dateTime)}return Object(Et.a)(e,[{key:"time",get:function(){return this.dateTime.toTimeString().slice(0,5)}},{key:"servicePrice",get:function(){var e=this,t=P.find((function(t){return t.name===e.serviceName}));return this.XL?t.priceXL:t.price}},{key:"boxesPrice",get:function(){var e=R()(this.boxesPickupDate).diff(R()(this.boxesDeliveryDate),U.timeUnit),t=this.boxesAmount*U.price*e;return this.selfPickup||(t+=U.deliveryFee),this.selfReturn||(t+=U.pickupFee),t}},{key:"ISODateString",get:function(){return"".concat(this.dateTime.toISOString().split("T")[0],"T").concat(this.time)}},{key:"confirmationDateString",get:function(){var e=this.dateTime.getDate(),t=this.dateTime.getMonth()+1,n=this.dateTime.getFullYear();return e<10&&(e="0".concat(e)),t<10&&(t="0".concat(t)),"".concat(e,"-").concat(t,"-").concat(n)}},{key:"fees",get:function(){var e=1*this.time.split(":")[0],t=this.dateTime.getDay(),n=this.dateTime.getDate(),a=[new Date(this.dateTime.getFullYear(),this.dateTime.getMonth()+1,0).getDate(),1],r=6===t||0===t,i=!r&&a.includes(n),c=e<8,s=e>=20,o="Lasku"===this.paymentType||"Lasku/Osamaksu"===this.paymentType||"Invoice/Instalment payment"===this.paymentType;return[r&&Pt.weekend,i&&Pt.firstOrLastDayOfTheMonth,c&&Pt.morning,s&&Pt.night,o&&Pt.bill].filter((function(e){return!1!==e}))}},{key:"printFees",value:function(){var e="\n@feeName\n@feeAmount".repeat(this.fees.length);return this.fees.forEach((function(t){e=(e=e.replace("@feeName",t.name.toUpperCase())).replace("@feeAmount","".concat(t.amount,"\u20ac"))})),e}},{key:"prepareForSending",value:function(){var e=this;return delete e.hsy,delete e.altColorPalette,delete e.distance,JSON.stringify(e)}},{key:"makeIcons",value:function(){var e=this.XL?At.size.XL:"",t=At.misc[this.distance]||"",n=this.fees.map((function(e){return"Laskulis\xe4"===e.name?"":At.fees[e.name]})).reduce((function(e,t){return e+t}),""),a=At.service[this.serviceName],r=At.payment[this.paymentType];return{move:"".concat(e).concat(t).concat(n).concat(a).concat(r),boxesDelivery:At.boxes.delivery,boxesPickup:At.boxes.pickup}}},{key:"makeCalendarEntries",value:function(){var e="".concat(this.makeIcons().move).concat(this.time,"(").concat(this.duration,"h)"),t="".concat(this.boxesAmount," ").concat(this.makeIcons().boxesDelivery," ").concat(this.boxesDeliveryDate.includes("T")?"".concat(R()(this.boxesDeliveryDate).format("HH:mm")," "):""),n="NOUTO ".concat(this.boxesAmount," ").concat(this.makeIcons().boxesPickup," ").concat(this.boxesPickupDate.includes("T")?"".concat(R()(this.boxesPickupDate).format("HH:mm")," "):"");return{move:{title:"".concat(e," ").concat(this.name),description:"".concat(e).concat(this.format({title:0,date:0,time:0,duration:0,paymentType:0},{removeFirstHeading:!0}))},boxesDelivery:{title:"".concat(t).concat(this.name),description:"".concat(t).concat(this.format({address:1,name:1,email:1,phone:1,boxes:1},{removeFirstHeading:!0}))},boxesPickup:{title:"".concat(n).concat(this.name),description:"".concat(n).concat(this.format({destination:1,name:1,email:1,phone:1,boxes:1},{removeFirstHeading:!0}))}}}},{key:"format",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.removeFirstHeading,a=void 0!==n&&n,r={title:1,date:1,time:1,duration:1,paymentType:1,address:1,destination:1,name:1,email:1,phone:1,boxes:1,comment:1},i=r;Object.keys(e).length>0&&Object.values(e).includes(1)?i=e:Object.values(e).includes(0)&&(i=Object(h.a)(Object(h.a)({},r),e));var c="";try{if(i.title&&(c+="VARAUKSEN TIEDOT\n"),i.date&&(c+="".concat(this.confirmationDateString,"\n")),i.time&&(c+="ALKAMISAIKA\n",c+="Klo ".concat(this.time," (+/-15min)\n")),i.duration&&(c+="ARVIOITU KESTO\n",c+="".concat(this.duration,"h (").concat(this.servicePrice,"\u20ac/h, ").concat(this.serviceName,")\n")),i.paymentType&&(c+="MAKSUTAPA\n",c+="".concat(this.paymentType).concat(this.printFees(),"\n")),i.address&&(c+="L\xc4HT\xd6PAIKKA\n",c+="".concat(this.address,"\n")),i.destination&&this.destination.length>5&&(c+="M\xc4\xc4R\xc4NP\xc4\xc4\n",c+="".concat(this.destination,"\n")),i.name&&(c+="NIMI\n",c+="".concat(this.name,"\n")),i.email&&this.email&&(c+="S\xc4HK\xd6POSTI\n",c+="".concat(this.email,"\n")),i.phone&&(c+="PUHELIN\n",c+="".concat(this.phone,"\n")),i.boxes&&this.boxesAmount>0){var s=R()(this.boxesDeliveryDate).format("DD-MM-YYYY ".concat(this.boxesDeliveryDate.includes("T")?"HH:mm":"")),o=R()(this.boxesPickupDate).format("DD-MM-YYYY ".concat(this.boxesPickupDate.includes("T")?"HH:mm":""));c+="MUUTTOLAATIKOT\n",c+="".concat(s," - ").concat(o,"\n"),this.selfPickup&&(c+="Itse nouto\n"),this.selfReturn&&(c+="Itse palautus\n"),c+="M\xe4\xe4r\xe4: ".concat(this.boxesAmount," kpl\n"),c+="Hinta: ".concat(this.boxesPrice,"\u20ac\n")}if(i.comment&&this.comment&&(c+="LIS\xc4TIETOJA\n",c+="".concat(this.comment,"\n")),a){var l=c.split("\n");l.shift(),c=l.join("\n")}}catch(d){console.error(d)}return c}}],[{key:"getEventForCalendar",value:function(e,t){return e.slice(e.indexOf(t))}},{key:"setupOrderFromText",value:function(t){return new Promise((function(n){if(Object(yt.a)(t))return n(new e(JSON.parse(t)));var a,r={},i=new zt(t),c=Object(Nt.a)(Mt);try{for(c.s();!(a=c.n()).done;){var s=a.value;try{r[s]=i[s]}catch(l){Object(o.b)(l.message,{variant:"error"}),r[s]=null}}}catch(l){c.e(l)}finally{c.f()}return n(new e(r))}))}},{key:"default",value:function(){return new e(Yt)}}]),e}();function Ut(){var e=Object(a.useState)({text:"",id:null}),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)({text:"",id:null}),c=Object(p.a)(i,2),s=c[0],l=c[1],d=Object(a.useState)(Rt.default()),u=Object(p.a)(d,2),m=u[0],j=u[1];Object(a.useEffect)((function(){var e=localStorage.getItem("confirmator_order"),t=localStorage.getItem("confirmator_rawOrder");e&&j(new Rt(JSON.parse(e))),t&&r(JSON.parse(t))}),[]),Object(a.useEffect)((function(){localStorage.setItem("confirmator_order",JSON.stringify(m))}),[m]),Object(a.useEffect)((function(){localStorage.setItem("confirmator_rawOrder",JSON.stringify(n))}),[n]);var b=Object(a.useRef)(null),x=Object(a.useRef)(null);function O(e){var t=new Rt(Object(h.a)(Object(h.a)({},m),{},Object(y.a)({},e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value)));return j(t)}function g(e){r(Object(h.a)(Object(h.a)({},n),{},{id:e.id||null,text:e.text||e}))}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;Rt.setupOrderFromText(e.text).then((function(t){return j(t),l({id:e.id,text:t.format()})})).catch((function(e){return Object(o.b)(e.message,{variant:"error"})}))}return Object(v.jsxs)("div",{className:"flex-container",children:[Object(v.jsx)(de,{elementRef:b,rawOrderText:n.text,handleClick:g}),Object(v.jsx)(_,{order:m,handleChange:O}),Object(v.jsx)(xe,{elementRef:x,transformDisabled:!n.text,copyDisabled:!s.text,handleOrderTransformFromText:k,handleOrderTransformFromEditor:function(){return l({id:n.id,text:m.format()})}}),Object(v.jsx)(ue,{elementRef:x,transformedOrderText:s.text,handleClick:function(e){l(Object(h.a)(Object(h.a)({},s),{},{text:e}))}}),Object(v.jsx)(ee,{handleChange:O,order:m}),Object(v.jsx)(ce,{order:m,shouldValidate:s.text}),Object(v.jsx)(st,{order:m,orderId:n.id,transformedOrder:s,handleResetClick:function(){r({text:"",id:null}),l({text:"",id:null}),j(Rt.default())},orderPoolUrl:"/confirmator/order-pool"}),Object(v.jsx)(f.b,{path:"/confirmator/order-pool",children:Object(v.jsx)(Tt,{handleExport:function(e){g(e),k(e),setTimeout((function(){return b.current.scrollIntoView({smooth:!0})}),700)}})})]})}var Wt=n(390),Ht=n(385),Bt=n(389),Xt=n(388),Jt=n(384),Kt=n(386),Vt=n(387),qt=n(391),_t=n(378),$t=n(191),Gt=n.n($t),Qt=n(192),Zt=n.n(Qt);n(324);function en(e){var t=e.periodFrom,n=e.periodTo,a=Math.ceil(n.diff(t,"week",!0)),r=Array(a).fill(t.isoWeek()).map((function(e,t){return e+t})),i=t.startOf("isoWeek").year();return r.map((function(e){return{periodFrom:R()().year(i).isoWeek(e).startOf("isoWeek").toISOString(),periodTo:R()().year(i).isoWeek(e+1).startOf("isoWeek").toISOString()}}))}function tn(e,t){var n=[];return t.forEach((function(t){var a=e.filter((function(e){return R()(e.confirmedAt).isSameOrAfter(R()(t.periodFrom))&&R()(e.confirmedAt).isBefore(R()(t.periodTo))}));n.push(a)})),n}function nn(e,t){return t.map((function(t,n){return{name:e[n],orderCount:t}}))}function an(e,t){return nn(e.map((function(e,n){return"Week ".concat(R()(t[n].periodFrom).isoWeek())})),e.map((function(e){return e.length})))}function rn(){var e=R()().startOf("month"),t=e.add(1,"month").startOf("month"),n=Object(a.useState)({periodFrom:e,periodTo:t}),r=Object(p.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)({}),o=Object(p.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)(null),b=Object(p.a)(u,2),f=b[0],x=b[1],O=Object(a.useState)([]),g=Object(p.a)(O,2),w=g[0],S=g[1],C=Object(a.useState)([]),T=Object(p.a)(C,2),N=T[0],D=T[1];function E(e){c(Object(h.a)(Object(h.a)({},i),{},Object(y.a)({},e.target.name,R()(e.target.value))))}function P(e){x(e.currentTarget);var t=w[e.currentTarget.dataset.rownumber],n={};t.forEach((function(e){var t=new Date(e.confirmedAt).toLocaleDateString("en-US",{weekday:"long"});null==n[t]&&(n[t]=[]),n[t].push(e)})),d(n)}Object(a.useEffect)(Object(j.a)(m.a.mark((function e(){var t,n,a,r,c,s,o,l,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=en(i),n=t[0],a=t[t.length-1],e.next=5,rt.getConfirmedOrders({periodFrom:n.periodFrom,periodTo:a.periodTo});case 5:r=e.sent,c=r.confirmedOrders,s=tn(c,t),o=tn(c,[i]),l=an(s,t),d=nn(["Total during specified period"],o.map((function(e){return e.length}))),S(s),D([].concat(Object(pt.a)(l),Object(pt.a)(d)));case 13:case"end":return e.stop()}}),e)}))),[i]);var I=Boolean(f),L=function(e){return e.orderCount>0&&!e.name.includes("Total")};return Object(v.jsxs)("div",{className:"statistics",children:[Object(v.jsxs)("div",{className:"row-flex-start gap-1 dates",children:[Object(v.jsx)(k.a,{onChange:E,name:"periodFrom",label:"Start of period",type:"date",value:i.periodFrom.format("YYYY-MM-DD")}),Object(v.jsx)(k.a,{onChange:E,name:"periodTo",label:"End of period",type:"date",value:i.periodTo.format("YYYY-MM-DD")})]}),Object(v.jsx)(Jt.a,{component:_t.a,children:Object(v.jsxs)(Ht.a,{"aria-label":"statistics table",children:[Object(v.jsx)(Kt.a,{children:Object(v.jsxs)(Vt.a,{children:[Object(v.jsx)(Xt.a,{children:"Statistics"}),Object(v.jsx)(Xt.a,{align:"right",children:"Confirmed orders"})]})}),Object(v.jsx)(Bt.a,{children:N.map((function(e,t){return Object(v.jsxs)(Vt.a,{children:[Object(v.jsx)(Xt.a,{component:"th",scope:"row",children:e.name}),Object(v.jsxs)(Xt.a,{align:"right",children:[Object(v.jsx)(Wt.a,{style:{padding:10},placement:"left",open:I,anchorEl:f,children:Object(v.jsx)(qt.a,{mouseEvent:"onMouseDown",touchEvent:"onTouchStart",onClickAway:function(){return x(null)},children:Object(v.jsx)(_t.a,{children:Object(v.jsx)("div",{style:{padding:10},children:Object.entries(l).map((function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];return Object(v.jsxs)("div",{children:[n,": ",a.length]},n)}))})})})}),Object(v.jsx)(W.a,{"data-rownumber":t,size:"small",onClick:L(e)?P:null,children:e.orderCount})]})]},e.name)}))})]})})]})}R.a.extend(Zt.a),R.a.extend(Gt.a);n(325);var cn=n.p+"static/media/paku24-logo.7602fc02.png";function sn(e){var t=e.isLogged;return Object(v.jsx)("div",{className:"logo",children:Object(v.jsxs)("div",{children:[Object(v.jsx)(s.b,{to:t?"/":"/login",children:Object(v.jsx)("img",{src:cn,alt:"Logo",width:"125px"})}),Object(v.jsx)("span",{className:"text",children:"CONFIRMATOR"})]})})}var on="/api/login",ln=Ne.a.create();function dn(){return(dn=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln.post(on,t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function un(){return(un=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln.post("".concat(on,"/token"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ln.interceptors.response.use((function(e){return e}),function(){var e=Object(j.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,"access token expired"!==t.response.data.error){e.next=13;break}return e.prev=2,e.next=5,Ne.a.post("/api/token");case 5:return e.next=7,Ne.a.post("/api/token/is-new");case 7:return e.abrupt("return",ln(n));case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",e.t0);case 13:return e.abrupt("return",Promise.reject(t));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}());var mn={loginWithCredentials:function(e){return dn.apply(this,arguments)},loginWithAccessToken:function(){return un.apply(this,arguments)}},jn=n(194),pn=n.n(jn),hn=function(e){var t=e.notification,n="black";return t.toLowerCase().includes("error")&&(n="red"),Object(v.jsx)(v.Fragment,{children:t?Object(v.jsxs)("div",{style:{backgroundColor:"white",color:n,padding:"10px",width:"80%",borderBottom:"3px solid darkgrey",fontSize:"small",display:"flex",alignItems:"center",marginBottom:"10px"},children:[Object(v.jsx)(pn.a,{}),Object(v.jsx)("span",{style:{marginLeft:"10px"},children:t})]}):null})};function bn(e){var t,n=e.updateUser,r={marginBottom:"7px",backgroundColor:"white"},i=Object(f.g)(),c=null===i||void 0===i||null===(t=i.location.state)||void 0===t?void 0:t.referrer,o=Object(a.useState)(""),l=Object(p.a)(o,2),d=l[0],u=l[1],h=Object(a.useState)(""),b=Object(p.a)(h,2),x=b[0],g=b[1],y=Object(a.useState)(!1),w=Object(p.a)(y,2),S=w[0],C=w[1],T=Object(a.useState)(!1),N=Object(p.a)(T,2),D=N[0],E=N[1],P=Object(a.useState)(""),I=Object(p.a)(P,2),L=I[0],z=I[1];function F(){return(F=Object(j.a)(m.a.mark((function e(t){var a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),z("Working..."),e.prev=2,e.next=5,mn.loginWithCredentials({username:d,password:x});case 5:a=e.sent,r=a.user,z("Done"),i.push((null===c||void 0===c?void 0:c.length)>1?c:"/confirmator"),n(r),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),E(!0),C(!0),setTimeout((function(){return C(!1)}),2e3),z("Error: ".concat((null===(s=e.t0.response)||void 0===s?void 0:s.data.error)||"Mystery \ud83d\udc7b"));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return Object(v.jsx)("div",{style:{margin:"30px 5px"},children:Object(v.jsxs)("div",{style:{width:"95%",margin:"0 auto",padding:20,backgroundColor:"lightgrey",borderBottom:"4px solid darkgrey"},children:[Object(v.jsxs)("div",{style:{color:"black",fontSize:"1.3rem",letterSpacing:"0.7px",marginTop:"10px",marginBottom:"15px"},children:["LOGIN",Object(v.jsxs)("span",{style:{color:"black",fontSize:"1.0rem",letterSpacing:"0.2px"},children:[" ","or ",Object(v.jsx)(s.b,{to:"/register",children:"request access"})]})]}),Object(v.jsx)(hn,{notification:L}),Object(v.jsxs)("form",{onSubmit:function(e){return F.apply(this,arguments)},style:{paddingBottom:"10px",height:"80%",display:"flex",flexFlow:"column wrap",justifyContent:"space-evenly"},children:[Object(v.jsx)(k.a,{className:"flex-item",style:r,error:D,required:!0,name:"username",value:d,onChange:function(e){var t=e.target;return u(t.value)},label:"Username",variant:"filled",size:"small"}),Object(v.jsx)(k.a,{className:"flex-item",style:r,error:D,type:"password",required:!0,value:x,name:"password",onChange:function(e){var t=e.target;return g(t.value)},label:"Password",variant:"filled",size:"small"}),Object(v.jsx)(O.a,{className:"flex-item",style:r,type:"submit",disabled:S,variant:"contained",size:"small",children:"Login"})]})]})})}function fn(){var e={marginBottom:"7px",backgroundColor:"white"},t=Object(a.useState)(""),n=Object(p.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(""),o=Object(p.a)(c,2),l=o[0],d=o[1],u=Object(a.useState)(""),h=Object(p.a)(u,2),b=h[0],f=h[1],x=Object(a.useState)(""),g=Object(p.a)(x,2),y=g[0],w=g[1],S=Object(a.useState)(!1),C=Object(p.a)(S,2),T=C[0],N=C[1];function D(e){return E.apply(this,arguments)}function E(){return(E=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ne.a.post("/api/registration/request-access",t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(j.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N(!0),w("Working..."),e.prev=3,e.next=6,D({name:r,email:l,purpose:b});case 6:n=e.sent,w(null===n||void 0===n?void 0:n.message),i(""),d(""),f(""),N(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),N(!1),w("Error: ".concat((null===e.t0||void 0===e.t0||null===(a=e.t0.response.data)||void 0===a?void 0:a.error)||"Mystery \ud83d\udc7b"));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}return Object(v.jsx)("div",{style:{margin:"30px 5px"},children:Object(v.jsxs)("div",{style:{width:"95%",padding:20,margin:"0 auto",backgroundColor:"lightgrey",borderBottom:"4px solid darkgrey"},children:[Object(v.jsxs)("div",{style:{color:"black",fontSize:"1.3rem",letterSpacing:"0.7px",marginTop:"10px",marginBottom:"15px"},children:["REQUEST ACCESS",Object(v.jsxs)("span",{style:{color:"black",fontSize:"1.0rem",letterSpacing:"0.2px"},children:[" ","or ",Object(v.jsx)(s.b,{to:"/login",children:"login"})]})]}),Object(v.jsx)(hn,{notification:y}),Object(v.jsxs)("form",{onSubmit:function(e){return P.apply(this,arguments)},style:{paddingBottom:"10px",height:"80%",display:"flex",flexFlow:"column wrap",justifyContent:"space-evenly"},children:[Object(v.jsx)(k.a,{style:e,required:!0,name:"name",value:r,onChange:function(e){var t=e.target;return i(t.value)},label:"Name",variant:"filled",size:"small"}),Object(v.jsx)(k.a,{style:e,type:"email",required:!0,value:l,name:"email",onChange:function(e){var t=e.target;return d(t.value)},label:"Email",variant:"filled",size:"small"}),Object(v.jsx)(k.a,{style:e,type:"text",required:!0,multiline:!0,rows:"3",value:b,name:"purpose",onChange:function(e){var t=e.target;return f(t.value)},label:"Why do you want to use this application?",variant:"filled",size:"small"}),Object(v.jsx)(O.a,{style:e,type:"submit",disabled:T,variant:"contained",size:"small",children:"Send request"})]})]})})}n(326);var xn="/api/logout";function On(){return(On=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ne.a.post(xn).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vn={logout:function(){return On.apply(this,arguments)}},gn=n(195),yn=n.n(gn);function kn(e){var t=e.handleClick;return Object(v.jsxs)(O.a,{style:{backgroundColor:"lightgrey"},variant:"outlined",size:"small",onClick:t,children:["Logout ",Object(v.jsx)(yn.a,{})]})}function wn(e){var t=e.user,n=e.logoutUser;return Object(v.jsxs)("div",{style:{backgroundColor:"darkgrey",padding:"15px",display:"flex",justifyContent:"space-between",borderTop:"3.5px solid lightgrey",marginTop:"auto"},children:[Object(v.jsx)("div",{style:{paddingTop:"2px",marginRight:"20px"},children:Object(v.jsxs)("span",{style:{fontFamily:"monospace"},children:[" ",t.username,Object(v.jsx)("br",{}),t.name]})}),Object(v.jsx)(kn,{handleClick:function(){return vn.logout().then(n)}})]})}function Sn(e){var t=e.error;return Object(v.jsxs)("div",{role:"alert",children:[Object(v.jsx)("p",{children:"Something went wrong:"}),Object(v.jsx)("pre",{style:{color:"red"},children:t.message})]})}function Cn(e){var t,n=e.dependsOn,a=e.path,r=e.children,i=Object(b.a)(e,["dependsOn","path","children"]),c=Object(f.g)();null!==n&&"Loading"!==n||(t=c.location.pathname);var s="Loading"===n,o=null===n&&Object(v.jsx)(f.a,{to:{pathname:"/login",state:{referrer:t}}});return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(gt,{loading:s,redirectComponent:o,children:Object(v.jsx)(f.b,Object(h.a)(Object(h.a)({},i),{},{path:a,children:r}))})})}var Tn=function(){var e,t=Object(a.useState)("Loading"),n=Object(p.a)(t,2),r=n[0],i=n[1],c=Object(f.g)();return null!==r&&"Loading"!==r||(e=c.location.pathname),Object(a.useEffect)(Object(j.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Le.setupInterceptor({logout:function(){return i(null)},notificate:function(){return Object(o.b)("You were logged out for security reasons. Your work has been saved. Login to continue.",{variant:"warning",autoHideDuration:1e4})}}),t.prev=1,t.next=4,mn.loginWithAccessToken();case 4:return n=t.sent,a=n.user,c.push(e),t.abrupt("return",i(a));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",i(null));case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(sn,{isLogged:null!==r&&"Loading"!==r}),Object(v.jsxs)(x.ErrorBoundary,{FallbackComponent:Sn,children:[Object(v.jsxs)(f.d,{children:[Object(v.jsx)(f.b,{path:"/register",children:Object(v.jsx)(fn,{})}),Object(v.jsx)(f.b,{path:"/login",children:null===r?Object(v.jsx)(bn,{updateUser:i}):Object(v.jsx)(f.a,{to:"/"})}),Object(v.jsx)(Cn,{dependsOn:r,path:"/confirmator",children:Object(v.jsx)(Ut,{})}),Object(v.jsx)(Cn,{dependsOn:r,path:"/statistics",children:Object(v.jsx)(rn,{})}),Object(v.jsx)(Cn,{dependsOn:r,exact:!0,path:"/",children:Object(v.jsx)(g,{})})]}),Object(v.jsx)(Cn,{dependsOn:r,path:"/",children:Object(v.jsx)(wn,{user:r,logoutUser:function(){return i(null)}})})]})]})},Nn=(n(327),r.a.createRef());c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsxs)(s.a,{basename:"/app",children:[Object(v.jsx)(o.a,{action:function(e){return Object(v.jsx)(d.a,{onClick:function(){Nn.current.closeSnackbar(e)}})},ref:Nn,maxSnack:3,dense:!0,autoHideDuration:5e3,anchorOrigin:{horizontal:"left",vertical:"top"}}),Object(v.jsx)(Tn,{})]})}),document.getElementById("root"))},57:function(e){e.exports=JSON.parse('{"minAmount":10,"maxAmount":50,"step":5,"minPeriod":7,"maxPeriod":null,"price":0.1,"timeUnit":"day","deliveryFee":14,"pickupFee":14}')},72:function(e){e.exports=JSON.parse('{"payment":{"Maksukortti":"\ud83d\udcb3","Bank card":"\ud83d\udcb3","K\xe4teinen":"\ud83c\udf81","Cash":"\ud83c\udf81","Lasku":"\ud83d\udcdc","Lasku/Osamaksu":"\ud83d\udcdc","Invoice/Instalment payment":"\ud83d\udcdc"},"service":{"Pakettiauto ja kuljettaja":"\ud83d\ude9a","Pakettiauto ja muuttomies":"\ud83d\ude9b","Pakettiauto ja kaksi muuttomiest\xe4":"\ud83d\ude9b\ud83d\ude9b","Nouto/tyhjennyspalvelu yhdell\xe4 kantajalla":"\ud83d\uded2","Nouto/tyhjennyspalvelu kahdella kantajalla":"\ud83d\uded2\ud83d\uded2","Van and driver (doesn\'t assist in carrying)":"\ud83d\ude9a","Van and mover":"\ud83d\ude9b","Van and two movers":"\ud83d\ude9b\ud83d\ude9b","Recycle service with one carrier":"\ud83d\uded2","Recycle service with two carriers":"\ud83d\uded2\ud83d\uded2"},"fees":{"Viikonloppulis\xe4":"\ud83c\udf89","Pyh\xe4lis\xe4":"\ud83c\udf89","Kuunvaihdelis\xe4":"\ud83c\udf89","Aamulis\xe4":"\ud83c\udf1e","Y\xf6lis\xe4":"\ud83c\udf1a"},"misc":{"outsideCapital":"\ud83d\udea7","fromOutsideToCapital":"\ud83d\udea7"},"size":{"XL":"XL"},"boxes":{"delivery":"\ud83d\udce6","pickup":"\ud83d\udce6"}}')},76:function(e){e.exports=JSON.parse('[{"id":1,"name":"Pakettiauto ja kuljettaja","price":50,"priceXL":50},{"id":2,"name":"Pakettiauto ja muuttomies","price":70,"priceXL":70},{"id":3,"name":"Pakettiauto ja kaksi muuttomiest\xe4","price":90,"priceXL":90},{"id":4,"name":"Nouto/tyhjennyspalvelu yhdell\xe4 kantajalla","price":70,"priceXL":70},{"id":5,"name":"Nouto/tyhjennyspalvelu kahdella kantajalla","price":90,"priceXL":90},{"id":6,"name":"Van and driver (doesn\'t assist in carrying)","price":50,"priceXL":50},{"id":7,"name":"Van and mover","price":70,"priceXL":70},{"id":8,"name":"Van and two movers","price":90,"priceXL":90},{"id":9,"name":"Recycle service with one carrier","price":70,"priceXL":70},{"id":10,"name":"Recycle service with two carriers","price":100,"priceXL":100}]')},82:function(e){e.exports=JSON.parse('[{"id":1,"name":"Maksukortti"},{"id":2,"name":"K\xe4teinen"},{"id":3,"name":"Lasku/Osamaksu"},{"id":4,"name":"Bank card"},{"id":5,"name":"Cash"},{"id":6,"name":"Invoice/Instalment payment"}]')},89:function(e){e.exports=JSON.parse('{"morning":{"name":"Aamulis\xe4","amount":20},"night":{"name":"Y\xf6lis\xe4","amount":20},"holiday":{"name":"Pyh\xe4lis\xe4","amount":15},"weekend":{"name":"Viikonloppulis\xe4","amount":15},"firstOrLastDayOfTheMonth":{"name":"Kuunvaihdelis\xe4","amount":15},"bill":{"name":"Laskulis\xe4","amount":14}}')}},[[328,1,2]]]);
//# sourceMappingURL=main.d3a2531f.chunk.js.map