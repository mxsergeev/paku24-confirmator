(this["webpackJsonppaku24-confirmator-front"]=this["webpackJsonppaku24-confirmator-front"]||[]).push([[0],{143:function(e,t,n){},170:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),i=n.n(c),s=n(26),o=n(11),l=n(7),u=n.n(l),d=n(12),j=n(17),b=n(127),p=n(33),m=n(9),h=n(28),f=n(256),x=(n(143),n(302)),O=n(291),v=n(301),g=n(1);function y(e){var t=e.value,n=e.label,r=e.name,c=e.custom,i=e.handleChange,s=e.disabled,l=Object(a.useState)(!1),u=Object(o.a)(l,2)[1],d=n.toLowerCase(),b=Object(j.g)();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(O.a,{disabled:s,className:"button-info",variant:"outlined",onClick:function(){u(!0),b.push(c?"/custom/".concat(d):"/edit/".concat(d))},children:[n,"to:",t]}),Object(g.jsx)(j.b,{path:["/custom/".concat(d),"/edit/".concat(d)],children:Object(g.jsx)(x.a,{open:!0,onClose:function(){u(!1),b.push(c?"/custom/":"/")},disableScrollLock:!0,children:Object(g.jsx)("div",{style:{position:"absolute",maxWidth:500,minWidth:300,padding:20,backgroundColor:"white",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(g.jsx)(v.a,{label:n,name:r,variant:"outlined",onChange:i,value:t,type:"Email"===n?n:"",autoFocus:!0})})})})]})}var C=n(115),k=n(39),S=n(116),w=n.n(S);function N(e){var t=e.handleClick;return Object(g.jsxs)(O.a,{className:"button-one-third flex-item",variant:"text",size:"small",onClick:t,children:["Transform ",Object(g.jsx)(w.a,{})]})}function T(e){var t,n=e.order,a=e.handleChange,r=e.handleClick,c={marginTop:5},i={marginLeft:5,marginRight:5};return Object(g.jsxs)("div",{className:"basic-flex",style:{marginTop:"15px"},children:[Object(g.jsx)(v.a,{fullWidth:!0,style:i,className:"flex-item",name:"ISODate",value:null===n||void 0===n||null===(t=n.date)||void 0===t?void 0:t.ISODate,onChange:a,type:"date"}),Object(g.jsxs)("div",{className:"flex-100-space-between flex-item",style:i,children:[Object(g.jsx)(v.a,{className:"time-duration",style:Object(m.a)(Object(m.a)({},i),{},{paddingRight:10}),name:"time",value:null===n||void 0===n?void 0:n.time,onChange:a,inputProps:{step:"900"},type:"time"}),Object(g.jsxs)(C.a,{className:"time-duration",style:Object(m.a)(Object(m.a)({},i),{},{paddingLeft:10}),name:"duration",value:null===n||void 0===n?void 0:n.duration,onChange:a,children:[Object(g.jsx)("option",{value:1,children:"1h"}),Object(g.jsx)("option",{value:1.5,children:"1.5h"}),Object(g.jsx)("option",{value:2,children:"2h"}),Object(g.jsx)("option",{value:2.5,children:"2.5h"}),Object(g.jsx)("option",{value:3,children:"3h"}),Object(g.jsx)("option",{value:3.5,children:"3.5h"}),Object(g.jsx)("option",{value:4,children:"4h"}),Object(g.jsx)("option",{value:4.5,children:"4.5h"}),Object(g.jsx)("option",{value:5,children:"5h"}),Object(g.jsx)("option",{value:5.5,children:"5.5h"}),Object(g.jsx)("option",{value:6,children:"6h"}),Object(g.jsx)("option",{value:6.5,children:"6.5h"}),Object(g.jsx)("option",{value:7,children:"7h"}),Object(g.jsx)("option",{value:7.5,children:"7.5h"}),Object(g.jsx)("option",{value:8,children:"8h"}),Object(g.jsx)("option",{value:8.5,children:"8.5h"}),Object(g.jsx)("option",{value:9,children:"9h"}),Object(g.jsx)("option",{value:9.5,children:"9.5h"}),Object(g.jsx)("option",{value:10,children:"10h"})]})]}),Object(g.jsx)(C.a,{fullWidth:!0,style:i,className:"flex-item",name:"serviceName",value:null===n||void 0===n?void 0:n.serviceName,onChange:a,children:k.map((function(e){return Object(g.jsx)("option",{value:e.name,children:e.name},e.id)}))}),Object(g.jsxs)(C.a,{fullWidth:!0,style:i,className:"flex-item",name:"paymentType",value:null===n||void 0===n?void 0:n.paymentType,onChange:a,children:[Object(g.jsx)("option",{value:"Maksukortti",children:"Maksukortti"}),Object(g.jsx)("option",{value:"K\xe4teinen",children:"K\xe4teinen"}),Object(g.jsx)("option",{value:"Lasku/Osamaksu",children:"Lasku"})]}),Object(g.jsx)(v.a,{fullWidth:!0,style:c,className:"flex-item",required:!0,name:"address",value:null===n||void 0===n?void 0:n.address,onChange:a,label:"Address",variant:"outlined",size:"small"}),Object(g.jsx)(v.a,{fullWidth:!0,multiline:!0,style:c,className:"flex-item",name:"destination",value:null===n||void 0===n?void 0:n.destination,onChange:a,label:"Destination",variant:"outlined",size:"small"}),Object(g.jsx)(v.a,{fullWidth:!0,required:!0,style:c,className:"flex-item",name:"name",value:null===n||void 0===n?void 0:n.name,onChange:a,label:"Name",variant:"outlined",size:"small"}),Object(g.jsx)(v.a,{fullWidth:!0,style:c,className:"flex-item",name:"email",value:null===n||void 0===n?void 0:n.email,onChange:a,type:"email",label:"Email",variant:"outlined",size:"small"}),Object(g.jsx)(v.a,{fullWidth:!0,style:c,className:"flex-item",required:!0,name:"phone",value:null===n||void 0===n?void 0:n.phone,onChange:a,label:"Phonenumber",variant:"outlined",size:"small"}),Object(g.jsx)(f.a,{style:c,className:"flex-item textarea-2",rowsMin:3,cols:27,name:"comment",value:null===n||void 0===n?void 0:n.comment,placeholder:"Additional information.",onChange:a}),Object(g.jsx)(N,{className:"flex-item",handleClick:r})]})}var E=n(305),I=n(299),A=n(298),L=n(297),D=n(42);function z(e){var t=e.children,n=e.handleClose,a=Object(D.a)(),r=Object(L.a)(a.breakpoints.down("sm"));return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(E.a,{fullScreen:r,open:!0,onClose:n,"aria-labelledby":"responsive-dialog-title",disableScrollLock:!0,children:[Object(g.jsx)(A.a,{children:t}),Object(g.jsx)(I.a,{children:Object(g.jsx)(O.a,{style:{backgroundColor:"white"},variant:"text",onClick:n,children:"Close"})})]})})}function P(e){var t=e.order,n=e.handleFormatting,a=e.handleChange,r=Object(j.g)(),c=function(){r.push("/")};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.a,{className:"button-one-third",variant:"outlined",onClick:function(){r.push("/edit")},children:"Edit"}),Object(g.jsx)(j.b,{exact:!0,path:"/edit",children:Object(g.jsx)(z,{handleClose:c,children:Object(g.jsx)(T,{order:t,handleChange:a,handleClick:function(){n(),c()}})})})]})}var _=n(118),F=n.n(_),U=n(117),R=n.n(U),M=n(52),W=n.n(M),H="/api/token";function B(){return(B=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.axiosInstance.post(H);case 2:if(n=e.sent,!(null===(t=n.response)||void 0===t?void 0:t.data.error)){e.next=5;break}return e.abrupt("return",n);case 5:return e.next=7,q.axiosInstance.post("".concat(H,"/is-new"));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K={refreshTokens:function(){return B.apply(this,arguments)}},X=W.a.create();var q={axiosInstance:X,setupInterceptor:function(e){X.interceptors.response.use((function(e){return e}),function(){var t=Object(d.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.config,"access token expired"!==n.response.data.error){t.next=8;break}return t.next=4,K.refreshTokens();case 4:if(!t.sent){t.next=7;break}return t.abrupt("return",null);case 7:return t.abrupt("return",X(a));case 8:if("refresh token expired"!==n.response.data.error&&"invalid refresh token"!==n.response.data.error&&"token missing"!==n.response.data.error){t.next=11;break}return e.logout(),t.abrupt("return",n);case 11:return 429===n.response.status&&setTimeout((function(){return null}),1500),t.abrupt("return",Promise.reject(n));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},G="/api/order-pool";function V(){return(V=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.axiosInstance.get(G).then((function(e){return null===e||void 0===e?void 0:e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.axiosInstance.get("".concat(G,"/deleted")).then((function(e){return null===e||void 0===e?void 0:e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.axiosInstance.get("".concat(G,"/confirm/").concat(t)).then((function(e){return null===e||void 0===e?void 0:e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.axiosInstance.put("".concat(G,"/delete/").concat(t));case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.axiosInstance.put("".concat(G,"/retrieve/").concat(t));case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z={get:function(){return V.apply(this,arguments)},getDeleted:function(){return Y.apply(this,arguments)},confirm:function(e){return J.apply(this,arguments)},remove:function(e){return $.apply(this,arguments)},retrieve:function(e){return Q.apply(this,arguments)}};function ee(e){var t=e.loading,n=e.redirectComponent,a=void 0===n?null:n,r=e.children;return Object(g.jsxs)(g.Fragment,{children:[t&&Object(g.jsx)("p",{children:"Loading..."}),a,!t&&!a&&r]})}var te=n(128);n(170);function ne(e){var t=e.orders,n=e.handleExport,r=e.handleDeletion,c=e.labelForDeletion,i=Object(a.useState)([]),s=Object(o.a)(i,2),l=s[0],u=s[1];function d(e){u(Object(te.a)(l.map((function(t){return t.id===e.id?Object(m.a)(Object(m.a)({},e),{},{hidden:!t.hidden,className:t.hidden?"basic-order-style":"basic-order-style confirmed-order-style"}):t}))))}return Object(a.useEffect)((function(){u(t.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isNew:new Date(e.date).toDateString()===new Date(Date.now()).toDateString(),className:e.confirmed?"basic-order-style confirmed-order-style":"basic-order-style",hidden:e.confirmed})})))}),[t]),0===t.length?Object(g.jsx)("p",{children:"Nothing found"}):l.map((function(e){var t;return Object(g.jsxs)("div",{className:"order-pool-list",children:[Object(g.jsxs)("div",{className:"order-top-bar",children:[Object(g.jsxs)("div",{className:"order-status-icons-container",children:[e.isNew&&Object(g.jsx)("span",{className:"order-status-new-order order-status-icon",children:"NEW"}),Object(g.jsxs)("span",{className:"order-status-icon ".concat(e.confirmed?"order-status-icon order-status-confirmed":"order-status-icon order-status-notification"),children:[e.confirmed?"\u2714":"\u2755"," "]})]}),Object(g.jsxs)("div",{className:"order-actions",children:[Object(g.jsx)(O.a,{style:{padding:0,fontSize:"0.9rem"},variant:"text",size:"small",onClick:function(){return r(e.id)},children:c}),Object(g.jsx)(O.a,{disabled:e.confirmed,style:{padding:0,fontSize:"0.8rem"},onClick:function(){return n(e)},variant:"text",size:"small",children:"Export"}),Object(g.jsx)(O.a,{style:{padding:0},variant:"text",size:"small",onClick:function(){return d(e)},children:e.hidden?"Show \u2795":"Hide \u2796"})]})]}),Object(g.jsx)("div",{tabIndex:"0",label:"Show hidden order if it's confirmed.",role:"button",onClick:e.confirmed?function(){return d(e)}:null,onKeyPress:e.confirmed?function(){return d(e)}:null,className:"".concat(e.className," list-item-1"),dangerouslySetInnerHTML:{__html:null===(t=e.text)||void 0===t?void 0:t.split("\n").join("<br>")}})]},e.id)}))}function ae(e){var t=e.handleToConfirmator,n="inbox",r="trashcan",c=Object(a.useState)([]),i=Object(o.a)(c,2),s=i[0],l=i[1],j=Object(a.useState)(!0),b=Object(o.a)(j,2),h=b[0],f=b[1],x=Object(a.useState)(n),y=Object(o.a)(x,2),C=y[0],k=y[1],S=Object(a.useState)({inbox:{searchText:"",showOnlyNotConfirmed:!1},trashcan:{searchText:"",showOnlyNotConfirmed:!1}}),w=Object(o.a)(S,2),N=w[0],T=w[1],E=Object(a.useState)(s),I=Object(o.a)(E,2),A=I[0],L=I[1],D=s.length,z=s.filter((function(e){return!e.confirmed})).length;function P(e,t,n){var a;return function(e,t){return t?e.filter((function(e){return!1===(null===e||void 0===e?void 0:e.confirmed)})):e}((a=e,n.filter((function(e){return e.text.toLowerCase().includes(null===a||void 0===a?void 0:a.toLowerCase().trim())}))),t)}function _(e){k(e.target.dataset.tabname)}function U(){return(U=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.remove(t);case 2:l(s.filter((function(e){return e.id!==t}))),L(s.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.retrieve(t);case 2:l(s.filter((function(e){return e.id!==t}))),L(s.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),C!==n){e.next=7;break}return e.next=4,Z.get();case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,Z.getDeleted();case 9:e.t0=e.sent;case 10:if(t=e.t0){e.next=13;break}return e.abrupt("return");case 13:l(t),a=P(N[C].searchText,N[C].showOnlyNotConfirmed,t),L(a),f(!1);case 17:case"end":return e.stop()}}),e)}))),[C]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"tab-panel",children:[Object(g.jsx)(O.a,{onClick:_,className:"p-0",variant:"text",size:"small",children:Object(g.jsx)("h3",{"data-tabname":n,className:C===n?"tab-panel-item tab-panel-item-selected":"tab-panel-item",children:"Inbox"})}),Object(g.jsx)(O.a,{onClick:_,className:"p-0",variant:"text",size:"small",children:Object(g.jsx)("h3",{"data-tabname":r,className:C===r?"tab-panel-item tab-panel-item-selected":"tab-panel-item",children:"Trashcan"})})]}),Object(g.jsxs)("div",{className:"filters-tab",children:[Object(g.jsxs)("span",{className:"filters-tab-orders-count",children:[A.length,"/",s.length]}),Object(g.jsx)(v.a,{className:"flex-item",type:"text",name:"searchText",placeholder:"Search",value:N[C].searchText,onChange:function(e){var t=N[C];T(Object(m.a)(Object(m.a)({},N),{},Object(p.a)({},C,Object(m.a)(Object(m.a)({},t),{},{searchText:e.target.value}))));var n=P(e.target.value,t.showOnlyNotConfirmed,s);L(n)}}),z>0&&Object(g.jsxs)(O.a,{className:"p-0 filters-tab-orders-status-icon",size:"small",onClick:function(){return function(e){var t=N[C];T(Object(m.a)(Object(m.a)({},N),{},Object(p.a)({},C,Object(m.a)(Object(m.a)({},t),{},{showOnlyNotConfirmed:e}))));var n=P(t.searchText,e,s);L(n)}(!N[C].showOnlyNotConfirmed)},children:[Object(g.jsx)("span",{style:{fontSize:"1rem"},children:N[C].showOnlyNotConfirmed?D:z}),Object(g.jsx)("span",{className:"order-status-icon order-status-notification ".concat(N[C].showOnlyNotConfirmed&&"order-status-icon-selected"),children:N[C].showOnlyNotConfirmed?"\u2714&\u2755":"\u2755"})]})]}),Object(g.jsx)(ee,{loading:h,children:Object(g.jsx)(ne,{orders:A,handleExport:function(e){t({text:e.text,id:e.id})},labelForDeletion:C===r?Object(g.jsx)(R.a,{}):Object(g.jsx)(F.a,{}),handleDeletion:C===r?function(e){return M.apply(this,arguments)}:function(e){return U.apply(this,arguments)}})})]})}function re(e){var t=e.handleExportingToConfirmator,n=Object(j.g)(),a=function(){n.goBack()};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.a,{className:"button-one-third",variant:"contained",onClick:function(){n.push("/order-pool")},children:"Open Order Pool"}),Object(g.jsx)(j.b,{path:"/order-pool",children:Object(g.jsx)(z,{handleClose:a,children:Object(g.jsx)(ae,{handleToConfirmator:function(e){t(e),a()}})})})]})}var ce="/api/email";function ie(){return(ie=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.axiosInstance.post("".concat(ce,"/send-confirmation"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se="/api/calendar";function oe(e,t,n){return le.apply(this,arguments)}function le(){return(le=Object(d.a)(u.a.mark((function e(t,n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.axiosInstance.post(se,{entry:t,order:n,options:a});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue="/api/sms";function de(e){return je.apply(this,arguments)}function je(){return(je=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.axiosInstance.post(ue,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t,n){var a=1*t.split(":")[0],r=e.getDay(),c=(6===r||7===r||0===r)&&15,i=e.getDate(),s=!![new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),1].includes(i)&&15;return c&&(s=!1),[{value:c,name:"VIIKONLOPPULIS\xc4"},{value:s,name:"KUUNVAIHDELIS\xc4"},{value:a<8&&20,name:"AAMULIS\xc4"},{value:a>20&&20,name:"Y\xd6LIS\xc4"},{value:("Lasku"===n||"Lasku/Osamaksu"===n||"Invoice/Instalment payment"===n)&&14,name:"LASKULIS\xc4"}]}function pe(e){return"Cannot find ".concat(e,". Invalid format.")}function me(e){var t=new Date(e),n=t.getDate(),a=t.getMonth()+1,r=t.getFullYear();return n<10&&(n="0".concat(n)),a<10&&(a="0".concat(a)),"".concat(n,"-").concat(a,"-").concat(r)}function he(e){var t=e.filter((function(e){return e.value}));return{array:t.map((function(e){return e.name})),string:t.map((function(e){return"\n".concat(e.name,"\n").concat(e.value,"\u20ac")})).reduce((function(e,t){return e+t}),"")}}function fe(e){var t=e.split("\n"),n=[];return t.forEach((function(e){return n.push(e.trim())})),n.join("\n").replaceAll("\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014","").replaceAll("------------------------","")}function xe(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(d.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.indexOf(n),r=t.slice(a),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){var t=/(?<=Date and time: \w+, )\w+ \d+(th|rd|st|nd)? \w+/.exec(e);if(!t)throw new Error(pe("date"));var n=new Date("".concat(t[0].replace(/th|rd|st|nd/,""),"Z")),a=/\d+:\d+/.exec(e)[0],r=new Date("\n    ".concat(n.getFullYear(),"\n    ").concat(n.getMonth()+1,"\n    ").concat(n.getDate(),"\n    ").concat(a)),c=r.toISOString().split("T")[0];return{confirmationFormat:me(r),original:r,ISODate:c,time:a}}function ge(e){var t=/\d+(\.\d+)?(?=\sh.)/.exec(e);if(!t)throw new Error(pe("duration"));return t[0]}function ye(e){var t="Payment Type: ",n=e.indexOf(t)+t.length,a=e.indexOf("PRICE"),r=e.slice(n,a).trim(),c=r.match(/\W+/g).filter((function(e){return"/"!==e&&" "!==e&&"\xe4"!==e})),i=r.indexOf(c[0].trim()),s=r.slice(0,i).trim();if(!s)throw new Error(pe("payment type"));return s}function Ce(e){return be(ve(e).original,ve(e).time,ye(e))}function ke(e){var t=/(?<=PRICE: )\d+/.exec(e);if(!t)throw new Error(pe("price"));var n=t,a=Object(o.a)(n,1);t=a[0],Ce(e).filter((function(e){return e.value})).forEach((function(e){return t-=e.value}));var r=function(e){var t=e.indexOf("\u2014 Price: "),n=e.indexOf("\u2014 Booking time start"),a=e.slice(t,n);return a&&a.match(/\d+/)[0]}(e);t-=r;var c=ge(e),i=k.filter((function(e){return e.price===t/c}));if(0===i.length)throw new Error("Cannot recognize service. Invalid price or duration.");return i[0]}function Se(e,t){var n="".concat(t,": "),a="Start location"===t?"End location":"Name",r=e.indexOf(n)+n.length,c=e.indexOf(a),i=e.slice(r,c).replaceAll(",","").trim(),s=i.slice(0,i.indexOf(" / ")),o=i.match(/\d{5}/);o=o&&o[0];var l=i.slice(i.indexOf(" / ")+" / ".length),u=s.match(/\D+/);u=u&&u[0].trim();var d=l.replace(o,"").trim();if(d=d||null,(!/\d+/.test(l)||l.includes(o)&&l.length<15)&&(d=s.replace(o,"").trim(),u=(u=l.match(/\D+/))&&u[0].trim()),d.includes(u)&&(d=d.replace(u,"").trim()),"Start location"===t&&!d)throw new Error(pe("address"));return{address:d,city:u,postalCode:o}}function we(e){var t="Name: ",n=e.indexOf(t)+t.length,a=e.indexOf("Email"),r=e.slice(n,a).trim();if(!r)throw new Error(pe("name"));return r}function Ne(e){var t=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.exec(e);if(!t)throw new Error(pe("email"));return t[0]}function Te(e){var t=/(?<=Phone: )[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*/.exec(e);if(!t)throw new Error(pe("phone"));return t[0].trim()}function Ee(e){var t=/(?<=Comment: )(.*\s*)*/.exec(e);t=t?t[0]:"";var n=/\n\n\-\-\nT\xe4m\xe4 viesti l\xe4hetettiin sivustolta Paku24\.fi \(https:\/\/paku24\.fi\)/;return n.exec(t)&&(t=t.replace(n,"")),t}var Ie=n(119),Ae=n.n(Ie);function Le(e){var t=e.inputRef;return Object(g.jsxs)(O.a,{className:"button-one-third flex-item",variant:"text",size:"small",onClick:function(){t.current.select(),document.execCommand("copy"),h.a.info("Copied!",500)},children:["Copy ",Object(g.jsx)(Ae.a,{})]})}var De=n(295),ze=n(294),Pe=n(306),_e=n(304),Fe=n(303),Ue=n(307);function Re(e){var t=e.handleChange,n=e.options;return Object(g.jsxs)("div",{className:"checkbox-container",children:[Object(g.jsxs)(ze.a,{className:"checkbox-distance flex-item",hiddenLabel:!1,size:"small",children:[Object(g.jsx)(De.a,{component:"legend",children:"Pick one:"}),Object(g.jsxs)(Ue.a,{name:"gender1",value:n.distance,onChange:t,children:[Object(g.jsx)(Pe.a,{name:"distance",value:"insideCapital",control:Object(g.jsx)(Fe.a,{color:"default"}),label:"\ud83c\udfd9 Inside capital"}),Object(g.jsx)(Pe.a,{name:"distance",value:"outsideCapital",control:Object(g.jsx)(Fe.a,{color:"default"}),label:"\ud83c\udfde Outside capital"}),Object(g.jsx)(Pe.a,{name:"distance",value:"fromCapitalToOutside",control:Object(g.jsx)(Fe.a,{color:"default"}),label:"\ud83c\udfd9->\ud83c\udfde From capital"}),Object(g.jsx)(Pe.a,{name:"distance",value:"fromOutsideToCapital",control:Object(g.jsx)(Fe.a,{color:"default"}),label:"\ud83c\udfde->\ud83c\udfd9 To capital"})]})]}),Object(g.jsxs)(ze.a,{className:"basic-flex",size:"small",children:[Object(g.jsx)(Pe.a,{size:"small",className:"flex-item",control:Object(g.jsx)(_e.a,{checked:n.hsy,onChange:t,color:"primary"}),name:"hsy",label:"\u267b HSY",labelPlacement:"start"}),Object(g.jsx)(Pe.a,{className:"flex-item",control:Object(g.jsx)(_e.a,{checked:n.secondCar,onChange:t,color:"primary"}),name:"secondCar",label:"Second car",labelPlacement:"start"}),Object(g.jsx)(Pe.a,{className:"flex-item",control:Object(g.jsx)(_e.a,{checked:n.XL,onChange:t,color:"primary"}),name:"XL",label:"XL",labelPlacement:"start"})]})]})}var Me=n(120),We=n.n(Me);function He(e){var t=e.handleClick,n=e.disabled,a=e.statusText;return Object(g.jsx)(O.a,{disabled:n,onClick:t,className:"button-phone flex-item",variant:"contained",size:"small",children:a?Object(g.jsx)("span",{style:{color:"grey"},children:a}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{children:"Send"}),Object(g.jsx)(We.a,{})]})})}var Be=n(121),Ke=n.n(Be);function Xe(e){var t=e.handleClick,n=e.disabled,a=e.statusText;return Object(g.jsx)(O.a,{disabled:n,className:"button-email flex-item",variant:"contained",size:"small",onClick:t,children:a?Object(g.jsx)("span",{style:{color:"grey"},children:a}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{children:"Send"}),Object(g.jsx)(Ke.a,{})]})})}var qe=n(122),Ge=n.n(qe);function Ve(e){var t=e.handleClick,n=e.disabled,a=e.statusText;return Object(g.jsx)(O.a,{disabled:n,className:"button-email flex-item",variant:"contained",size:"small",onClick:t,children:a?Object(g.jsx)("span",{style:{color:"grey"},children:a}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{children:"Add"}),Object(g.jsx)(Ge.a,{})]})})}var Ye=n(123),Je=n.n(Ye);function $e(e){var t=e.handleClick;return Object(g.jsxs)(O.a,{className:"button-one-third flex-item",variant:"contained",size:"small",onClick:t,children:["New order ",Object(g.jsx)(Je.a,{})]})}var Qe=n(60),Ze=n.n(Qe),et=n(124),tt=n.n(et);function nt(e){var t=e.order,n=e.dispatchOrderActionsStatus_error,r=e.confirmation,c=e.custom,i=Object(a.useState)([]),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(a.useState)(!1),j=Object(o.a)(d,2),b=j[0],p=j[1],m=Object(a.useState)(!1),h=Object(o.a)(m,2),f=h[0],x=h[1];Object(a.useEffect)((function(){if(b)n(!1);else{var e=[{id:1,type:"date",error:Ze.a.isBefore(t.date.ISODate,(new Date).toISOString()),message:"earlier than today. Value: ".concat(t.date.confirmationFormat||"No value")},{id:2,type:"address",error:Ze.a.isEmpty(t.address),message:"missing or is in incorrect format. Value: ".concat(t.address||"No value")},{id:3,type:"phone",error:!Ze.a.isMobilePhone(t.phone,["fi-FI","es-ES","sv-SE"]),message:"missing or is in incorrect format. Value: ".concat(t.phone||"No value")},{id:4,type:"email",error:!c&&!Ze.a.isEmail(t.email),message:"missing or is in incorrect format. Value: ".concat(t.email||"No value")}];u(e);var a=e.some((function(e){return e.error}));n(a),x(a)}}),[t.date,t.phone,t.address,t.email,b,c]);var O={color:"red"},v={color:"gray"},y=b?v:null;return Object(g.jsxs)(g.Fragment,{children:[r?Object(g.jsx)("div",{style:{borderTop:"1px solid gray",borderBottom:"1px solid gray",padding:"15px 0 15px 0",margin:"10px 0 10px 0"},className:"flex-100-space-between",children:Object(g.jsxs)("div",{style:y,children:[Object(g.jsx)(tt.a,{}),l.map((function(e){return e.error?Object(g.jsxs)("div",{children:[Object(g.jsxs)("span",{style:b?v:O,children:[e.type," "]}),e.message]},e.id):null}))]})}):null,f&&r?Object(g.jsx)(Pe.a,{style:{alignSelf:"flex-end"},control:Object(g.jsx)(_e.a,{checked:b,onChange:function(e){p(e.target.checked)},color:"default"}),label:"Ignore"}):null]})}function at(e){var t=e.custom,n=Object(a.useState)({text:"",id:null}),r=Object(o.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(""),l=Object(o.a)(s,2),b=l[0],x=l[1],O=Object(a.useState)(""),v=Object(o.a)(O,2),C=v[0],S=v[1],w=Object(a.useMemo)((function(){return{date:{original:new Date,ISODate:(new Date).toISOString().split("T")[0],confirmationFormat:me(new Date)},time:"".concat((new Date).toTimeString().split(":")[0],":").concat((new Date).toTimeString().split(":")[1]),duration:1,serviceName:k[0].name,servicePrice:k[0].price,paymentType:"Maksukortti",fees:{array:[],string:""},address:"",destination:"",name:"",email:"",phone:"",comment:""}}),[]),E=Object(a.useState)(w),I=Object(o.a)(E,2),A=I[0],L=I[1],D={email:{status:null,disable:!1},sms:{status:null,disable:!1},calendar:{status:null,disable:!1},error:!1};function z(e){return e}var _=Object(a.useReducer)((function(e,t){switch(t.type){case"CHANGE_ACTIONS_STATUS_EMAIL":return Object(m.a)(Object(m.a)({},e),{},{email:t.payload});case"CHANGE_ACTIONS_STATUS_SMS":return Object(m.a)(Object(m.a)({},e),{},{sms:t.payload});case"CHANGE_ACTIONS_STATUS_CALENDAR":return Object(m.a)(Object(m.a)({},e),{},{calendar:t.payload});case"CHANGE_ACTIONS_STATUS_ERROR":return Object(m.a)(Object(m.a)({},e),{},{error:t.payload});case"CHANGE_ACTIONS_STATUS_RESET":return D;default:throw new Error}}),D,z),F=Object(o.a)(_,2),U=F[0],R=F[1];function M(e,t){R({type:"CHANGE_ACTIONS_STATUS_EMAIL",payload:{status:e,disable:t}})}function W(e,t){R({type:"CHANGE_ACTIONS_STATUS_CALENDAR",payload:{status:e,disable:t}})}function H(e,t){R({type:"CHANGE_ACTIONS_STATUS_SMS",payload:{status:e,disable:t}})}var B=Object(a.useMemo)((function(){return{distance:"insideCapital",hsy:!1,secondCar:!1,XL:!1}}),[]),K=Object(a.useState)(B),X=Object(o.a)(K,2),q=X[0],G=X[1],V=Object(a.useRef)(null),Y=Object(a.useRef)(null);function J(){i({text:"",id:null}),L(w),G(B),S(""),R({type:"CHANGE_ACTIONS_STATUS_RESET"})}function $(){return($=Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=C)){e.next=9;break}return H("Waiting",!0),e.next=6,de({msg:t,phone:A.phone});case 6:n=e.sent,H("Done",!0),h.a.info("".concat(n.message),500);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),H("Error",!1),h.a.fail(null===(a=e.t0.response)||void 0===a?void 0:a.data.error,2e3);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Q(){return(Q=Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe(C,A.address);case 3:if(!(t=e.sent)){e.next=14;break}return W("Waiting",!0),e.next=8,oe(t,A,q);case 8:if(n=e.sent,!c.id){e.next=12;break}return e.next=12,Z.confirm(c.id);case 12:W("Done",!0),h.a.info("".concat(n.message,"\n").concat(n.createdEvent),3e3);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),W("Error",!1),h.a.fail(null===(a=e.t0.response)||void 0===a?void 0:a.data.error,2e3);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function ee(e){L(e),S(function(e){var t;try{t="VARAUKSEN TIEDOT\n".concat(e.date.confirmationFormat,"\nALKAMISAIKA\nKlo ").concat(e.time," (+/-15min)\nARVIOITU KESTO\n").concat(e.duration,"h (").concat(e.servicePrice,"\u20ac/h, ").concat(e.serviceName,")\nMAKSUTAPA\n").concat(e.paymentType).concat(e.fees.string,"\nL\xc4HT\xd6PAIKKA\n").concat(e.address,"\n").concat(e.destination.length>5?"M\xc4\xc4R\xc4NP\xc4\xc4\n".concat(e.destination,"\n"):"","NIMI\n").concat(e.name,"\n").concat(e.email?"S\xc4HK\xd6POSTI\n".concat(e.email,"\n"):"","PUHELIN\n").concat(e.phone,"\n").concat(e.comment?"LIS\xc4TIETOJA\n".concat(e.comment,"\n"):""),h.a.info("Succesefully formatted!",500)}catch(n){h.a.fail(n.message,1e3)}return t}(e))}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t=fe((null===e||void 0===e?void 0:e.text)||A.text),n=ke(t).name,a=k.find((function(e){return e.name===n})),r=q.XL?a.priceXL:a.price,c=ve(t),i=Se(t,"Start location"),s=Se(t,"End location"),o="".concat(i.address,",").concat(i.postalCode?" "+i.postalCode:""," ").concat(i.city),l="".concat(s.address||"",",").concat(s.postalCode?" "+s.postalCode:""," ").concat(s.city||""),u={date:{original:c.original,ISODate:c.ISODate,confirmationFormat:c.confirmationFormat},time:ve(t).time,duration:ge(t),serviceName:n,servicePrice:r||ke(t).price,paymentType:ye(t),fees:he(Ce(t)),address:o,destination:l,name:we(t),email:Ne(t),phone:Te(t),comment:Ee(t)};ee(u)}catch(d){h.a.fail(d.message,1e3)}}function ne(){var e=he(be(A.date.original,A.time,A.paymentType)),t=k.find((function(e){return e.name===A.serviceName})),n=q.XL?t.priceXL:t.price;ee(Object(m.a)(Object(m.a)({},A),{},{servicePrice:n,fees:e}))}function ae(e){var t=e.target.name;if("ISODate"===t){var n,a=e.target.value;return L(Object(m.a)(Object(m.a)({},A),{},{date:(n={},Object(p.a)(n,e.target.name,a),Object(p.a)(n,"original",new Date("".concat(a," ").concat(A.time))),Object(p.a)(n,"confirmationFormat",me(a)),n)}))}if("time"===t)return L(Object(m.a)(Object(m.a)({},A),{},Object(p.a)({date:Object(m.a)(Object(m.a)({},A.date),{},{original:new Date("".concat(A.date.ISODate," ").concat(e.target.value))})},t,e.target.value)));if("serviceName"===t){var r=e.target.value,c=k.find((function(e){return e.name===r})).price;return L(Object(m.a)(Object(m.a)({},A),{},{serviceName:r,servicePrice:c}))}return L(Object(m.a)(Object(m.a)({},A),{},Object(p.a)({},t,e.target.value)))}return Object(a.useEffect)((function(){J()}),[t]),Object(a.useEffect)((function(){return G(Object(m.a)(Object(m.a)({},q),{},{hsy:"Paku ja mies"===A.serviceName||"Paku ja kaksi miest\xe4"===A.serviceName}))}),[A.serviceName]),Object(g.jsxs)("div",{className:"flex-container",children:[Object(g.jsx)(j.b,{exact:!0,path:["/","/edit/:slug*","/order-pool/:slug*"],children:Object(g.jsx)(f.a,{ref:Y,className:"textarea-1 flex-item",rowsMin:5,cols:40,value:t?b:c.text,placeholder:"Order info here.",onChange:t?function(e){x(e.target.value)}:function(e){i(Object(m.a)(Object(m.a)({},c),{},{text:e.target.value}))}})}),Object(g.jsx)(j.b,{path:"/custom",children:Object(g.jsx)(T,{order:A,handleChange:ae,handleClick:ne})}),Object(g.jsx)(f.a,{className:"textarea-2 flex-item",rowsMin:5,cols:40,ref:V,value:C,placeholder:"Formatted confirmation will be outputted here.",onChange:function(e){return S(e.target.value)}}),Object(g.jsxs)("div",{className:"flex-100-space-between",children:[Object(g.jsxs)(j.b,{exact:!0,path:["/","/edit/:slug*","/order-pool/:slug*"],children:[Object(g.jsx)(P,{handleChange:ae,handleFormatting:ne,order:A}),Object(g.jsx)(N,{handleClick:te})]}),Object(g.jsx)(Le,{inputRef:V})]}),Object(g.jsx)(Re,{handleChange:function(e){G(Object(m.a)(Object(m.a)({},q),{},Object(p.a)({},e.target.name,e.target.value||e.target.checked)))},options:q}),Object(g.jsx)(nt,{order:A,custom:t,confirmation:C,dispatchOrderActionsStatus_error:function(e){return R({type:"CHANGE_ACTIONS_STATUS_ERROR",payload:e})}}),Object(g.jsxs)("div",{className:"send-button-container",children:[Object(g.jsxs)("div",{className:"small-button-container",children:[Object(g.jsx)(y,{disabled:U.email.disable,custom:t,handleChange:ae,label:"Email",name:"email",value:A.email}),Object(g.jsx)(Xe,{statusText:U.email.status,disabled:U.error||U.email.disable||!(A.email&&C),handleClick:function(){return A.email&&C?(M("Waiting",!0),function(e){return ie.apply(this,arguments)}({orderDetails:C,options:q,email:A.email}).then((function(e){M("Done",!0),h.a.info(e.message,500)})).catch((function(e){M("Error",!1),h.a.fail(e.response.data.error)}))):h.a.fail("No confirmation found or recipients defined.",1e3)}})]}),Object(g.jsxs)("div",{className:"small-button-container",children:[Object(g.jsx)(y,{disabled:U.sms.disable,custom:t,handleChange:ae,label:"SMS",name:"phone",value:A.phone}),Object(g.jsx)(He,{statusText:U.sms.status,disabled:U.error||U.sms.disable||!(A.phone&&C),handleClick:function(){return $.apply(this,arguments)}})]}),Object(g.jsx)("div",{className:"small-button-container",children:Object(g.jsx)(Ve,{handleClick:function(){return Q.apply(this,arguments)},statusText:U.calendar.status,disabled:U.error||U.calendar.disable||!C})})]}),Object(g.jsx)($e,{handleClick:J}),Object(g.jsx)(j.b,{exact:!0,path:["/","/edit","/edit/*","/order-pool"],children:Object(g.jsx)(re,{handleExportingToConfirmator:function(e){i(e),te(e),setTimeout((function(){return V.current.scrollIntoView(!0,{behavior:"smooth"})}),300)}})})]})}n(249);var rt=n(300),ct=n.p+"static/media/paku24-logo.7602fc02.png";function it(e){var t,n=e.isLogged,r=e.custom,c=e.setCustom,i=e.handleChange,o=null===(t=Object(j.h)("/custom"))||void 0===t?void 0:t.url;return Object(a.useEffect)((function(){o&&c(!0)}),[o]),Object(g.jsxs)("div",{className:"logo",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(s.b,{onClick:function(){return c(!1)},to:n?"/":"/login",children:Object(g.jsx)("img",{src:ct,alt:"Logo",width:"125px"})}),Object(g.jsx)("span",{className:"text",children:"CONFIRMATOR"})]}),Object(g.jsx)(j.b,{exact:!0,path:["/","/custom/:slug*"],children:n&&Object(g.jsx)(Pe.a,{style:{margin:0,alignSelf:"center"},control:Object(g.jsx)(rt.a,{checked:r,onChange:i,color:"default"})})})]})}var st="/api/login";function ot(){return(ot=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.axiosInstance.post(st,t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(){return(lt=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.axiosInstance.post("".concat(st,"/token"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut={loginWithCredentials:function(e){return ot.apply(this,arguments)},loginWithAccessToken:function(){return lt.apply(this,arguments)}},dt=n(125),jt=n.n(dt),bt=function(e){var t=e.notification,n="black";return t.toLowerCase().includes("error")&&(n="red"),Object(g.jsx)(g.Fragment,{children:t?Object(g.jsxs)("div",{style:{backgroundColor:"white",color:n,padding:"10px",width:"80%",borderBottom:"3px solid darkgrey",fontSize:"small",display:"flex",alignItems:"center",marginBottom:"10px"},children:[Object(g.jsx)(jt.a,{}),Object(g.jsx)("span",{style:{marginLeft:"10px"},children:t})]}):null})};function pt(e){var t,n=e.setUser,r={marginBottom:"7px",backgroundColor:"white"},c=Object(j.g)(),i=null===c||void 0===c||null===(t=c.location.state)||void 0===t?void 0:t.referrer,l=Object(a.useState)(""),b=Object(o.a)(l,2),p=b[0],m=b[1],h=Object(a.useState)(""),f=Object(o.a)(h,2),x=f[0],y=f[1],C=Object(a.useState)(!1),k=Object(o.a)(C,2),S=k[0],w=k[1],N=Object(a.useState)(!1),T=Object(o.a)(N,2),E=T[0],I=T[1],A=Object(a.useState)(""),L=Object(o.a)(A,2),D=L[0],z=L[1];function P(){return(P=Object(d.a)(u.a.mark((function e(t){var a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),z("Working..."),e.prev=2,e.next=5,ut.loginWithCredentials({username:p,password:x});case 5:a=e.sent,r=a.user,z("Done"),c.push(i||"/"),n(r),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),I(!0),w(!0),setTimeout((function(){return w(!1)}),2e3),z("Error: ".concat(null===(s=e.t0.response)||void 0===s?void 0:s.data.error));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return Object(g.jsx)(j.b,{path:"/login",children:Object(g.jsx)("div",{style:{margin:"30px 5px"},children:Object(g.jsxs)("div",{style:{width:"95%",margin:"0 auto",padding:20,backgroundColor:"lightgrey",borderBottom:"4px solid darkgrey"},children:[Object(g.jsxs)("div",{style:{color:"black",fontSize:"1.3rem",letterSpacing:"0.7px",marginTop:"10px",marginBottom:"15px"},children:["LOGIN",Object(g.jsxs)("span",{style:{color:"black",fontSize:"1.0rem",letterSpacing:"0.2px"},children:[" ","or ",Object(g.jsx)(s.b,{to:"/register",children:"request access"})]})]}),Object(g.jsx)(bt,{notification:D}),Object(g.jsxs)("form",{onSubmit:function(e){return P.apply(this,arguments)},style:{paddingBottom:"10px",height:"80%",display:"flex",flexFlow:"column wrap",justifyContent:"space-evenly"},children:[Object(g.jsx)(v.a,{className:"flex-item",style:r,error:E,required:!0,name:"username",value:p,onChange:function(e){var t=e.target;return m(t.value)},label:"Username",variant:"filled",size:"small"}),Object(g.jsx)(v.a,{className:"flex-item",style:r,error:E,type:"password",required:!0,value:x,name:"password",onChange:function(e){var t=e.target;return y(t.value)},label:"Password",variant:"filled",size:"small"}),Object(g.jsx)(O.a,{className:"flex-item",style:r,type:"submit",disabled:S,variant:"contained",size:"small",children:"Login"})]})]})})})}function mt(){var e={marginBottom:"7px",backgroundColor:"white"},t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),l=Object(o.a)(i,2),j=l[0],b=l[1],p=Object(a.useState)(""),m=Object(o.a)(p,2),h=m[0],f=m[1],x=Object(a.useState)(""),y=Object(o.a)(x,2),C=y[0],k=y[1],S=Object(a.useState)(!1),w=Object(o.a)(S,2),N=w[0],T=w[1];function E(e){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.a.post("/api/registration/request-access",t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),T(!0),k("Working..."),e.prev=3,e.next=6,E({name:r,email:j,purpose:h});case 6:n=e.sent,k(null===n||void 0===n?void 0:n.message),c(""),b(""),f(""),T(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),T(!1),k("Error: ".concat(null===e.t0||void 0===e.t0||null===(a=e.t0.response.data)||void 0===a?void 0:a.error));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}return Object(g.jsx)("div",{style:{margin:"30px 5px"},children:Object(g.jsxs)("div",{style:{width:"95%",padding:20,margin:"0 auto",backgroundColor:"lightgrey",borderBottom:"4px solid darkgrey"},children:[Object(g.jsxs)("div",{style:{color:"black",fontSize:"1.3rem",letterSpacing:"0.7px",marginTop:"10px",marginBottom:"15px"},children:["REQUEST ACCESS",Object(g.jsxs)("span",{style:{color:"black",fontSize:"1.0rem",letterSpacing:"0.2px"},children:[" ","or ",Object(g.jsx)(s.b,{to:"/login",children:"login"})]})]}),Object(g.jsx)(bt,{notification:C}),Object(g.jsxs)("form",{onSubmit:function(e){return A.apply(this,arguments)},style:{paddingBottom:"10px",height:"80%",display:"flex",flexFlow:"column wrap",justifyContent:"space-evenly"},children:[Object(g.jsx)(v.a,{style:e,required:!0,name:"name",value:r,onChange:function(e){var t=e.target;return c(t.value)},label:"Name",variant:"filled",size:"small"}),Object(g.jsx)(v.a,{style:e,type:"email",required:!0,value:j,name:"email",onChange:function(e){var t=e.target;return b(t.value)},label:"Email",variant:"filled",size:"small"}),Object(g.jsx)(v.a,{style:e,type:"text",required:!0,multiline:!0,rows:"3",value:h,name:"purpose",onChange:function(e){var t=e.target;return f(t.value)},label:"Why you want to use this application?",variant:"filled",size:"small"}),Object(g.jsx)(O.a,{style:e,type:"submit",disabled:N,variant:"contained",size:"small",children:"Send request"})]})]})})}n(250);var ht="/api/logout";function ft(){return(ft=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.a.post(ht).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xt={logout:function(){return ft.apply(this,arguments)}},Ot=n(126),vt=n.n(Ot);function gt(e){var t=e.handleClick;return Object(g.jsxs)(O.a,{style:{backgroundColor:"lightgrey"},variant:"outlined",size:"small",onClick:t,children:["Logout ",Object(g.jsx)(vt.a,{})]})}function yt(e){var t=e.user,n=e.logoutUser;return Object(g.jsxs)("div",{style:{backgroundColor:"darkgrey",padding:"15px",marginTop:"40px",display:"flex",justifyContent:"space-between",borderTop:"3.5px solid lightgrey"},children:[Object(g.jsx)("div",{style:{paddingTop:"2px",marginRight:"20px"},children:Object(g.jsxs)("span",{style:{fontFamily:"monospace"},children:[" ",t.username,Object(g.jsx)("br",{}),t.name]})}),Object(g.jsx)(gt,{handleClick:function(){return xt.logout().then(n)}})]})}function Ct(e){var t=e.error;return Object(g.jsxs)("div",{role:"alert",children:[Object(g.jsx)("p",{children:"Something went wrong:"}),Object(g.jsx)("pre",{style:{color:"red"},children:t.message})]})}function kt(e){var t,n=e.user,r=e.setUser,c=e.children,i=Object(j.g)();null!==n&&"Loading"!==n||(t=i.location.pathname),Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ut.loginWithAccessToken();case 3:return t=e.sent,n=t.user,e.abrupt("return",r(n));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",r(null));case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]);var s="Loading"===n,o=null===n&&Object(g.jsx)(j.a,{to:{pathname:"/login",state:{referrer:t}}});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(ee,{loading:s,redirectComponent:o,children:c}),Object(g.jsx)(j.b,{path:"/login",children:null===n?Object(g.jsx)(pt,{setUser:r}):Object(g.jsx)(j.a,{to:"/"})})]})}var St=function(){var e=Object(a.useState)("Loading"),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(o.a)(c,2),s=i[0],l=i[1];Object(a.useEffect)((function(){q.setupInterceptor({logout:function(){return r(null)}})}),[]);var u=Object(j.g)();return Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)(b.ErrorBoundary,{FallbackComponent:Ct,children:[Object(g.jsx)(it,{isLogged:null!==n&&"Loading"!==n,custom:s,setCustom:l,handleChange:function(e){var t=e.target.checked;return l(t),t?u.push("/custom"):u.push("/")}}),Object(g.jsxs)(j.d,{children:[Object(g.jsx)(j.b,{path:"/register",children:Object(g.jsx)(mt,{})}),Object(g.jsx)(j.b,{path:"/",children:Object(g.jsxs)(kt,{user:n,setUser:r,children:[Object(g.jsx)(at,{custom:s}),Object(g.jsx)(yt,{user:n,logoutUser:function(){return r(null)}})]})})]})]})})};i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(s.a,{basename:"/app",children:Object(g.jsx)(St,{})})}),document.getElementById("root"))},39:function(e){e.exports=JSON.parse('[{"id":1,"name":"Paku ja kuski","price":30,"priceXL":40},{"id":2,"name":"Paku ja kuski kantoapuna","price":60,"priceXL":60},{"id":3,"name":"Paku ja kaksi muuttomiest\xe4","price":90,"priceXL":90},{"id":4,"name":"Paku ja mies","price":40,"priceXL":40},{"id":5,"name":"Paku ja kaksi miest\xe4","price":70,"priceXL":70}]')}},[[251,1,2]]]);
//# sourceMappingURL=main.0eb49d36.chunk.js.map