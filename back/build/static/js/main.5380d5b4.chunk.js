(this["webpackJsonppaku24-confirmator-front"]=this["webpackJsonppaku24-confirmator-front"]||[]).push([[0],{140:function(e,t,n){},164:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),i=n(15),s=n.n(i),o=n(23),l=n(10),u=n(7),d=n.n(u),j=n(11),p=n(17),b=n(124),m=n(39),h=n(12),f=n(26),x=n(249),O=(n(140),n(293)),v=n(283),g=n(292);function y(e){var t=e.value,n=e.label,c=e.name,i=e.custom,s=e.handleChange,o=e.disabled,u=Object(r.useState)(!1),d=Object(l.a)(u,2)[1],j=n.toLowerCase(),b=Object(p.g)();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(v.a,{disabled:o,className:"button-info",variant:"outlined",onClick:function(){d(!0),b.push(i?"/custom/".concat(j):"/edit/".concat(j))},children:[n,"to:",t]}),Object(a.jsx)(p.b,{path:["/custom/".concat(j),"/edit/".concat(j)],children:Object(a.jsx)(O.a,{open:!0,onClose:function(){d(!1),b.push(i?"/custom/":"/")},disableScrollLock:!0,children:Object(a.jsx)("div",{style:{position:"absolute",maxWidth:500,minWidth:300,padding:20,backgroundColor:"white",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(a.jsx)(g.a,{label:n,name:c,variant:"outlined",onChange:s,value:t,type:"Email"===n?n:"",autoFocus:!0})})})})]})}var C=n(112),k=n(36),S=n(113),w=n.n(S);function N(e){var t=e.handleClick;return Object(a.jsxs)(v.a,{className:"button-one-third flex-item",variant:"text",size:"small",onClick:t,children:["Transform ",Object(a.jsx)(w.a,{})]})}function T(e){var t,n=e.order,r=e.handleChange,c=e.handleClick,i={marginTop:5},s={marginLeft:5,marginRight:5};return Object(a.jsxs)("div",{className:"basic-flex",style:{marginTop:"15px"},children:[Object(a.jsx)(g.a,{fullWidth:!0,style:s,className:"flex-item",name:"ISODate",value:null===n||void 0===n||null===(t=n.date)||void 0===t?void 0:t.ISODate,onChange:r,type:"date"}),Object(a.jsxs)("div",{className:"flex-100-space-between flex-item",style:s,children:[Object(a.jsx)(g.a,{className:"time-duration",style:Object(h.a)(Object(h.a)({},s),{},{paddingRight:10}),name:"time",value:null===n||void 0===n?void 0:n.time,onChange:r,inputProps:{step:"900"},type:"time"}),Object(a.jsxs)(C.a,{className:"time-duration",style:Object(h.a)(Object(h.a)({},s),{},{paddingLeft:10}),name:"duration",value:null===n||void 0===n?void 0:n.duration,onChange:r,children:[Object(a.jsx)("option",{value:1,children:"1h"}),Object(a.jsx)("option",{value:1.5,children:"1.5h"}),Object(a.jsx)("option",{value:2,children:"2h"}),Object(a.jsx)("option",{value:2.5,children:"2.5h"}),Object(a.jsx)("option",{value:3,children:"3h"}),Object(a.jsx)("option",{value:3.5,children:"3.5h"}),Object(a.jsx)("option",{value:4,children:"4h"}),Object(a.jsx)("option",{value:4.5,children:"4.5h"}),Object(a.jsx)("option",{value:5,children:"5h"}),Object(a.jsx)("option",{value:5.5,children:"5.5h"}),Object(a.jsx)("option",{value:6,children:"6h"}),Object(a.jsx)("option",{value:6.5,children:"6.5h"}),Object(a.jsx)("option",{value:7,children:"7h"}),Object(a.jsx)("option",{value:7.5,children:"7.5h"}),Object(a.jsx)("option",{value:8,children:"8h"}),Object(a.jsx)("option",{value:8.5,children:"8.5h"}),Object(a.jsx)("option",{value:9,children:"9h"}),Object(a.jsx)("option",{value:9.5,children:"9.5h"}),Object(a.jsx)("option",{value:10,children:"10h"})]})]}),Object(a.jsx)(C.a,{fullWidth:!0,style:s,className:"flex-item",name:"serviceName",value:null===n||void 0===n?void 0:n.serviceName,onChange:r,children:k.map((function(e){return Object(a.jsx)("option",{value:e.name,children:e.name},e.id)}))}),Object(a.jsxs)(C.a,{fullWidth:!0,style:s,className:"flex-item",name:"paymentType",value:null===n||void 0===n?void 0:n.paymentType,onChange:r,children:[Object(a.jsx)("option",{value:"Maksukortti",children:"Maksukortti"}),Object(a.jsx)("option",{value:"K\xe4teinen",children:"K\xe4teinen"}),Object(a.jsx)("option",{value:"Lasku/Osamaksu",children:"Lasku"})]}),Object(a.jsx)(g.a,{fullWidth:!0,style:i,className:"flex-item",required:!0,name:"address",value:null===n||void 0===n?void 0:n.address,onChange:r,label:"Address",variant:"outlined",size:"small"}),Object(a.jsx)(g.a,{fullWidth:!0,multiline:!0,style:i,className:"flex-item",name:"destination",value:null===n||void 0===n?void 0:n.destination,onChange:r,label:"Destination",variant:"outlined",size:"small"}),Object(a.jsx)(g.a,{fullWidth:!0,required:!0,style:i,className:"flex-item",name:"name",value:null===n||void 0===n?void 0:n.name,onChange:r,label:"Name",variant:"outlined",size:"small"}),Object(a.jsx)(g.a,{fullWidth:!0,style:i,className:"flex-item",name:"email",value:null===n||void 0===n?void 0:n.email,onChange:r,type:"email",label:"Email",variant:"outlined",size:"small"}),Object(a.jsx)(g.a,{fullWidth:!0,style:i,className:"flex-item",required:!0,name:"phone",value:null===n||void 0===n?void 0:n.phone,onChange:r,label:"Phonenumber",variant:"outlined",size:"small"}),Object(a.jsx)(x.a,{style:i,className:"flex-item textarea-2",rowsMin:3,cols:27,name:"comment",value:null===n||void 0===n?void 0:n.comment,placeholder:"Additional information.",onChange:r}),Object(a.jsx)(N,{className:"flex-item",handleClick:c})]})}var E=n(297),A=n(290),I=n(289),L=n(288),D=n(40);function z(e){var t=e.children,n=e.handleClose,r=Object(D.a)(),c=Object(L.a)(r.breakpoints.down("sm"));return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(E.a,{fullScreen:c,open:!0,onClose:n,"aria-labelledby":"responsive-dialog-title",disableScrollLock:!0,children:[Object(a.jsx)(I.a,{children:t}),Object(a.jsx)(A.a,{children:Object(a.jsx)(v.a,{style:{backgroundColor:"white"},variant:"text",onClick:n,children:"Close"})})]})})}function F(e){var t=e.order,n=e.handleFormatting,r=e.handleChange,c=Object(p.g)(),i=function(){c.push("/")};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v.a,{className:"button-one-third",variant:"outlined",onClick:function(){c.push("/edit")},children:"Edit"}),Object(a.jsx)(p.b,{exact:!0,path:"/edit",children:Object(a.jsx)(z,{component:Object(a.jsx)(T,{order:t,handleChange:r,handleClick:function(){n(),i()}}),handleClose:i})})]})}var P=n(298),_=n(295),U=n(115),M=n.n(U),R=n(114),W=n.n(R),B=n(38),H=n.n(B),K="/api/token";function X(){return(X=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.post(K);case 2:return e.next=4,H.a.post("".concat(K,"/is-new"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q={refreshTokens:function(){return X.apply(this,arguments)}},G=H.a.create();G.interceptors.response.use((function(e){return e}),function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,"access token expired"!==t.response.data.error){e.next=5;break}return e.next=4,q.refreshTokens();case 4:return e.abrupt("return",G(n));case 5:return e.abrupt("return",Promise.reject(t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var V=G,Y="/api/order-pool";function J(){return(J=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get(Y);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("".concat(Y,"/deleted"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.put("".concat(Y,"/confirm/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.put("".concat(Y,"/delete/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.put("".concat(Y,"/retrieve/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te={get:function(){return J.apply(this,arguments)},getDeleted:function(){return $.apply(this,arguments)},confirm:function(e){return Q.apply(this,arguments)},remove:function(e){return Z.apply(this,arguments)},retrieve:function(e){return ee.apply(this,arguments)}};function ne(e){var t=e.loading,n=e.redirectComponent,r=void 0===n?null:n,c=e.children;return Object(a.jsxs)(a.Fragment,{children:[t&&Object(a.jsx)("p",{children:"Loading..."}),r,!t&&!r&&c]})}var ae=n(125);n(164);function re(e){var t=e.orders,n=e.handleClick,c=e.handleDeletion,i=e.labelForDeletion,s=Object(r.useState)([]),o=Object(l.a)(s,2),u=o[0],d=o[1];function j(e){d(Object(ae.a)(u.map((function(t){return t.id===e.id?Object(h.a)(Object(h.a)({},e),{},{hidden:!t.hidden,className:t.hidden?"basic-order-style":"basic-order-style confirmed-order-style"}):t}))))}return Object(r.useEffect)((function(){d(t.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{isNew:new Date(e.date).toDateString()===new Date(Date.now()).toDateString(),className:e.confirmed?"basic-order-style confirmed-order-style":"basic-order-style",hidden:e.confirmed})})))}),[t]),0===t.length?Object(a.jsx)("p",{children:"Nothing found"}):u.map((function(e){var t;return Object(a.jsxs)("div",{className:"order-pool-list",children:[Object(a.jsxs)("div",{className:"order-top-bar",children:[Object(a.jsxs)("div",{className:"order-status-icons-container",children:[e.isNew&&Object(a.jsx)("span",{className:"order-status-new-order order-status-icon",children:"NEW"}),Object(a.jsxs)("span",{className:e.confirmed?"order-status-icon order-status-confirmed ":"order-status-icon order-status-notification",children:[e.confirmed?"\u2714":"\u2755"," "]})]}),Object(a.jsxs)("div",{className:"order-actions",children:[Object(a.jsx)(v.a,{style:{padding:0,fontSize:"0.9rem"},variant:"text",size:"small",onClick:function(){return c(e.id)},children:i}),Object(a.jsx)(v.a,{disabled:e.confirmed,style:{padding:0,fontSize:"0.8rem"},onClick:function(){return n(e)},variant:"text",size:"small",children:"Export"}),Object(a.jsx)(v.a,{style:{padding:0},variant:"text",size:"small",onClick:function(){return j(e)},children:e.hidden?"Show \u2795":"Hide \u2796"})]})]}),Object(a.jsx)("div",{tabIndex:"0",label:"Show hidden order if it's confirmed.",role:"button",onClick:e.confirmed?function(){return j(e)}:null,onKeyPress:e.confirmed?function(){return j(e)}:null,className:"".concat(e.className," list-item-1"),dangerouslySetInnerHTML:{__html:null===(t=e.text)||void 0===t?void 0:t.split("\n").join("<br>")}})]},e.id)}))}function ce(e){var t=e.setOrderText,n=e.handleClose,c=Object(r.useState)([]),i=Object(l.a)(c,2),s=i[0],o=i[1],u=Object(r.useState)(""),p=Object(l.a)(u,2),b=p[0],m=p[1],h=Object(r.useState)(!1),f=Object(l.a)(h,2),x=f[0],O=f[1],y=Object(r.useState)(s),C=Object(l.a)(y,2),k=C[0],S=C[1],w=Object(r.useState)(!1),N=Object(l.a)(w,2),T=N[0],E=N[1],A=Object(r.useState)(!0),I=Object(l.a)(A,2),L=I[0],D=I[1],z=s.filter((function(e){return!e.confirmed})).length;function F(e,t){return e.filter((function(e){return e.text.toLowerCase().includes(t.toLowerCase().trim())}))}function U(e,t){return t?e.filter((function(e){return!1===e.confirmed})):e}function R(){return(R=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.remove(t);case 2:o(s.filter((function(e){return e.id!==t}))),S(s.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.retrieve(t);case 2:o(s.filter((function(e){return e.id!==t}))),S(s.filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!0),!T){e.next=7;break}return e.next=4,te.getDeleted();case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,te.get();case 9:e.t0=e.sent;case 10:t=e.t0,o(t),S(t),D(!1);case 14:case"end":return e.stop()}}),e)}))),[T]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{style:{marginTop:"4px",marginBottom:"7px"},children:T?"Trashcan":"Inbox"}),Object(a.jsx)(g.a,{className:"flex-item",type:"text",name:"searchText",placeholder:"Search",value:b,onChange:function(e){m(e.target.value);var t=U(F(s,e.target.value),x);S(t)}}),Object(a.jsx)(P.a,{control:Object(a.jsx)(_.a,{checked:x,onChange:function(e){var t=e.target.checked;O(t);var n=U(F(s,b),t);S(n)},name:"showOnlyNotConfirmed",color:"primary"}),label:"Unconfirmed"}),Object(a.jsxs)("span",{children:[k.length,"/",s.length]}),Object(a.jsx)(v.a,{onClick:function(){return E(!T)},variant:"text",size:"small",children:T?"Inbox":"Trashcan"}),z>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:z}),Object(a.jsx)("span",{className:"order-status-icon order-status-notification",children:"\u2755"})]}),Object(a.jsx)(ne,{loading:L,children:Object(a.jsx)(re,{orders:k,handleClick:function(e){t({text:e.text,id:e.id}),n()},labelForDeletion:T?Object(a.jsx)(W.a,{}):Object(a.jsx)(M.a,{}),handleDeletion:T?function(e){return B.apply(this,arguments)}:function(e){return R.apply(this,arguments)}})})]})}function ie(e){var t=e.setOrderText,n=Object(p.g)(),r=function(){n.goBack()};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v.a,{className:"button-one-third",variant:"contained",onClick:function(){n.push("/order-pool")},children:"Open Order Pool"}),Object(a.jsx)(p.b,{exact:!0,path:"/order-pool",children:Object(a.jsx)(z,{handleClose:r,children:Object(a.jsx)(ce,{setOrderText:t,handleClose:r})})})]})}var se="/api/email";function oe(){return(oe=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.post("".concat(se,"/send-confirmation"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le="/api/calendar";function ue(e,t,n){return de.apply(this,arguments)}function de(){return(de=Object(j.a)(d.a.mark((function e(t,n,a){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.post(le,{entry:t,order:n,options:a});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je="/api/sms";function pe(e){return be.apply(this,arguments)}function be(){return(be=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.post(je,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t,n){var a=1*t.split(":")[0],r=e.getDay(),c=(6===r||7===r||0===r)&&15,i=e.getDate(),s=!![new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),1].includes(i)&&15;return c&&(s=!1),[{value:c,name:"VIIKONLOPPULIS\xc4"},{value:s,name:"KUUNVAIHDELIS\xc4"},{value:a<8&&20,name:"AAMULIS\xc4"},{value:a>20&&20,name:"Y\xd6LIS\xc4"},{value:("Lasku"===n||"Lasku/Osamaksu"===n||"Invoice/Instalment payment"===n)&&14,name:"LASKULIS\xc4"}]}function he(e){return"Cannot find ".concat(e,". Invalid format.")}function fe(e){var t=new Date(e),n=t.getDate(),a=t.getMonth()+1,r=t.getFullYear();return n<10&&(n="0".concat(n)),a<10&&(a="0".concat(a)),"".concat(n,"-").concat(a,"-").concat(r)}function xe(e){var t=e.filter((function(e){return e.value}));return{array:t.map((function(e){return e.name})),string:t.map((function(e){return"\n".concat(e.name,"\n").concat(e.value,"\u20ac")})).reduce((function(e,t){return e+t}),"")}}function Oe(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(j.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.indexOf(n),r=t.slice(a),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){var t=/(?<=Date and time: \w+, )\w+ \d+(th|rd|st|nd)? \w+/.exec(e);if(!t)throw new Error(he("date"));var n=new Date("".concat(t[0].replace(/th|rd|st|nd/,""),"Z")),a=/\d+:\d+/.exec(e)[0],r=new Date("\n    ".concat(n.getFullYear(),"\n    ").concat(n.getMonth()+1,"\n    ").concat(n.getDate(),"\n    ").concat(a)),c=r.toISOString().split("T")[0];return{confirmationFormat:fe(r),original:r,ISODate:c,time:a}}function ye(e){var t=/\d+(\.\d+)?(?=\sh.)/.exec(e);if(!t)throw new Error(he("duration"));return t[0]}function Ce(e){var t="Payment Type: ",n=e.indexOf(t)+t.length,a=e.indexOf("PRICE"),r=e.slice(n,a).trim(),c=r.match(/\W+/g).filter((function(e){return"/"!==e&&" "!==e&&"\xe4"!==e})),i=r.indexOf(c[0].trim()),s=r.slice(0,i).trim();if(!s)throw new Error(he("payment type"));return s}function ke(e){return me(ge(e).original,ge(e).time,Ce(e))}function Se(e){var t=/(?<=PRICE: )\d+/.exec(e);if(!t)throw new Error(he("price"));var n=t,a=Object(l.a)(n,1);t=a[0],ke(e).filter((function(e){return e.value})).forEach((function(e){return t-=e.value}));var r=function(e){var t=e.indexOf("\u2014 Price: "),n=e.indexOf("\u2014 Booking time start"),a=e.slice(t,n);return a&&a.match(/\d+/)[0]}(e);t-=r;var c=ye(e),i=k.filter((function(e){return e.price===t/c}));if(0===i.length)throw new Error("Cannot recognize service. Invalid price or duration.");return i[0]}function we(e,t){var n="".concat(t,": "),a="Start location"===t?"End location":"Name",r=e.indexOf(n)+n.length,c=e.indexOf(a),i=e.slice(r,c).replaceAll(",","").trim(),s=i.slice(0,i.indexOf(" / ")),o=i.match(/\d{5}/);o=o&&o[0];var l=i.slice(i.indexOf(" / ")+" / ".length),u=s.match(/\D+/);u=u&&u[0].trim();var d=l.replace(o,"").trim();if(d=d||null,(!/\d+/.test(l)||l.includes(o)&&l.length<15)&&(d=s.replace(o,"").trim(),u=(u=l.match(/\D+/))&&u[0].trim()),d.includes(u)&&(d=d.replace(u,"").trim()),"Start location"===t&&!d)throw new Error(he("address"));return{address:d,city:u,postalCode:o}}function Ne(e){var t="Name: ",n=e.indexOf(t)+t.length,a=e.indexOf("Email"),r=e.slice(n,a).trim();if(!r)throw new Error(he("name"));return r}function Te(e){var t=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.exec(e);if(!t)throw new Error(he("email"));return t[0]}function Ee(e){var t=/(?<=Phone: )[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*/.exec(e);if(!t)throw new Error(he("phone"));return t[0].trim()}function Ae(e){var t=/(?<=Comment: )(.*\s*)*/.exec(e);t=t?t[0]:"";var n=/\n\n\-\-\nT\xe4m\xe4 viesti l\xe4hetettiin sivustolta Paku24\.fi \(https:\/\/paku24\.fi\)/;return n.exec(t)&&(t=t.replace(n,"")),t}var Ie=n(116),Le=n.n(Ie);function De(e){var t=e.inputRef;return Object(a.jsxs)(v.a,{className:"button-one-third flex-item",variant:"text",size:"small",onClick:function(){t.current.select(),document.execCommand("copy"),f.a.info("Copied!",500)},children:["Copy ",Object(a.jsx)(Le.a,{})]})}var ze=n(286),Fe=n(299),Pe=n(294),_e=n(296);function Ue(e){var t=e.handleChange,n=e.options;return Object(a.jsxs)("div",{className:"checkbox-container",children:[Object(a.jsxs)(Fe.a,{className:"checkbox-distance flex-item",hiddenLabel:!1,size:"small",children:[Object(a.jsx)(ze.a,{component:"legend",children:"Pick one:"}),Object(a.jsxs)(_e.a,{name:"gender1",value:n.distance,onChange:t,children:[Object(a.jsx)(P.a,{name:"distance",value:"insideCapital",control:Object(a.jsx)(Pe.a,{color:"default"}),label:"\ud83c\udfd9 Inside capital"}),Object(a.jsx)(P.a,{name:"distance",value:"outsideCapital",control:Object(a.jsx)(Pe.a,{color:"default"}),label:"\ud83c\udfde Outside capital"}),Object(a.jsx)(P.a,{name:"distance",value:"fromCapitalToOutside",control:Object(a.jsx)(Pe.a,{color:"default"}),label:"\ud83c\udfd9->\ud83c\udfde From capital"}),Object(a.jsx)(P.a,{name:"distance",value:"fromOutsideToCapital",control:Object(a.jsx)(Pe.a,{color:"default"}),label:"\ud83c\udfde->\ud83c\udfd9 To capital"})]})]}),Object(a.jsxs)(Fe.a,{className:"basic-flex",size:"small",children:[Object(a.jsx)(P.a,{size:"small",className:"flex-item",control:Object(a.jsx)(_.a,{checked:n.hsy,onChange:t,color:"primary"}),name:"hsy",label:"\u267b HSY",labelPlacement:"start"}),Object(a.jsx)(P.a,{className:"flex-item",control:Object(a.jsx)(_.a,{checked:n.secondCar,onChange:t,color:"primary"}),name:"secondCar",label:"Second car",labelPlacement:"start"}),Object(a.jsx)(P.a,{className:"flex-item",control:Object(a.jsx)(_.a,{checked:n.XL,onChange:t,color:"primary"}),name:"XL",label:"XL",labelPlacement:"start"})]})]})}var Me=n(117),Re=n.n(Me);function We(e){var t=e.handleClick,n=e.disabled,r=e.statusText;return Object(a.jsx)(v.a,{disabled:n,onClick:t,className:"button-phone flex-item",variant:"contained",size:"small",children:r?Object(a.jsx)("span",{style:{color:"grey"},children:r}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"Send"}),Object(a.jsx)(Re.a,{})]})})}var Be=n(118),He=n.n(Be);function Ke(e){var t=e.handleClick,n=e.disabled,r=e.statusText;return Object(a.jsx)(v.a,{disabled:n,className:"button-email flex-item",variant:"contained",size:"small",onClick:t,children:r?Object(a.jsx)("span",{style:{color:"grey"},children:r}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"Send"}),Object(a.jsx)(He.a,{})]})})}var Xe=n(119),qe=n.n(Xe);function Ge(e){var t=e.handleClick,n=e.disabled,r=e.statusText;return Object(a.jsx)(v.a,{disabled:n,className:"button-email flex-item",variant:"contained",size:"small",onClick:t,children:r?Object(a.jsx)("span",{style:{color:"grey"},children:r}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"Add"}),Object(a.jsx)(qe.a,{})]})})}var Ve=n(120),Ye=n.n(Ve);function Je(e){var t=e.handleClick;return Object(a.jsxs)(v.a,{className:"button-one-third flex-item",variant:"contained",size:"small",onClick:t,children:["New order ",Object(a.jsx)(Ye.a,{})]})}var $e=n(57),Qe=n.n($e),Ze=n(121),et=n.n(Ze);function tt(e){var t=e.order,n=e.dispatchOrderActionsStatus_error,c=e.confirmation,i=e.custom,s=Object(r.useState)([]),o=Object(l.a)(s,2),u=o[0],d=o[1],j=Object(r.useState)(!1),p=Object(l.a)(j,2),b=p[0],m=p[1],h=Object(r.useState)(!1),f=Object(l.a)(h,2),x=f[0],O=f[1];Object(r.useEffect)((function(){if(b)n(!1);else{var e=[{id:1,type:"date",error:Qe.a.isBefore(t.date.ISODate,(new Date).toISOString()),message:"earlier than today. Value: ".concat(t.date.confirmationFormat||"No value")},{id:2,type:"address",error:Qe.a.isEmpty(t.address),message:"missing or is in incorrect format. Value: ".concat(t.address||"No value")},{id:3,type:"phone",error:!Qe.a.isMobilePhone(t.phone,["fi-FI","es-ES","sv-SE"]),message:"missing or is in incorrect format. Value: ".concat(t.phone||"No value")},{id:4,type:"email",error:!i&&!Qe.a.isEmail(t.email),message:"missing or is in incorrect format. Value: ".concat(t.email||"No value")}];d(e);var a=e.some((function(e){return e.error}));n(a),O(a)}}),[t.date,t.phone,t.address,t.email,b,i]);var v={color:"red"},g={color:"gray"},y=b?g:null;return Object(a.jsxs)(a.Fragment,{children:[c?Object(a.jsx)("div",{style:{borderTop:"1px solid gray",borderBottom:"1px solid gray",padding:"15px 0 15px 0",margin:"10px 0 10px 0"},className:"flex-100-space-between",children:Object(a.jsxs)("div",{style:y,children:[Object(a.jsx)(et.a,{}),u.map((function(e){return e.error?Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{style:b?g:v,children:[e.type," "]}),e.message]},e.id):null}))]})}):null,x&&c?Object(a.jsx)(P.a,{style:{alignSelf:"flex-end"},control:Object(a.jsx)(_.a,{checked:b,onChange:function(e){m(e.target.checked)},color:"default"}),label:"Ignore"}):null]})}function nt(e){var t=e.custom,n=Object(r.useState)({text:"",id:null}),c=Object(l.a)(n,2),i=c[0],s=c[1],o=Object(r.useState)(""),u=Object(l.a)(o,2),b=u[0],O=u[1],v=Object(r.useState)(""),g=Object(l.a)(v,2),C=g[0],S=g[1],w=Object(r.useMemo)((function(){return{date:{original:new Date,ISODate:(new Date).toISOString().split("T")[0],confirmationFormat:fe(new Date)},time:"".concat((new Date).toTimeString().split(":")[0],":").concat((new Date).toTimeString().split(":")[1]),duration:1,serviceName:k[0].name,servicePrice:k[0].price,paymentType:"Maksukortti",fees:{array:[],string:""},address:"",destination:"",name:"",email:"",phone:"",comment:""}}),[]),E=Object(r.useState)(w),A=Object(l.a)(E,2),I=A[0],L=A[1],D={email:{status:null,disable:!1},sms:{status:null,disable:!1},calendar:{status:null,disable:!1},error:!1};function z(e){return e}var P=Object(r.useReducer)((function(e,t){switch(t.type){case"CHANGE_ACTIONS_STATUS_EMAIL":return Object(h.a)(Object(h.a)({},e),{},{email:t.payload});case"CHANGE_ACTIONS_STATUS_SMS":return Object(h.a)(Object(h.a)({},e),{},{sms:t.payload});case"CHANGE_ACTIONS_STATUS_CALENDAR":return Object(h.a)(Object(h.a)({},e),{},{calendar:t.payload});case"CHANGE_ACTIONS_STATUS_ERROR":return Object(h.a)(Object(h.a)({},e),{},{error:t.payload});case"CHANGE_ACTIONS_STATUS_RESET":return D;default:throw new Error}}),D,z),_=Object(l.a)(P,2),U=_[0],M=_[1];function R(e,t){M({type:"CHANGE_ACTIONS_STATUS_EMAIL",payload:{status:e,disable:t}})}function W(e,t){M({type:"CHANGE_ACTIONS_STATUS_CALENDAR",payload:{status:e,disable:t}})}function B(e,t){M({type:"CHANGE_ACTIONS_STATUS_SMS",payload:{status:e,disable:t}})}var H=Object(r.useMemo)((function(){return{distance:"insideCapital",hsy:!1,secondCar:!1,XL:!1}}),[]),K=Object(r.useState)(H),X=Object(l.a)(K,2),q=X[0],G=X[1],V=Object(r.useRef)(null);function Y(){s({text:"",id:null}),L(w),G(H),S(""),M({type:"CHANGE_ACTIONS_STATUS_RESET"})}function J(){return(J=Object(j.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=C)){e.next=9;break}return B("Waiting",!0),e.next=6,pe({msg:t,phone:I.phone});case 6:n=e.sent,B("Done",!0),f.a.info("".concat(n.message),500);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),B("Error",!1),f.a.fail(null===(a=e.t0.response)||void 0===a?void 0:a.data.error,2e3);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function $(){return($=Object(j.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe(C,I.address);case 3:if(!(t=e.sent)){e.next=14;break}return W("Waiting",!0),e.next=8,ue(t,I,q);case 8:if(n=e.sent,!i.id){e.next=12;break}return e.next=12,te.confirm(i.id);case 12:W("Done",!0),f.a.info("".concat(n.message,"\n").concat(n.createdEvent),3e3);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),W("Error",!1),f.a.fail(null===(a=e.t0.response)||void 0===a?void 0:a.data.error,2e3);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function Q(e){L(e),S(function(e){var t;try{t="VARAUKSEN TIEDOT\n".concat(e.date.confirmationFormat,"\nALKAMISAIKA\nKlo ").concat(e.time," (+/-15min)\nARVIOITU KESTO\n").concat(e.duration,"h (").concat(e.servicePrice,"\u20ac/h, ").concat(e.serviceName,")\nMAKSUTAPA\n").concat(e.paymentType).concat(e.fees.string,"\nL\xc4HT\xd6PAIKKA\n").concat(e.address,"\n").concat(e.destination.length>5?"M\xc4\xc4R\xc4NP\xc4\xc4\n".concat(e.destination,"\n"):"","NIMI\n").concat(e.name,"\n").concat(e.email?"S\xc4HK\xd6POSTI\n".concat(e.email,"\n"):"","PUHELIN\n").concat(e.phone,"\n").concat(e.comment?"LIS\xc4TIETOJA\n".concat(e.comment,"\n"):""),f.a.info("Succesefully formatted!",500)}catch(n){f.a.fail(n.message,1e3)}return t}(e))}function Z(){var e=xe(me(I.date.original,I.time,I.paymentType)),t=k.find((function(e){return e.name===I.serviceName})),n=q.XL?t.priceXL:t.price;Q(Object(h.a)(Object(h.a)({},I),{},{servicePrice:n,fees:e}))}function ee(e){var t=e.target.name;if("ISODate"===t){var n,a=e.target.value;return L(Object(h.a)(Object(h.a)({},I),{},{date:(n={},Object(m.a)(n,e.target.name,a),Object(m.a)(n,"original",new Date("".concat(a," ").concat(I.time))),Object(m.a)(n,"confirmationFormat",fe(a)),n)}))}if("time"===t)return L(Object(h.a)(Object(h.a)({},I),{},Object(m.a)({date:Object(h.a)(Object(h.a)({},I.date),{},{original:new Date("".concat(I.date.ISODate," ").concat(e.target.value))})},t,e.target.value)));if("serviceName"===t){var r=e.target.value,c=k.find((function(e){return e.name===r})).price;return L(Object(h.a)(Object(h.a)({},I),{},{serviceName:r,servicePrice:c}))}return L(Object(h.a)(Object(h.a)({},I),{},Object(m.a)({},t,e.target.value)))}return Object(r.useEffect)((function(){Y()}),[t]),Object(r.useEffect)((function(){return G(Object(h.a)(Object(h.a)({},q),{},{hsy:"Paku ja mies"===I.serviceName||"Paku ja kaksi miest\xe4"===I.serviceName}))}),[I.serviceName]),Object(a.jsxs)("div",{className:"flex-container",children:[Object(a.jsx)(p.b,{exact:!0,path:["/","/edit/:slug*","/order-pool/:slug*"],children:Object(a.jsx)(x.a,{className:"textarea-1 flex-item",rowsMin:5,cols:40,value:t?b:i.text,placeholder:"Order info here.",onChange:t?function(e){O(e.target.value)}:function(e){s(Object(h.a)(Object(h.a)({},i),{},{text:e.target.value}))}})}),Object(a.jsx)(p.b,{path:"/custom",children:Object(a.jsx)(T,{order:I,handleChange:ee,handleClick:Z})}),Object(a.jsx)(x.a,{className:"textarea-2 flex-item",rowsMin:5,cols:40,ref:V,value:C,placeholder:"Formatted confirmation will be outputted here.",onChange:function(e){return S(e.target.value)}}),Object(a.jsxs)("div",{className:"flex-100-space-between",children:[Object(a.jsxs)(p.b,{exact:!0,path:["/","/edit/:slug*","/order-pool/:slug*"],children:[Object(a.jsx)(F,{handleChange:ee,handleFormatting:Z,order:I}),Object(a.jsx)(N,{handleClick:function(){try{var e=function(e){var t=e.split("\n"),n=[];return t.forEach((function(e){return n.push(e.trim())})),n.join("\n").replaceAll("\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014","").replaceAll("------------------------","")}(i.text),t=Se(e).name,n=k.find((function(e){return e.name===t})),a=q.XL?n.priceXL:n.price,r=ge(e),c=we(e,"Start location"),s=we(e,"End location"),o="".concat(c.address,",").concat(c.postalCode?" "+c.postalCode:""," ").concat(c.city),l="".concat(s.address||"",",").concat(s.postalCode?" "+s.postalCode:""," ").concat(s.city||"");Q({date:{original:r.original,ISODate:r.ISODate,confirmationFormat:r.confirmationFormat},time:ge(e).time,duration:ye(e),serviceName:t,servicePrice:a||Se(e).price,paymentType:Ce(e),fees:xe(ke(e)),address:o,destination:l,name:Ne(e),email:Te(e),phone:Ee(e),comment:Ae(e)})}catch(u){f.a.fail(u.message,1e3)}}})]}),Object(a.jsx)(De,{inputRef:V})]}),Object(a.jsx)(Ue,{handleChange:function(e){G(Object(h.a)(Object(h.a)({},q),{},Object(m.a)({},e.target.name,e.target.value||e.target.checked)))},options:q}),Object(a.jsx)(tt,{order:I,custom:t,confirmation:C,dispatchOrderActionsStatus_error:function(e){return M({type:"CHANGE_ACTIONS_STATUS_ERROR",payload:e})}}),Object(a.jsxs)("div",{className:"send-button-container",children:[Object(a.jsxs)("div",{className:"small-button-container",children:[Object(a.jsx)(y,{disabled:U.email.disable,custom:t,handleChange:ee,label:"Email",name:"email",value:I.email}),Object(a.jsx)(Ke,{statusText:U.email.status,disabled:U.error||U.email.disable||!(I.email&&C),handleClick:function(){return I.email&&C?(R("Waiting",!0),function(e){return oe.apply(this,arguments)}({orderDetails:C,options:q,email:I.email}).then((function(e){R("Done",!0),f.a.info(e.message,500)})).catch((function(e){R("Error",!1),f.a.fail(e.response.data.error)}))):f.a.fail("No confirmation found or recipients defined.",1e3)}})]}),Object(a.jsxs)("div",{className:"small-button-container",children:[Object(a.jsx)(y,{disabled:U.sms.disable,custom:t,handleChange:ee,label:"SMS",name:"phone",value:I.phone}),Object(a.jsx)(We,{statusText:U.sms.status,disabled:U.error||U.sms.disable||!(I.phone&&C),handleClick:function(){return J.apply(this,arguments)}})]}),Object(a.jsx)("div",{className:"small-button-container",children:Object(a.jsx)(Ge,{handleClick:function(){return $.apply(this,arguments)},statusText:U.calendar.status,disabled:U.error||U.calendar.disable||!C})})]}),Object(a.jsx)(Je,{handleClick:Y}),Object(a.jsx)(ie,{setOrderText:s})]})}n(243);var at=n(291),rt=n.p+"static/media/paku24-logo.7602fc02.png";function ct(e){var t,n=e.isLogged,c=e.custom,i=e.setCustom,s=e.handleChange,l=null===(t=Object(p.h)("/custom"))||void 0===t?void 0:t.url;return Object(r.useEffect)((function(){l&&i(!0)}),[l]),Object(a.jsxs)("div",{className:"logo",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(o.b,{onClick:function(){return i(!1)},to:n?"/":"/login",children:Object(a.jsx)("img",{src:rt,alt:"Logo",width:"125px"})}),Object(a.jsx)("span",{className:"text",children:"CONFIRMATOR"})]}),Object(a.jsx)(p.b,{exact:!0,path:["/","/custom/:slug*"],children:n&&Object(a.jsx)(P.a,{style:{margin:0,alignSelf:"center"},control:Object(a.jsx)(at.a,{checked:c,onChange:s,color:"default"})})})]})}var it="/api/login";function st(){return(st=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.post(it,t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return(ot=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.post("".concat(it,"/token"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt={loginWithCredentials:function(e){return st.apply(this,arguments)},loginWithAccessToken:function(){return ot.apply(this,arguments)}},ut=n(122),dt=n.n(ut),jt=function(e){var t=e.notification,n="black";return t.toLowerCase().includes("error")&&(n="red"),Object(a.jsx)(a.Fragment,{children:t?Object(a.jsxs)("div",{style:{backgroundColor:"white",color:n,padding:"10px",width:"80%",borderBottom:"3px solid darkgrey",fontSize:"small",display:"flex",alignItems:"center",marginBottom:"10px"},children:[Object(a.jsx)(dt.a,{}),Object(a.jsx)("span",{style:{marginLeft:"10px"},children:t})]}):null})};function pt(e){var t,n=e.setUser,c={marginBottom:"7px",backgroundColor:"white"},i=Object(p.g)(),s=null===i||void 0===i||null===(t=i.location.state)||void 0===t?void 0:t.referrer,u=Object(r.useState)(""),b=Object(l.a)(u,2),m=b[0],h=b[1],f=Object(r.useState)(""),x=Object(l.a)(f,2),O=x[0],y=x[1],C=Object(r.useState)(!1),k=Object(l.a)(C,2),S=k[0],w=k[1],N=Object(r.useState)(!1),T=Object(l.a)(N,2),E=T[0],A=T[1],I=Object(r.useState)(""),L=Object(l.a)(I,2),D=L[0],z=L[1];function F(){return(F=Object(j.a)(d.a.mark((function e(t){var a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),z("Working..."),e.prev=2,e.next=5,lt.loginWithCredentials({username:m,password:O});case 5:a=e.sent,r=a.user,z("Done"),i.push(s||"/"),n(r),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),A(!0),w(!0),setTimeout((function(){return w(!1)}),2e3),z("Error: ".concat(null===(c=e.t0.response)||void 0===c?void 0:c.data.error));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return Object(a.jsx)("div",{style:{margin:"30px 5px"},children:Object(a.jsxs)("div",{style:{width:"95%",margin:"0 auto",padding:20,backgroundColor:"lightgrey",borderBottom:"4px solid darkgrey"},children:[Object(a.jsxs)("div",{style:{color:"black",fontSize:"1.3rem",letterSpacing:"0.7px",marginTop:"10px",marginBottom:"15px"},children:["LOGIN",Object(a.jsxs)("span",{style:{color:"black",fontSize:"1.0rem",letterSpacing:"0.2px"},children:[" ","or ",Object(a.jsx)(o.b,{to:"/register",children:"request access"})]})]}),Object(a.jsx)(jt,{notification:D}),Object(a.jsxs)("form",{onSubmit:function(e){return F.apply(this,arguments)},style:{paddingBottom:"10px",height:"80%",display:"flex",flexFlow:"column wrap",justifyContent:"space-evenly"},children:[Object(a.jsx)(g.a,{className:"flex-item",style:c,error:E,required:!0,name:"username",value:m,onChange:function(e){var t=e.target;return h(t.value)},label:"Username",variant:"filled",size:"small"}),Object(a.jsx)(g.a,{className:"flex-item",style:c,error:E,type:"password",required:!0,value:O,name:"password",onChange:function(e){var t=e.target;return y(t.value)},label:"Password",variant:"filled",size:"small"}),Object(a.jsx)(v.a,{className:"flex-item",style:c,type:"submit",disabled:S,variant:"contained",size:"small",children:"Login"})]})]})})}function bt(){var e={marginBottom:"7px",backgroundColor:"white"},t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)(""),u=Object(l.a)(s,2),p=u[0],b=u[1],m=Object(r.useState)(""),h=Object(l.a)(m,2),f=h[0],x=h[1],O=Object(r.useState)(""),y=Object(l.a)(O,2),C=y[0],k=y[1],S=Object(r.useState)(!1),w=Object(l.a)(S,2),N=w[0],T=w[1];function E(e){return A.apply(this,arguments)}function A(){return(A=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.a.post("/api/registration/request-access",t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),T(!0),k("Working..."),e.prev=3,e.next=6,E({name:c,email:p,purpose:f});case 6:n=e.sent,k(null===n||void 0===n?void 0:n.message),i(""),b(""),x(""),T(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),T(!1),k("Error: ".concat(null===e.t0||void 0===e.t0||null===(a=e.t0.response.data)||void 0===a?void 0:a.error));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}return Object(a.jsx)("div",{style:{margin:"30px 5px"},children:Object(a.jsxs)("div",{style:{width:"95%",padding:20,margin:"0 auto",backgroundColor:"lightgrey",borderBottom:"4px solid darkgrey"},children:[Object(a.jsxs)("div",{style:{color:"black",fontSize:"1.3rem",letterSpacing:"0.7px",marginTop:"10px",marginBottom:"15px"},children:["REQUEST ACCESS",Object(a.jsxs)("span",{style:{color:"black",fontSize:"1.0rem",letterSpacing:"0.2px"},children:[" ","or ",Object(a.jsx)(o.b,{to:"/login",children:"login"})]})]}),Object(a.jsx)(jt,{notification:C}),Object(a.jsxs)("form",{onSubmit:function(e){return I.apply(this,arguments)},style:{paddingBottom:"10px",height:"80%",display:"flex",flexFlow:"column wrap",justifyContent:"space-evenly"},children:[Object(a.jsx)(g.a,{style:e,required:!0,name:"name",value:c,onChange:function(e){var t=e.target;return i(t.value)},label:"Name",variant:"filled",size:"small"}),Object(a.jsx)(g.a,{style:e,type:"email",required:!0,value:p,name:"email",onChange:function(e){var t=e.target;return b(t.value)},label:"Email",variant:"filled",size:"small"}),Object(a.jsx)(g.a,{style:e,type:"text",required:!0,multiline:!0,rows:"3",value:f,name:"purpose",onChange:function(e){var t=e.target;return x(t.value)},label:"Why you want to use this application?",variant:"filled",size:"small"}),Object(a.jsx)(v.a,{style:e,type:"submit",disabled:N,variant:"contained",size:"small",children:"Send request"})]})]})})}n(244);var mt="/api/logout";function ht(){return(ht=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.a.post(mt).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ft={logout:function(){return ht.apply(this,arguments)}},xt=n(123),Ot=n.n(xt);function vt(e){var t=e.handleClick;return Object(a.jsxs)(v.a,{style:{backgroundColor:"lightgrey"},variant:"outlined",size:"small",onClick:t,children:["Logout ",Object(a.jsx)(Ot.a,{})]})}function gt(e){var t=e.user,n=e.logoutUser;return Object(a.jsxs)("div",{style:{backgroundColor:"darkgrey",padding:"15px",marginTop:"40px",display:"flex",justifyContent:"space-between",borderTop:"3.5px solid lightgrey"},children:[Object(a.jsx)("div",{style:{paddingTop:"2px",marginRight:"20px"},children:Object(a.jsxs)("span",{style:{fontFamily:"monospace"},children:[" ",t.username,Object(a.jsx)("br",{}),t.name]})}),Object(a.jsx)(vt,{handleClick:function(){return ft.logout().then(n)}})]})}function yt(e){var t=e.error;return Object(a.jsxs)("div",{role:"alert",children:[Object(a.jsx)("p",{children:"Something went wrong:"}),Object(a.jsx)("pre",{style:{color:"red"},children:t.message})]})}function Ct(e){var t,n=e.user,c=e.setUser,i=e.children,s=Object(p.g)();null!==n&&"Loading"!==n||(t=s.location.pathname),Object(r.useEffect)(Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt.loginWithAccessToken();case 3:return t=e.sent,n=t.user,e.abrupt("return",c(n));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",c(null));case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]);var o="Loading"===n,l=null===n&&Object(a.jsx)(p.a,{to:{pathname:"/login",state:{referrer:t}}});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ne,{loading:o,redirectComponent:l,children:i}),Object(a.jsx)(p.b,{path:"/login",children:null===n?Object(a.jsx)(pt,{setUser:c}):Object(a.jsx)(p.a,{to:"/"})})]})}var kt=function(){var e=Object(r.useState)("Loading"),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(!1),s=Object(l.a)(i,2),o=s[0],u=s[1],d=Object(p.g)();return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(b.ErrorBoundary,{FallbackComponent:yt,children:[Object(a.jsx)(ct,{isLogged:null!==n&&"Loading"!==n,custom:o,setCustom:u,handleChange:function(e){var t=e.target.checked;return u(t),t?d.push("/custom"):d.push("/")}}),Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{path:"/register",children:Object(a.jsx)(bt,{})}),Object(a.jsx)(p.b,{path:"/",children:Object(a.jsxs)(Ct,{user:n,setUser:c,children:[Object(a.jsx)(nt,{custom:o}),Object(a.jsx)(gt,{user:n,logoutUser:function(){return c(null)}})]})})]})]})})};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(o.a,{basename:"/app",children:Object(a.jsx)(kt,{})})}),document.getElementById("root"))},36:function(e){e.exports=JSON.parse('[{"id":1,"name":"Paku ja kuski","price":30,"priceXL":40},{"id":2,"name":"Paku ja kuski kantoapuna","price":60,"priceXL":60},{"id":3,"name":"Paku ja kaksi muuttomiest\xe4","price":90,"priceXL":90},{"id":4,"name":"Paku ja mies","price":40,"priceXL":40},{"id":5,"name":"Paku ja kaksi miest\xe4","price":70,"priceXL":70}]')}},[[245,1,2]]]);
//# sourceMappingURL=main.5380d5b4.chunk.js.map